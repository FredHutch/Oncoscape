<div ng-show="vm.show" id="cohortMenu" style="display:none;">
    <label class="tray-label tray-label-left"><i class="fa fa-chevron-right" aria-hidden="true"></i></label>
    <div class="cohort-menu tray tray-left">
        <section>
            <div class="row">
                <div class="col-xs-12 form-item">
                    <ul class="nav nav-tabs">
                        <li id="cohort-tab-patients" role="presentation" style="width:50%;text-align:center;" ng-click="vm.showPatientHistory()" class="active"><a>Cohorts</a></li>
                    </ul>
                    <div style="background-color:#ffffff;border:#dddddd 1px solid;border-top-width:0px;padding:10px;">
                        <br />
                        <div id="cohortmenu-chart" style="width:100%;height:150px;">
                            <div id="cohortmenu-single-value" class="cohortmenu-single-value"></div>
                        </div>
                        <div class="dropdown" style="width:100%">
                            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" style="width:100%;">
                                {{vm.cohortFeature.label}}
                                <span class="caret"></span></button>
                            <ul class="dropdown-menu">
                                <li style="padding:0px 5px;" ng-repeat="item in vm.cohortFeatures" ng-click="vm.cohortFeature=item">{{item.label}}</li>
                            </ul>
                        </div>
                        <br />
                        <div id="cohortmenu-survival" style="border:0px solid #DDD;width:100%;height:180px;"></div>

                        <br />
                        <div class="legend-bar ng-binding ng-scope" style="border-color:{{vm.cohort.color}}; position: relative; padding: 2px 10px; line-height: 25px; background-color: rgb(255, 255, 255);">
                            <button class="btn-xs btn btn-default" style="float:right;" ng-click="vm.addCohort()" tooltip="Save Cohort"><i style="color:#0b97d3" class="glyphicon glyphicon-plus"></i></button>
                            <label>Current Selection</label>
                        </div>
                        <div ng-if="vm.cohorts.length>0 && !vm.edit">
                            <div ng-repeat="cohort in vm.cohorts track by $index" class="legend-bar ng-binding ng-scope" style="border-color:{{cohort.color}}; position: relative; padding: 2px 10px; line-height: 25px; background-color: rgb(255, 255, 255);">
                                <button class="btn-xs btn btn-default" style="float:right;" ng-click="vm.editCohort(cohort)">
                                    <i style="color:#0b97d3" class="glyphicon glyphicon-edit"></i>
                                </button>
                                <a class="markers-command hvr-sweep-to-right" style="margin-right:25px;" ng-click="vm.setCohort(cohort)">
                                    {{cohort.name}} 
                                    <!--P{{cohort.patientIds.length}} S{{cohort.sampleIds.length}} C{{cohort.clinical.length}}-->
                                </a>
                            </div>
                        </div>


                        <br />
                        <div ng-if="vm.edit">
                            <hr>
                            <div class="legend-bar ng-binding ng-scope" style="border-color:{{vm.editItem.color}}; position: relative; padding: 2px 10px; line-height: 25px; background-color: rgb(255, 255, 255);">
                                <label>Edit Cohort</label>
                            </div>

                            <div class="row">
                                <div class="col-xs-12 form-group" style="margin-top:10px;">
                                    <input type="text" class="form-control" ng-model="vm.editItem.name">
                                </div>
                                <div class="col-xs-12 form-group" style="text-align:right">
                                    <button class="btn btn-sm btn-default" style="width:80px" ng-click="vm.removeCohort(vm.editItem);vm.edit=false;">Remove</button>
                                    <button class="btn btn-sm btn-primary" style="width:80px" ng-click="vm.edit=false">Done</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="cohortmenu-legand"></div>
            <i id="cohortmenu-lock" class="fa fa-lock tray-sticky-icon" ng-click="vm.toggle()" locked="true"></i>
        </section>
    </div>
</div>