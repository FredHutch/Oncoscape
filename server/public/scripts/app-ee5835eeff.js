if(function(){"use strict";angular.module("oncoscape",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","ui-rangeSlider","toastr"])}(),function(){"use strict";function t(){function t(t,e,n,a){var o=t.getUserApi();o.onLogin.add(function(){a(function(){i.showMenu=!0})}),o.onLogout.add(function(){a(function(){i.showMenu=!1})});var i=this;i.showMenu=!1,i.datasource=e.datasource||"DEMOdz",i.toolsClick=function(){n.go("tools",{datasource:i.datasource})},i.cohortClick=function(){t.toggleFilter()},i.logoutClick=function(){o.logout(),n.transitionTo("landing")}}t.$inject=["osApi","$stateParams","$state","$timeout"];var e={restrict:"E",templateUrl:"app/components/header/header.html",scope:{},controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osHeader",t)}(),function(){"use strict";function t(){function t(t,e,n){var a=this;a.datasource=n.datasource||"DEMOdz",a.tools=[{name:"Markers + Patients",route:"markers",img:"markers.png",copy:"Link copy number variation and mutation data to patients."},{name:"Timelines",route:"timelines",img:"timelines.png",copy:""},{name:"Pathways",route:"pathways",img:"pathways.png",copy:"Map patient specific expression levels on a hand curated network of genes."},{name:"PLSR",route:"plsr",img:"plsr.png",copy:"Use linear regression to correlate genes with clinical features using RNA expression."},{name:"PCA",route:"pca",img:"pca.png",copy:"Two dimensional view of per sample expression data."},{name:"Survival",route:"survival",img:"survival.png",copy:"Compare survival rates of selected patients against the remaining population in a Kaplan Meier plot."},{name:"Patient History",route:"history",img:"history.png",copy:""},{name:"MetaData",route:"metadata",img:"metadata.png",copy:""}],a.explore=function(t,n){e.go(t,{datasource:n})}}t.$inject=["osApi","$state","$stateParams"];var e={restrict:"E",templateUrl:"app/components/tools/tools.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osTools",t)}(),function(){"use strict";function t(){function t(t,e,n,a,o,i,s){function r(){var t=p.filter(d,function(t){return t.id});l.draw(t,c.feature,c.events,c.sort,c.align)}var l=function(){var t=angular.element("#timelines-chart"),e=t.width()-100,n=t.height(),a=s.select("#timelines-chart").append("svg").attr("width","100%").attr("height",n),o=[0,e],r={"shape-rendering":"crispEdges",stroke:"none"};a.append("g").style(r).attr({"class":"axisFeature axis",transform:"translate(50, 49)"}).call(s.svg.axis().scale(s.scale.linear().domain([0,1]).range([0,e])).orient("top")),a.append("g").style(r).attr({"class":"axisTimeline axis",transform:"translate(50, 0)"}).call(s.svg.axis().scale(s.scale.linear().domain([0,1]).range([0,e])).orient("bottom"));var l=a.append("g"),c=a.append("g"),d=a.append("g"),p=function(t,e,a,o,i){var s=t.filter(function(t){return t.hasOwnProperty("__"+this.name)},i);s=s.sort(function(t,e){return t.calcEvents[o.index].value>e.calcEvents[o.index].value?-1:1},o),s.forEach(function(t){t.dateEvents.forEach(function(t){t.startValue=t.start+this,t.endValue=null!=t.end?t.end+this:null},-t["__"+this.name].start)},i);var r=Math.floor((n-100)/s.length);1>r&&(r=1),r>20&&(r=20),g(s,e,a,o,i,r),h(s,e,a,o,i,r),m(s,e,a,o,i,r)},h=function(t,e,n,i,r,l){var d;if(-1==e.index)return d=a.selectAll("rect.feature").data([]),void d.exit().remove();var p=[0,s.max(t.map(function(t){return t.calcEvents[this].value},e.index))],u=s.scale.linear().domain(p).range(o);a.transition().duration(750).select("g.axisFeature").call(s.svg.axis().scale(u).orient("top")),d=c.selectAll("rect.feature").data(t),d.transition().duration(300).attr({"class":"feature",x:0,width:function(t){return u(t.calcEvents[e.index].value)},height:1==l?1:l-1}),d.enter().append("rect").style({fill:"#9AD6F1"}).attr({transform:function(t,e){return"translate(50,"+(e*l+50)+")"},"class":"feature",x:0,width:function(t){return u(t.calcEvents[e.index].value)},height:1==l?1:l-1}),d.exit().remove()},g=function(t,n,a,o,i,s){angular.element(".timelines-lbl-events").css({top:s*t.length+100});var r=l.selectAll("rect.lines").data(t);r.enter().append("rect").style({fill:"#EFEFEF"}).attr({width:e,height:s-1,"class":"lines",transform:function(t,e){return"translate(50,"+(e*s+50)+")"}}),r.exit().remove()},m=function(t,n,r,l,c,p){var h=r.filter(function(t){return t.selected}),g=function(t){return t.filter(function(t){for(var e=0;e<h.length;e++)if(h[e].name==t.name)return!0;return!1})},m=[t.reduce(function(t,e){return Math.min(t,g(e.dateEvents).reduce(function(t,e){return Math.min(e.startValue,t)},1/0))},1/0),t.reduce(function(t,e){return Math.max(t,g(e.dateEvents).reduce(function(t,e){var n=null==e.endValue?e.startValue:e.endValue;return Math.max(n,t)},-(1/0)))},-(1/0))],f=s.scale.linear().domain(m).range(o),v=a.transition().duration(300).select("g.axisTimeline");v.attr({transform:"translate(50,"+(p*t.length+49)+")"}),v.call(s.svg.axis().scale(f).orient("bottom").tickFormat(function(t){return i.unix(t/1e3).format("MM/DD/YYYY")}));var y=d.selectAll("g.timeline").data(t);y.enter().append("g").attr({width:e,height:p-1,"class":"timeline",transform:function(t,e){return"translate(50,"+(e*p+50)+")"}}),y.exit().remove();var b=y.selectAll("rect.timeline").data(function(t){return g(t.dateEvents)});b.enter().append("rect").style({opacity:1,fill:u}).attr({"class":"timeline",height:p,width:function(t){return null==t.endValue?3:f(t.endValue)-f(t.startValue)},x:function(t){return Math.round(f(t.startValue))}}),b.transition().style({opacity:1,fill:u}).attr({width:function(t){return null==t.endValue?3:f(t.endValue)-f(t.startValue)},x:function(t){return Math.round(f(t.startValue))}}),b.exit().remove()};return{draw:p}}(),c=this;c.datasource=a.datasource||"DEMOdz",c.features,c.feature,c.events,c.sorts,c.sort,c.align;var d,p=t.getPatientFilterApi();p.init(c.datasource),p.onSelect.add(r),c.eventClick=function(t){t.selected=!t.selected,r()},c.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},t.setBusy(!0)("Loading Dataset"),t.setDataset(c.datasource).then(function(){t.getTimelines().then(function(e){d=m(e.payload.pts),c.sorts=g(d),c.sort=c.sorts[0];var a=g(d);a.unshift({index:-1,name:"None"}),c.features=a,c.feature=c.features[0],c.events=h(e.payload.eventTypes),c.align=c.events[0],n.$watchGroup(["vm.feature","vm.sort","vm.align"],r),t.setBusy(!1)})});var u=function(t){var e=t.name,n="Birth"===e?"DARKBLUE":"Diagnosis"===e?"DARKGREEN":"Pathology"===e?"DARKMAGENTA":"Progression"===e?"DARKORANGE":"Absent"===e?"DARKSLATEBLUE":"Status"===e?"DEEPPINK":"Radiation"===e?"LIMEGREEN":"Procedure"===e?"GOLD":"Encounter"===e?"MIDNIGHTBLUE":"Drug"===e?"MEDIUMSEAGREEN":"black";return n},h=function(t){return Object.keys(t).map(function(t){var e={name:t,selected:!0};return e.color=u(e),e})},g=function(t){return t[0].calcEvents.map(function(t,e){return{name:t.name,index:e}})},m=function(t){t=Object.keys(t).map(function(e){var n=t[e];return n.id=e,n});for(var e=0;e<t.length;e++){var n=t[e],a=i,o="YYYY-MM-DD",s=n.dateEvents.filter(function(t){return"single"===t.eventOrder}).map(function(t){return{start:1e3*a(t.date,o).unix(),end:null,name:t.name}}),r=n.dateEvents.filter(function(t){return"end"===t.eventOrder}).map(function(t){return{end:1e3*a(t.date,o).unix(),id:t.eventID}}),l=n.dateEvents.filter(function(t){return"start"===t.eventOrder}).map(function(t){return{start:1e3*a(t.date,o).unix(),name:t.name,id:t.eventID}});l.forEach(function(t){t.end=r.filter(function(e){return e.id==t.id})[0].end}),n.dateEvents=l.length>0?l.concat(s):s,n.dateEvents.forEach(function(t){n["__"+t.name]=t})}return t}}t.$inject=["osApi","$state","$scope","$stateParams","$window","moment","d3"];var e={restrict:"E",templateUrl:"app/components/timelines/timelines.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osTimelines",t)}(),function(){"use strict";function t(){function t(t,e,n,a,o){function i(){t.setBusy(!0);var e=l.filter(r,function(t){return t});t.getCalculatedSurvivalCurves(e,"").then(function(e){angular.element("#survival-img").attr("src",e.payload),t.setBusy(!1)})}var s=this;s.datasource=o.datasource||"DEMOdz";var r,l=t.getPatientFilterApi();l.init(s.datasource),l.onSelect.add(i),t.setBusy(!0),t.setDataset(s.datasource).then(function(){t.getPatientHistoryTable(s.datasource).then(function(t){r=t.payload.tbl.map(function(t){return t[0]}),i()})})}t.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var e={restrict:"E",templateUrl:"app/components/survival/survival.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osSurvival",t)}(),function(){"use strict";function t(){function t(t,e,n,a,o,i,s){var r=this;r.datasource=n.datasource||"DEMOdz",r.deathMinFilter=r.deathMinValue=45,r.deathMaxFilter=r.deathMaxValue=66,r.survivalMinFilter=r.survivalMinValue=3,r.survivalMaxFilter=r.survivalMaxValue=7,r.geneSets=[],r.geneSet=null,r.frame,r.tip=null,r.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},r.update=function(){d(!0)};var l=angular.element("#plsr-chart"),c=function(){function t(t,e,l){a&&a.remove(),n&&n.remove();var u=-1*t;d=i.scale.linear().domain([u,t]).range([0,h]),p=i.scale.linear().domain([u,t]).range([g,0]),c=m.selectAll("text").data(e).enter().append("text").attr("class","text").attr("x",function(t){return d(t[0])}).attr("y",function(t){return p(t[1])}).text(function(t){return t.name}).attr("text-anchor",function(t){var e=t[0]>0?"start":"end";return e}).style("fill","black"),n=m.selectAll("line").data(e).enter().append("line").attr("class","line").style("stroke-width",3).style("stroke",function(t){return t.name.indexOf("Age")?"#1396de":"#38347b"}).attr("x1",d(0)).attr("y1",p(0)).attr("x2",function(t){return d(t[0])}).attr("y2",function(t){return p(t[1])}),a=m.selectAll("circle").data(l).enter().append("circle").attr("cx",function(t){return d(t[0])}).attr("cy",function(t){return p(t[1])}).attr("r",function(){return 3}).style("fill","black").on("click",function(t){angular.element("#plsr-webpage").modal();var e="http://www.genecards.org/cgi-bin/carddisp.pl?gene="+t.name;o.$apply(function(){r.frame=s.trustAsResourceUrl(e)})}).on("mouseover",function(t){var e=i.mouse(this);f.text(t.name).style("top",e[1]+160+"px").style("left",e[0]+10+"px").style("visibility","visible")}).on("mousemove",function(){var t=i.mouse(this);f.style("top",t[1]+160+"px").style("left",t[0]+10+"px")}).on("mouseout",function(){return f.style("visibility","hidden")})}function e(t,e,o){c.data(e).transition().duration(900).attr("x",function(t){return d(t[0])}).attr("y",function(t){return p(t[1])}),n.data(e).transition().duration(900).attr("x1",d(0)).attr("y1",p(0)).attr("x2",function(t){return d(t[0])}).attr("y2",function(t){return p(t[1])}),a.data(o).transition().duration(900).each("start",function(){i.select(this)}).delay(function(t,e){return e/o.length*500}).attr("cx",function(t){return d(t[0])}).attr("cy",function(t){return p(t[1])}).each("end",function(){i.select(this).transition().duration(500).style("fill","black").attr("r",3)})}var n,a,c,d,p,u={top:20,right:20,bottom:30,left:40},h=l.width()-u.left-u.right,g=l.height()-u.top-u.bottom,m=i.select("#plsr-chart").append("svg").attr("id","chart").attr("width",h).attr("height",g),f=m.append("div").style("position","absolute").style("z-index","10").style("visibility","hidden");return{create:t,update:e}}("#plsr-chart");t.setBusy(!0)("Loading Dataset"),t.setDataset(r.datasource).then(function(e){var n=e.payload.rownames.filter(function(t){return t.indexOf("mtx.mrna")>=0});n=n[n.length-1].replace(".RData",""),t.setBusyMessage("Creating PLSR Matrix"),t.getPLSR(r.datasource,n).then(function(){t.setBusyMessage("Loading Gene Sets"),t.getGeneSetNames().then(function(e){r.geneSets=e.payload,r.geneSet=r.geneSets[0],t.setBusyMessage("Loading Patients"),t.getSummarizedPLSRPatientAttributes().then(function(t){var e=t.payload;r.deathMinValue=Math.floor(e.AgeDx[0]/365.24),r.deathMaxValue=Math.floor(e.AgeDx[4]/365.24),r.survivalMinValue=Math.floor(e.Survival[0]/365.24),r.survivalMaxValue=Math.floor(e.Survival[4]/365.24),o.$watch("vm.geneSet",function(){d(!1)})})})})});var d=function(e){t.setBusyMessage("Calculating PLSR");var n=[{name:"Survival",low:365.24*Number(r.survivalMinFilter),high:365.24*Number(r.survivalMaxFilter)},{name:"AgeDx",low:365.24*Number(r.deathMinFilter),high:365.24*Number(r.deathMaxFilter)}];t.getCalculatedPLSR(r.geneSet,n).then(function(n){t.setBusyMessage("Rendering PLSR");var a=n.payload,o=a.loadings.map(function(t,e){return t.name=a.loadingNames[e],t}),i=a.vectors.map(function(t,e){return t.name=a.vectorNames[e],t}),s=1.2*a.maxValue;e?c.update(s,i,o):c.create(s,i,o),t.setBusy(!1)})}}t.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3","$sce"];var e={restrict:"E",templateUrl:"app/components/plsr/plsr.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osPlsr",t)}(),function(){"use strict";function t(){function t(t,e,n,a,o,i){function s(){var t,e,n=l,a=d.width(),o=d.height();t=Math.abs(i.max(n,function(t){return+t[0]})),e=Math.abs(i.min(n,function(t){return+t[0]}));var s=1.2*(t>e?t:e);t=Math.abs(i.max(n,function(t){return+t[1]})),e=Math.abs(i.min(n,function(t){return+t[1]}));var r=1.2*(t>e?t:e),m=i.scale.linear().domain([-s,s]).range([0,a]),f=i.scale.linear().domain([-r,r]).range([o,0]),v=i.svg.axis().scale(m).orient("top").ticks(5),y=i.svg.axis().scale(f).orient("left").ticks(5),b=i.svg.brush().x(m).y(f).on("brushend",function(){var t=b.extent();p.selectAll("circle").classed("pca-node-selected",function(e){return e[0]>t[0][0]&&e[0]<t[1][0]&&e[1]>t[0][1]&&e[1]<t[1][1]}),i.select(this).transition().duration(300).call(b.extent([[0,0],[0,0]]))});p.call(b),n=c.filter(l,function(t){return t.id}),p.attr("width",a).attr("height",o);var w=p.selectAll("circle").data(n,function(t){return t});w.enter().append("circle").attr("class","pca-node").attr("cx",.5*a).attr("cy",.5*o).attr("r",function(){return 3}).style("fill-opacity","0").on("mouseover",function(t){g.transition().duration(200).style("opacity",1),g.html(t.id).style("left",i.event.pageX+10+"px").style("top",i.event.pageY-5+"px")}).on("mouseout",function(){g.transition().duration(500).style("opacity",0)}).transition().duration(750).delay(function(t,e){return e/300*500}).attr("cx",function(t){return m(t[0])}).attr("cy",function(t){return f(t[1])}).style("fill-opacity",1),w.exit().transition().duration(600).delay(function(t,e){return e/300*500}).attr("cx",.5*a).attr("cy",.5*o).style("fill-opacity","0").remove(),u.attr("class","axis").attr("transform","translate(0, "+f(0)+")").call(v).append("text").text("PC1"),h.attr("class","axis").attr("transform","translate("+m(0)+", 0)").call(y).append("text").attr("y",10).attr("dy",".71em").text("PC2")}var r=this;r.datasource=n.datasource||"DEMOdz",r.geneSets=[],r.geneSet=null,r.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var l,c=t.getPatientFilterApi();c.init(r.datasource),c.onSelect.add(s),r.cohort,r.createCohort=function(){c.addFilter(r.cohort,i.selectAll(".pca-node-selected")[0].map(function(t){return t.__data__.id})),r.cohort=""};var d=angular.element("#pca-chart"),p=i.select("#pca-chart").append("svg").attr("id","chart"),u=p.append("g"),h=p.append("g"),g=i.select("body").append("div").attr("class","tooltip");t.setBusy(!0)("Loading Dataset"),t.setDataset(r.datasource).then(function(e){var n=e.payload.rownames.filter(function(t){return t.indexOf("mtx.mrna")>=0});n=n[n.length-1].replace(".RData",""),t.setBusyMessage("Creating PCA Matrix"),t.getPCA(r.datasource,n).then(function(){t.setBusyMessage("Loading Gene Sets"),t.getGeneSetNames().then(function(t){r.geneSets=t.payload,r.geneSet=r.geneSets[0],o.$watch("vm.geneSet",function(){m()})})})});var m=function(){t.setBusyMessage("Calculating PCA"),t.getCalculatedPCA(r.geneSet).then(function(e){t.setBusyMessage("Rendering PCA");var n=e.payload;r.pc1=e.payload["importance.PC1"],r.pc2=e.payload["importance.PC2"];var a=n.scores,o=n.ids;l=a.map(function(t,e){return t.id=o[e],t},n.ids),s(),t.setBusy(!1)})}}t.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3"];var e={restrict:"E",templateUrl:"app/components/pca/pca.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osPca",t)}(),function(){"use strict";function t(){function t(t,e,n,a,o,i){function s(){var t="rgb(5, 108, 225)",e="red",n="rgb(56, 52,123)",a="green";return[{selector:"node",style:{content:"data(label)","text-valign":"center","text-halign":"center",shape:"ellipse",width:"60px",height:"50px",color:t,"background-color":"rgb(250, 250, 250)","border-width":"2px","border-color":t}},{selector:"edge",style:{width:"2px","line-color":t,"line-style":"solid"}},{selector:'node[nodeType="class"], node[nodeType="family"], node[nodeType="complex"]',style:{content:"","background-color":"white",shape:"roundrectangle"}},{selector:'edge[edgeType="activates"], edge[edgeType="indirectly activates"]',style:{"line-color":a,"target-arrow-shape":"triangle","target-arrow-color":a}},{selector:'edge[edgeType="inhibits"], edge[edgeType="ubiquitinylates"]',style:{"line-color":e,"target-arrow-shape":"tee","target-arrow-color":e}},{selector:'edge[edgeType="fusion"]',style:{"line-color":a}},{selector:'edge[edgeType="contains"]',style:{display:"none"}},{selector:'node[nodeType="process"]',style:{}},{selector:"node:selected",style:{"overlay-opacity":"0.5","overlay-color":"red"}},{selector:'node[nodeType="rtk"]',style:{content:"data(label)","background-color":"rgb(224, 209, 178)","border-color":"black","border-width":"0px","font-size":"48px",shape:"roundrectangle",width:"40px",height:"160px"}},{selector:'node[nodeType="kinase"]',style:{content:"data(label)","background-color":"rgb(255, 206, 194)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="dimer"]',style:{content:"","background-color":"rgb(234, 219, 188)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="loop"]',style:{content:"","background-color":"rgb(255, 255, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px","border-style":"dotted"}},{selector:'node[nodeType="gtpase"]',style:{content:"data(label)","background-color":"rgb(194, 194, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="adaptor"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="GEF"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="process"]',style:{content:"data(label)","background-color":"rgb(255, 255, 255)",shape:"roundrectangle",width:"100px",height:"40px","font-size":"24px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="TF"]',style:{content:"data(label)","background-color":"rgb(255, 206, 94)",shape:"diamond",width:"160px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="gene fusion"]',style:{content:"data(label)",shape:"roundrectangle","font-size":"24px","border-color":"red","border-width":"3px"}},{selector:"edge:selected",style:{"overlay-color":"grey","overlay-opacity":"0.3"}},{selector:'edge[edgeType="recruits"]',style:{width:"2px"}},{selector:'edge[edgeType="fusion"]',style:{"line-color":n}},{selector:'edge[edgeType="recruits"]',style:{"line-color":"red",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","target-arrow-color":"black"}},{selector:'edge[edgeType="cycles"]',style:{"line-color":"black",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","source-arrow-shape":"triangle","target-arrow-color":"green","source-arrow-color":"red"}},{selector:'edge[edgeType="associates"]',style:{"line-color":"black",width:"1px","line-style":"solid"}},{selector:'edge[edgeType="activation"]',style:{"line-color":"green",width:"1px"}},{selector:'edge[edgeType="inhibition"]',style:{"line-color":"red",width:"1px"}}]}var r,l=this;l.datasource=n.datasource||"DEMOdz",l.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},l.search="",l.frame,l.tip=null;var c,d=angular.element("#gbm-chart");a.$watch("vm.search",function(){if(!angular.isUndefined(c)){var t=l.search.toUpperCase(),e=t.length;c.nodes().map(function(n){0==e?n.unselect():n.attr("name").substr(0,e)===t?n.select():n.unselect()})}}),t.setBusy(!0),t.setDataset(l.datasource).then(function(){t.getPathway().then(function(e){r=angular.fromJson(e.payload),c=i({container:d,elements:r.elements,style:s(),layout:{name:"preset",fit:!0}}).on("click","node",function(t){angular.element("#gbm-webpage").modal();var e="http://www.genecards.org/cgi-bin/carddisp.pl?gene="+t.cyTarget.data().id;a.$apply(function(){l.frame=o.trustAsResourceUrl(e)})}).on("click","edge",function(t){angular.element("#gbm-webpage").modal();var e="http://www.ncbi.nlm.nih.gov/pubmed/?term="+t.cyTarget.data().pmid;a.$apply(function(){l.frame=o.trustAsResourceUrl(e)})}).on("mouseover","edge",function(t){a.$apply(function(){l.tip=t.cyTarget.data().source+" Extract"}),t.cyTarget.style({width:"4px"})}).on("mouseout","edge",function(t){a.$apply(function(){l.tip=null}),t.cyTarget.style({width:"2px"})}).on("mouseover","node",function(t){a.$apply(function(){l.tip=t.cyTarget.data().name+" Gene Card"})}).on("mouseout","node",function(){a.$apply(function(){l.tip=null})}),t.setBusy(!1)})})}t.$inject=["osApi","$state","$stateParams","$scope","$sce","cytoscape"];var e={restrict:"E",templateUrl:"app/components/pathways/pathways.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osPathways",t)}(),function(){"use strict";function t(t,e,n,a,o){var i={},s=1,r=function(){return 9999==s&&(s=1),s++},l=new t(o.protocol()+"://"+o.host()+":"+("3002"==o.port()?80:o.port())+"/oncoscape","",{debug:!1,devel:!1});l.onmessage=function(t){var e=angular.fromJson(t.data);if(angular.isDefined(i[e.cmd])){var n=i[e.cmd];delete i[e.cmd],n.resolve(e)}else a.error("Unhandled message: %o",e)};var c=function(t){t.callback=r(),t.status="request",t.payload=t.payload||"";var e=n.defer();return i[t.callback]=e,0===l.readyState?l.onopen=function(){l.send(angular.toJson(t))}:l.send(angular.toJson(t)),e.promise.then(function(e){return t.response=e,e})};return{request:c}}t.$inject=["SockJS","$rootScope","$q","$log","$location"],angular.module("oncoscape").factory("osSocket",t)}(),function(){"use strict";function t(t,e,n){function a(){var t=new n.Signal,a=new n.Signal,o={name:"",password:"",domain:{name:"Guest"},authenticated:!1,token:null},i=[{name:"Guest"},{name:"FHCRC"},{name:"SCCA"}],s=function(){o.name="",o.password="",o.domain={name:"Guest"},o.authenticated=!1,o.token=null,a.dispatch()},r=function(n){if(o=n,"Guest"==n.domain.name)return o.authenticated=!0,o.token="Guest",void t.dispatch(o);var a={method:"POST",url:"/login/",data:{username:o.name,password:o.password,domain:o.domain.name}};return e(a).then(function(e){e.data.success?(o.authenticated=!0,o.token=e.data.token,t.dispatch(o)):(o.authenticated=!1,o.token=null)})};return{getDomains:function(){return i},getUser:function(){return o},login:r,logout:s,onLogin:t,onLogout:a}}function o(){return _}function i(t){return t?angular.element(".loader-modal").show():angular.element(".loader-modal").hide(),s}function s(){}function r(){angular.element("#filter-dropdown").slideToggle()}function l(){angular.element("#filter-dropdown").slideToggle()}function c(){angular.element("#filter-dropdown").slideToggle()}function d(e){return t.request({cmd:"specifyCurrentDataset",payload:e})}function p(){return t.request({cmd:"getDataSetNames"})}function u(e){return t.request({cmd:"getDataManifest",payload:e})}function h(e){return t.request({cmd:"getPatientHistoryTable",payload:{datasetName:e,durationFormat:"byYear"}})}function g(){}function m(){}function f(){return t.request({cmd:"getGeneSetNames"})}function v(){return t.request({cmd:"getSampleCategorizationNames"})}function y(e){return t.request({cmd:"getSampleCategorization",payload:e})}function b(e){return t.request({cmd:"getMarkersNetwork",payload:e})}function w(){}function x(e){return t.request({cmd:"getCanonicalizePatientIDsInDataset",payload:e})}function T(){}function C(){}function $(e,n){var a={dataPackage:e,matrixName:n};return t.request({cmd:"createPCA",payload:a})}function k(e){var n={genes:e};return t.request({cmd:"calculatePCA",payload:n})}function E(e,n){var a={dataPackage:e,matrixName:n};return t.request({cmd:"createPLSR",payload:a})}function S(e,n){var a={genes:e,factorCount:n.length,factors:n};return t.request({cmd:"calculatePLSR",payload:a})}function A(e){return e=e||["AgeDx","Survival"],t.request({cmd:"summarizePLSRPatientAttributes",payload:e})}function D(e,n){return t.request({cmd:"calculateSurvivalCurves",payload:{sampleIDs:e,title:n}})}function M(){return t.request({cmd:"createTimelines"})}function P(){}function O(){return t.request({cmd:"getModuleModificationDate",payload:"gbmPathways"})}function I(){return t.request({cmd:"getPathway",payload:"g.gbmPathways.json"})}function N(e,n){return t.request({cmd:"get_mRNA_data",payload:{entities:e,features:n}})}function F(e,n){return t.request({cmd:"get_cnv_data",payload:{entities:e,features:n}})}function L(e,n){return t.request({cmd:"get_mutation_data",payload:{entities:e,features:n}})}function R(){return B}function U(){function t(t){l!=t&&(l=t,c=angular.fromJson(localStorage.getItem(t)),c||(c={name:t,ids:"*"}),d=c)}function e(){}function a(t,e){var n={name:t,ids:e};d.hasOwnProperty("children")||(d.children=[]),d.children.push(n),d=n,u.dispatch(c),h.dispatch(d),localStorage.setItem(l,p(c))}function o(){return d}function i(t){d=t,h.dispatch(d)}function s(){return c}function r(t,e){return"*"==d.ids?t:t.filter(function(t){for(var n=0;n<d.ids.length;n++)if(e(t)==d.ids[n])return!0;return!1})}var l=null,c=null,d=null,p=function(t){var e="{";if(e+='"name":"'+t.name+'"',e+=',"ids":',e+="string"==typeof t.ids?'"*"':'["'+t.ids.join('","')+'"]',t.hasOwnProperty("children")){e+=',"children":[';for(var n=0;n<t.children.length;n++)n>0&&(e+=","),e+=p(t.children[n]);e+="]"}return e+="}"},u=new n.Signal,h=new n.Signal;return{init:t,filter:r,getActiveFilter:o,setActiveFilter:i,addFilter:a,delFilter:e,getFilterTree:s,onChange:u,onSelect:h}}var _=a(),B=U();return{getPatientFilterApi:R,getUserApi:o,showFilter:r,hideFilter:l,toggleFilter:c,setBusy:i,setBusyMessage:s,setDataset:d,getDataSetNames:p,getDataManifest:u,getPatientHistoryTable:h,getPatientHistoryDxAndSurvivalMinMax:g,getSampleDataFrame:m,getGeneSetNames:f,getSampleCategorizationNames:v,getSampleCategorization:y,getMarkersNetwork:b,getPathway:I,getDrugGeneInteractions:w,getCanonicalizePatientIDsInDataset:x,getGeneSetGenes:T,getOncoprintDataSelection:C,getPCA:$,getCalculatedPCA:k,getPLSR:E,getCalculatedPLSR:S,getSummarizedPLSRPatientAttributes:A,getCalculatedSurvivalCurves:D,getTimelines:M,getCalculatedTimelines:P,getMrnaData:N,getCnvData:F,getMutationData:L,getModuleModificationDate:O}}t.$inject=["osSocket","$http","signals"],angular.module("oncoscape").service("osApi",t)}(),function(){"use strict";function t(){function t(t,e,n,a,o){var i=this;i.dataset=o.datasource||"DEMOdz",i.colnames=[],i.rows=[],i.search="",i.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var s;t.setBusy(!0),t.getDataManifest(i.dataset).then(function(e){i.colnames=e.payload.colnames,i.rows=e.payload.mtx,n(function(){s=angular.element("#metadata-datatable").dataTable({paging:!1}),a.$watch("vm.search",function(){s.api().search(i.search).draw()}),t.setBusy(!1)},0,!1)})}t.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var e={restrict:"E",templateUrl:"app/components/metadata/metadata.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osMetadata",t)}(),function(){"use strict";function t(){function t(t,e,n,a,o,i,s,r){function l(e){if(t.setBusy(!0),!angular.isUndefined(e)){angular.isDefined(g)&&g.restore();var n=d.nodes('node[nodeType="patient"]').filterFn(function(t){if("*"==this)return!1;for(var e=0;e<this.length;e++)if(t.data().id==this[e])return!1;return!0},e.ids);g=d.remove(n),t.setBusy(!1)}}var c=this;c.datasource=o.datasource||"DEMOdz",c.optInteractiveModes,c.optInteractiveMode,c.optPatientLayouts,c.optPatientLayout,c.optNodeColors,c.optNodeColor,c.optEdgeColors,c.legandNodes,c.legandPatient,c.legandChromosomes,c.frame,c.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},c.cohort,c.createCohort=function(){t.setBusy(!0);var e=d.$('node[nodeType="patient"]:selected'),n=e.map(function(t){return t.data().id});h.addFilter(c.cohort,n),c.cohort=""};var d,p,u=angular.element("#markers-chart"),h=t.getPatientFilterApi();h.init(c.datasource),h.onSelect.add(l);var g;t.setBusy(!0),t.setDataset(c.datasource).then(function(){t.getPatientHistoryTable(c.datasource).then(function(e){var o=e.payload.tbl;t.getMarkersNetwork(e.payload).then(function(e){p=angular.fromJson(e.payload).elements,p.nodes.filter(function(t){return"patient"===t.data.nodeType}).map(function(t){t.data.pos={x:t.position.x,y:t.position.y},t.data.patient=this.filter(function(e){return e[0]===t.data.id})[0]},o),p.nodes.filter(function(t){var e=t.data.nodeType;return"centromere"===e||"telomere"===e||"gene"===e}).map(function(t){return t.locked=!0,t.selectable=!0,t.grabbable=!1,t}),p.edges.map(function(t){return t.locked=!0,t.selectable=!1,t.grabbable=!1,t}),d=i({container:u,elements:p,style:x,hideEdgesOnViewport:!1,hideLabelsOnViewport:!0,textureOnViewport:!0,motionBlur:!0,minZoom:.1,maxZoom:10,layout:{name:"preset",fit:!0}}),d.nodes().map(function(t){t.data({degree:t.degree(),baseWidth:t.width(),baseHeight:t.height(),zoomed:!1})}),l(),c.optPatientLayouts=b(d,c),c.optEdgeColors=y(d,c,n),c.optNodeColors=v(d,c,t),c.optInteractiveModes=f(d,c,a),c.optInteractiveMode=c.optInteractiveModes[0],m(d),a.$watch("vm.searchGene",function(){angular.isUndefined(c.searchGene)||d.nodes('node[nodeType="gene"]').forEach(function(t){return""==c.searchGene?void t.deselect():void(0==t.data().name.toLowerCase().indexOf(c.searchGene.toLowerCase())?t.select():t.deselect())})}),a.$watch("vm.searchPatient",function(){angular.isUndefined(c.searchPatient)||d.nodes('node[nodeType="patient"]').forEach(function(t){return""==c.searchPatient?void t.deselect():void(0==t.data().id.toLowerCase().indexOf(c.searchPatient.toLowerCase())?t.select():t.deselect())})}),t.setBusy(!1)})})});var m=function(t){var e,a=0;t.on("pan",function(o){var i=o.cy.zoom();console.log(i);var s=i>9?5e-5:i>8?5e-4:i>6?.005:i>4?.02:i>2?.1:i>.5?.3:i>.3?.5:1;a!=s&&(a=s,angular.isDefined(e)&&n.cancel(e),
e=n(function(t,e){for(var n={},a=t.nodes(),o=0;o<a.length;o++)n[a[o].id()]={degree:a[o].degree()*e};t.batchData(n)},300,!1,t,s))})},f=function(t,e){var n=function(){var t=new s.Signal,e=new s.Signal,n=new s.Signal,a=new s.Signal,o=new s.Signal,i=new s.Signal,r=function(){t.removeAll(),e.removeAll(),a.removeAll(),o.removeAll(),n.removeAll(),i.removeAll()},l=function(e){t.add(e),a.add(e)},c=function(t){e.add(t),o.add(t)},d=function(t){n.add(t),i.add(t)};return{geneOver:t,geneOut:e,geneClick:n,patientOver:a,patientOut:o,patientClick:i,over:l,out:c,click:d,removeAll:r}}();t.on("click",'node[nodeType="gene"]',n.geneClick.dispatch).on("click",'node[nodeType="patient"]',n.patientClick.dispatch).on("mouseover",'node[nodeType="gene"]',n.geneOver.dispatch).on("mouseover",'node[nodeType="patient"]',n.patientOver.dispatch).on("mouseout",'node[nodeType="gene"]',n.geneOut.dispatch).on("mouseout",'node[nodeType="patient"]',n.patientOut.dispatch);var o={showPatientInfo:function(t){return"patient"==t.cyTarget.data().nodeType&&a.$apply(function(){e.patient=t.cyTarget.attr("patient"),e.patientChromosomes=t.cyTarget.neighborhood("node").map(function(t){return t.data().id})}),this},hidePatientInfo:function(){return a.$apply(function(){e.patient=e.patientChromosomes=null}),this},showNodeLabel:function(t){return t.cyTarget.style({"font-size":"50px"}),this},hideNodeLabel:function(t){return t.cyTarget.style({"font-size":"0px"}),this},showNeighborLabel:function(t){return t.cyTarget.neighborhood("node").style({"font-size":"50px"}),this},hideNeighborLabel:function(t){return t.cyTarget.neighborhood("node").style({"font-size":"0px"}),this},showDegreeOne:function(t){return t.cyTarget.neighborhood("edge").style({display:"element","line-style":"solid"}),this},hideDegreeOne:function(t){return t.cyTarget.neighborhood("edge").style({display:"none"}),this},showDegreeTwo:function(t){return t.cyTarget.neighborhood("node").neighborhood("edge").style({"line-style":"dashed",display:"element"}),this.showDegreeOne(t),this},hideDegreeTwo:function(t){return t.cyTarget.neighborhood("node").neighborhood("edge").style({display:"none"}),this},showOncoPrint:function(t){var n=e.datasource;if("DEMOdz"!=n&&n.indexOf(!1)){var o=n.substr(4)+"_tcga",i=t.cyTarget.neighborhood("node").map(function(t){return t.data().name}).join("+"),s="http://www.cbioportal.org/ln?cancer_study_id="+o+"&q="+i;a.$apply(function(){r.open(s)})}}},i=[{name:"Hide All",register:function(){n.click(function(t){o.showOncoPrint(t)}),n.over(function(t){o.showPatientInfo(t)}),n.out(function(t){o.hidePatientInfo(t)})},unregister:function(){n.removeAll()}},{name:"Show All",register:function(){n.click(function(t){o.showOncoPrint(t)}),n.over(function(t){o.showPatientInfo(t)}),n.out(function(t){o.hidePatientInfo(t)}),t.$('edge[edgeType!="chromosome"]').style({display:"element"})},unregister:function(){n.removeAll(),t.$('edge[edgeType!="chromosome"]').style({display:"none"})}},{name:"1° When Selected",register:function(){d.$('node[nodeType="patient"]:selected').forEach(function(t){t.neighborhood("edge").style({display:"element","line-style":"solid"})}),d.on("select","node",function(t){o.showDegreeOne(t)}),d.on("unselect","node",function(t){o.hideDegreeOne(t)})},unregister:function(){d.$('node[nodeType="patient"]:selected').forEach(function(t){t.neighborhood("edge").style({display:"none"})}),d.off("select","node"),d.off("unselect","node")}},{name:"2° When Selected",register:function(){d.$('node[nodeType="patient"]:selected').forEach(function(t){t.neighborhood("edge").style({display:"element","line-style":"solid"}),t.neighborhood("node").neighborhood("edge").style({"line-style":"dashed",display:"element"})}),d.on("select","node",function(t){o.showDegreeTwo(t)}),d.on("unselect","node",function(t){o.hideDegreeTwo(t)})},unregister:function(){d.$('node[nodeType="patient"]:selected').forEach(function(t){t.neighborhood("edge").style({display:"none"}),t.neighborhood("node").neighborhood("edge").style({display:"none"})}),d.off("select","node"),d.off("unselect","node")}},{name:"1° On Mouse Over",register:function(){n.click(function(t){o.showOncoPrint(t)}),n.over(function(t){o.showPatientInfo(t).showDegreeOne(t)}),n.out(function(t){o.hidePatientInfo(t).hideDegreeOne(t)})},unregister:function(){n.removeAll()}},{name:"2° On Mouse Over",register:function(){n.click(function(t){o.showOncoPrint(t)}),n.over(function(t){o.showPatientInfo(t).showDegreeTwo(t)}),n.out(function(t){o.hidePatientInfo(t).hideDegreeTwo(t)})},unregister:function(){n.removeAll()}}];return a.$watch("vm.optInteractiveMode",function(t,e){e.unregister(),t.register()}),i},v=function(t,e,n){var a=function(a){t.$('node[nodeType="patient"]').style({"background-color":"rgb(19, 150, 222)"}),n.getSampleCategorization(a.name).then(function(n){e.legandNodes=n.payload.tbl.map(function(t){return t[0]+"|"+t[1]}).filter(function(t,e,n){return n.indexOf(t)===e}).map(function(t){var e=t.split("|");return{name:e[0],color:e[1]}}),t.$('node[nodeType="patient"]').forEach(function(t){for(var e=t.data().id,n=0;n<this.rownames.length;n++)if(e===this.rownames[n]){t.style({"background-color":this.tbl[n][1]});break}},n.payload)})};n.getSampleCategorizationNames().then(function(t){e.optNodeColors=e.optNodeColors.concat(t.payload.map(function(t){return{name:t,fn:a}}))}),e.legandNodes=[{name:"Patients",color:"#3993fa"}];var o=[{name:"Default",fn:function(){e.legandNodes=[{name:"Patients",color:"#3993fa"}],t.$('node[nodeType="patient"]').style({"background-color":"rgb(19, 150, 222)"})}},{name:"Gender",fn:function(){e.legandNodes=[{name:"Male",color:"blue"},{name:"Female",color:"pink"}],t.$('node[nodeType="patient"]').forEach(function(t){t.data().patient&&t.style({"background-color":"male"===t.data().patient[2]?"rgb(5, 108, 225)":"female"===t.data().patient[2]?"pink":"black"})})}},{name:"Age At Diagnosis",fn:function(){e.legandNodes=[{name:"Young",color:"green"},{name:"Old",color:"red"}],t.$('node[nodeType="patient"]').forEach(function(t){if(t.data().patient){var e=t.data().patient[4];t.style({"background-color":"rgb("+255*e/100+","+255*(100-e)/100+",0)"})}})}}];return e.optNodeColor=o[0],o},y=function(t){var e=function(e){var n=angular.element("."+e["class"]);switch(e.state){case"Visible":e.state="Highlight",n.css("border-color",e.color),t.$('edge[edgeType="'+e.name+'"]').style({"line-color":e.color,width:"5px"});break;case"Hidden":e.state="Visible",n.css("border-color",w.gray),t.$('edge[edgeType="'+e.name+'"]').style({"line-color":"#CCC",width:"5px"});break;default:e.state="Hidden",n.css("border-color",w.white),t.$('edge[edgeType="'+e.name+'"]').style({width:"0px"})}},a=[{name:"mutation","class":"edgeMutation",color:"#004358",state:"Highlight",fn:e},{name:"cnGain.1","class":"edgeCnGain1",color:"#1F8A70",state:"Highlight",fn:e},{name:"cnLoss.1","class":"edgeCnLoss1",color:"#BEDB39",state:"Highlight",fn:e},{name:"cnGain.2","class":"edgeCnGain2",color:"#FFE11A",state:"Highlight",fn:e},{name:"cnLoss.2","class":"edgeCnLoss2",color:"#FD7400",state:"Highlight",fn:e}];return n(function(){a.forEach(function(e){angular.element("."+e["class"]).css("border-color",e.color),t.$('edge[edgeType="'+e.name+'"]').style({"line-color":e.color,width:"5px"})})}),a},b=function(t,e){var n=[{name:"Hobo",fn:function(n){e.optPatientLayout=n,t.$('node[nodeType="patient"]').forEach(function(t){t.position(t.data().pos)})}},{name:"Age At Diagnosis",fn:function(n){e.optPatientLayout=n,t.$('node[nodeType="patient"]').forEach(function(t){t.data().patient&&t.position({x:500,y:60*t.data().patient[4]-3e3})})}},{name:"Gender",fn:function(n){e.optPatientLayout=n;var a=1e3,o=1e3;t.$('node[nodeType="patient"]').forEach(function(t){t.data().patient&&("male"==t.data().patient[2].toLowerCase()?t.position({x:a-=50,y:500}):t.position({x:o-=50,y:-500}))})}}];return e.optPatientLayout=n[0],n},w={darkblue:"rgb(5, 108, 225)",blue:"rgb(19, 150, 222)",black:"black",white:"white",red:"red",purple:"rgb(56, 52,123)",gray:"#CCC"},x=[{selector:"node",style:{"background-color":w.blue,"border-opacity":1,"border-color":w.red,"border-width":"0px",height:"20px",width:"20px",label:" data(id)","text-halign":"center","text-valign":"center","font-size":"0px"}},{selector:'node[nodeType="patient"]',style:{"background-color":w.blue,height:"mapData(degree, 0, 50, 3.0, 100.0)",width:"mapData(degree, 0, 50, 3.0, 100.0)"}},{selector:"edge",style:{display:"none"}},{selector:'edge[edgeType="chromosome"]',style:{"line-color":w.blue,display:"element"}},{selector:'node[nodeType="gene"]',style:{"border-color":w.purple,"border-width":"3px","background-color":w.white,height:"mapData(degree, 0, 50, 3.0, 100.0)",width:"mapData(degree, 0, 50, 3.0, 100.0)"}},{selector:'node[nodeType="gene"]:selected',style:{"border-color":w.red,"border-width":"6px"}},{selector:'node[nodeType="centromere"]',style:{"font-size":"24px","min-zoomed-font-size":"12px","text-halign":"center","text-valign":"center","background-color":w.white,"border-color":w.blue,color:w.blue,"border-width":"3px",height:"40px",width:"120px",shape:"roundrectangle",label:"data(id)"}},{selector:'node[nodeType="patient"]:selected',style:{"border-color":w.red,"border-width":"6px"}}]}t.$inject=["osApi","$state","$timeout","$scope","$stateParams","cytoscape","signals","$window"];var e={restrict:"E",templateUrl:"app/components/markers/markers.html",scope:{},controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osMarkers",t)}(),function(){"use strict";function t(){function t(t,e){var n=t.getUserApi(),a=this;a.domains=n.getDomains(),a.user=n.getUser(),a.hasError=!1,a.login=function(){var t=n.login(a.user);angular.isDefined(t)?t.then(function(){a.user.authenticated?e.go("datasource"):a.hasError=!0}):e.go("datasource")}}t.$inject=["osApi","$state"];var e={restrict:"E",templateUrl:"app/components/login/login.html",replace:!0,controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osLogin",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/components/loader/loader.html",replace:!0};return t}angular.module("oncoscape").directive("osLoader",t)}(),function(){"use strict";function t(){function t(t){var e=this;e.login=function(){t.go("login")}}t.$inject=["$state"];var e={restrict:"E",templateUrl:"app/components/landing/landing.html",replace:!0,controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osLanding",t)}(),function(){"use strict";function t(){function t(t,e,n,a,o){function i(){c.fnClearTable();var t=l.filter(r.tbl,function(t){return t[0]});if(0!=t.length){var e=t.map(function(t){return t[4]}),a=t.map(function(t){return t[3]});n(function(){s.filter=l.getActiveFilter().name,s.diagnosisMin=s.diagnosisMinValue=Math.floor(Math.min.apply(null,e)),s.diagnosisMax=s.diagnosisMaxValue=Math.ceil(Math.max.apply(null,e)),s.survivalMin=s.survivalMinValue=Math.floor(Math.min.apply(null,a)),s.survivalMax=s.survivalMaxValue=Math.floor(Math.max.apply(null,a))}),c.fnAddData(t)}}var s=this;s.datasource=o.datasource||"DEMOdz",s.filter,s.colnames=[],s.diagnosisMin=s.diagnosisMinValue=1,s.diagnosisMax=s.diagnosisMaxValue=99,s.survivalMin=s.survivalMinValue=0,s.survivalMax=s.survivalMaxValue=10,s.search="";var r,l=t.getPatientFilterApi();l.init(s.datasource),l.onSelect.add(i),s.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},s.applyFilter=function(){angular.element.fn.DataTable.ext.search=[function(t,e){var n=parseFloat(e[3]),a=parseFloat(e[4]);return isNaN(n)||isNaN(a)?!1:a>=s.diagnosisMin&&a<=s.diagnosisMax&&n>=s.survivalMin&&n<=s.survivalMax}],c.api().draw()},s.cohort,s.createCohort=function(){l.addFilter(s.cohort,c._("tr",{filter:"applied"}).map(function(t){return t[0]})),s.cohort=""};var c;t.setBusy(!0),t.setDataset(s.datasource).then(function(){t.getPatientHistoryTable(s.datasource).then(function(e){r=e.payload,s.colnames=r.colnames,n(function(){c=angular.element("#history-datatable").dataTable({scrollY:"70vh",paging:!1}),a.$watch("vm.search",function(){c.api().search(s.search).draw()}),i(),t.setBusy(!1)},0,!1)})})}t.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var e={restrict:"E",templateUrl:"app/components/history/history.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osHistory",t)}(),function(){"use strict";function t(){function t(){var t=this;t.videos=[{name:"Oncoscape + Github",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Creating Cohorts",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Patients + Markers",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Timelines",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""}]}var e={restrict:"E",templateUrl:"app/components/help/help.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osHelp",t)}(),function(){"use strict";function t(){function t(){}var e={restrict:"E",templateUrl:"app/components/footer/footer.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osFooter",t)}(),function(){"use strict";function t(){function t(t,e,n,a){var o=e.datasource||"DEMOdz",i=t.getPatientFilterApi();i.init(o),i.onChange.add(function(){s.draw()});var s=function(t,e){function o(t){switch(t){case"Cluster":m();break;case"Tree":f()}}function i(){f()}var s,r;s=r=Math.min(n.innerWidth,n.innerHeight)-200;var l,c,d=2e3,p=a.layout.tree().size([r,s-160]),u=a.layout.cluster().size([r,s-160]),h=a.svg.diagonal().projection(function(t){return[t.y,t.x]}),g=a.select("#filters-chart").append("svg").attr("width",s).attr("height",r).append("g").attr("transform","translate(100,0)"),m=function(){var n=t.getFilterTree(),o=u.nodes(n),i=u.links(o);g.transition().duration(d).attr("transform","translate(40,0)"),l=g.selectAll(".filter-link").data(i),l.enter().append("path").attr("class","filter-link").transition().duration(d).attr("d",h),l.transition().duration(d).attr("d",h),l.exit().remove(),c=g.selectAll(".filter-node").data(o);var s=c.enter().append("g").attr("class","filter-node").attr("transform",function(t){return"translate("+t.y+","+t.x+")"});s.append("circle").attr("class","filter-node-circle").attr("r",10).on("click",function(n){t.setActiveFilter(n),e.hideFilter()}).on("mouseover",function(){a.select(this).transition().ease("elastic").duration("500").attr("r",15)}).on("mouseout",function(){a.select(this).transition().ease("quad").delay("100").duration("200").attr("r",10)}),s.append("text").attr({"class":"filter-node-text",dy:30}).style({fill:"#FFF","text-anchor":"middle"}).text(function(t){return t.name}),c.transition().duration(d).attr("transform",function(t){return"translate("+t.y+","+t.x+")"}),c.exit().remove()},f=function(){var n=t.getFilterTree(),o=p.nodes(n),i=p.links(o);g.transition().duration(d).attr("transform","translate(40,0)"),l=g.selectAll(".filter-link").data(i),l.enter().append("path").attr("class","filter-link").transition().duration(d).attr("d",h),l.transition().duration(d).attr("d",h),l.exit().remove(),c=g.selectAll(".filter-node").data(o);var s=c.enter().append("g").attr("class","filter-node").attr("transform",function(t){return"translate("+t.y+","+t.x+")"});s.append("circle").attr("class","filter-node-circle").attr("r",10).on("click",function(n){t.setActiveFilter(n),e.hideFilter()}).on("mouseover",function(){a.select(this).transition().ease("elastic").duration("500").attr("r",15)}).on("mouseout",function(){a.select(this).transition().ease("quad").delay("100").duration("200").attr("r",10)}),s.append("text").attr({"class":"filter-node-text",dy:30}).style({fill:"#FFF","text-anchor":"middle"}).text(function(t){return t.name}),c.transition().duration(d).attr("transform",function(t){return"translate("+t.y+","+t.x+")"}),c.exit().remove()};return m(),{setDisplay:o,draw:i}}(i,t),r=this;r.setDisplay=s.setDisplay}t.$inject=["osApi","$stateParams","$window","d3"];var e={restrict:"E",templateUrl:"app/components/filters/filters.html",scope:{},controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osFilters",t)}(),function(){"use strict";function t(){function t(t,e){var n=this;n.datasets=[],n.explore=function(t,n){e.go(t,{datasource:n})},t.setBusy(!0),t.getDataSetNames().then(function(e){n.datasets=e.payload.datasets,t.setBusy(!1)})}t.$inject=["osApi","$state"];var e={restrict:"E",templateUrl:"app/components/datasource/datasource.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osDatasource",t)}(),function(){"use strict";function t(){function t(){}var e={restrict:"E",templateUrl:"app/components/compare/compare.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("oncoscape").directive("osCompare",t)}(),function(){"use strict";function t(t,e,n){t.$on("$stateChangeStart",function(t,e){angular.element.fn.DataTable.ext.search=[]})}t.$inject=["$rootScope","$state","osApi"],angular.module("oncoscape").run(t)}(),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,a=this;t(this).one("bsTransitionEnd",function(){n=!0});var o=function(){n||t(a).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new a(this)),"string"==typeof e&&o[e].call(n)})}var n='[data-dismiss="alert"]',a=function(e){t(e).on("click",n,this.close)};a.VERSION="3.3.6",a.TRANSITION_DURATION=150,a.prototype.close=function(e){function n(){s.detach().trigger("closed.bs.alert").remove()}var o=t(this),i=o.attr("data-target");i||(i=o.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var s=t(i);e&&e.preventDefault(),s.length||(s=o.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(a.TRANSITION_DURATION):n())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=a,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",n,a.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var a=t(this),o=a.data("bs.button"),i="object"==typeof e&&e;o||a.data("bs.button",o=new n(this,i)),"toggle"==e?o.toggle():e&&o.setState(e)})}var n=function(e,a){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,a),this.isLoading=!1};n.VERSION="3.3.6",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",a=this.$element,o=a.is("input")?"val":"html",i=a.data();e+="Text",null==i.resetText&&a.data("resetText",a[o]()),setTimeout(t.proxy(function(){a[o](null==i[e]?this.options[e]:i[e]),"loadingText"==e?(this.isLoading=!0,a.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,a.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var a=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=a,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var a=t(n.target);a.hasClass("btn")||(a=a.closest(".btn")),e.call(a,"toggle"),t(n.target).is('input[type="radio"]')||t(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var a=t(this),o=a.data("bs.carousel"),i=t.extend({},n.DEFAULTS,a.data(),"object"==typeof e&&e),s="string"==typeof e?e:i.slide;o||a.data("bs.carousel",o=new n(this,i)),"number"==typeof e?o.to(e):s?o[s]():i.interval&&o.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),a="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(a&&!this.options.wrap)return e;var o="prev"==t?-1:1,i=(n+o)%this.$items.length;return this.$items.eq(i)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,a){var o=this.$element.find(".item.active"),i=a||this.getItemForDirection(e,o),s=this.interval,r="next"==e?"left":"right",l=this;if(i.hasClass("active"))return this.sliding=!1;var c=i[0],d=t.Event("slide.bs.carousel",{relatedTarget:c,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=t(this.$indicators.children()[this.getItemIndex(i)]);p&&p.addClass("active")}var u=t.Event("slid.bs.carousel",{relatedTarget:c,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(i.addClass(e),i[0].offsetWidth,o.addClass(r),i.addClass(r),o.one("bsTransitionEnd",function(){i.removeClass([e,r].join(" ")).addClass("active"),o.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(u)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger(u)),s&&this.cycle(),this}};var a=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=a,this};var o=function(n){var a,o=t(this),i=t(o.attr("data-target")||(a=o.attr("href"))&&a.replace(/.*(?=#[^\s]+$)/,""));if(i.hasClass("carousel")){var s=t.extend({},i.data(),o.data()),r=o.attr("data-slide-to");r&&(s.interval=!1),e.call(i,s),r&&i.data("bs.carousel").to(r),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,a=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(a)}function n(e){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),i=t.extend({},a.DEFAULTS,n.data(),"object"==typeof e&&e);!o&&i.toggle&&/show|hide/.test(e)&&(i.toggle=!1),o||n.data("bs.collapse",o=new a(this,i)),"string"==typeof e&&o[e]()})}var a=function(e,n){this.$element=t(e),this.options=t.extend({},a.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};a.VERSION="3.3.6",a.TRANSITION_DURATION=350,a.DEFAULTS={toggle:!0},a.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},a.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var i=t.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),e||o.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(a.TRANSITION_DURATION)[s](this.$element[0][l])}}}},a.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(a.TRANSITION_DURATION):o.call(this)}}},a.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},a.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,a){var o=t(a);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},a.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=a,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(a){var o=t(this);o.attr("data-target")||a.preventDefault();var i=e(o),s=i.data("bs.collapse"),r=s?"toggle":o.data();n.call(i,r)})}(jQuery),+function(t){"use strict";function e(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var a=n&&t(n);return a&&a.length?a:e.parent()}function n(n){n&&3===n.which||(t(o).remove(),t(i).each(function(){var a=t(this),o=e(a),i={relatedTarget:this};o.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(o[0],n.target)||(o.trigger(n=t.Event("hide.bs.dropdown",i)),n.isDefaultPrevented()||(a.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",i)))))}))}function a(e){return this.each(function(){var n=t(this),a=n.data("bs.dropdown");a||n.data("bs.dropdown",a=new s(this)),"string"==typeof e&&a[e].call(n)})}var o=".dropdown-backdrop",i='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.6",s.prototype.toggle=function(a){var o=t(this);if(!o.is(".disabled, :disabled")){var i=e(o),s=i.hasClass("open");if(n(),!s){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",n);var r={relatedTarget:this};if(i.trigger(a=t.Event("show.bs.dropdown",r)),a.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(t.Event("shown.bs.dropdown",r))}return!1}},s.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var a=t(this);if(n.preventDefault(),n.stopPropagation(),!a.is(".disabled, :disabled")){var o=e(a),s=o.hasClass("open");if(!s&&27!=n.which||s&&27==n.which)return 27==n.which&&o.find(i).trigger("focus"),a.trigger("click");var r=" li:not(.disabled):visible a",l=o.find(".dropdown-menu"+r);if(l.length){var c=l.index(n.target);38==n.which&&c>0&&c--,40==n.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=a,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",i,s.prototype.toggle).on("keydown.bs.dropdown.data-api",i,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,a){return this.each(function(){var o=t(this),i=o.data("bs.modal"),s=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e);i||o.data("bs.modal",i=new n(this,s)),"string"==typeof e?i[e](a):s.show&&i.show(a)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var a=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),
this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){a.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(a.$element)&&(a.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&a.$element.hasClass("fade");a.$element.parent().length||a.$element.appendTo(a.$body),a.$element.show().scrollTop(0),a.adjustDialog(),o&&a.$element[0].offsetWidth,a.$element.addClass("in"),a.enforceFocus();var i=t.Event("shown.bs.modal",{relatedTarget:e});o?a.$dialog.one("bsTransitionEnd",function(){a.$element.trigger("focus").trigger(i)}).emulateTransitionEnd(n.TRANSITION_DURATION):a.$element.trigger("focus").trigger(i)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var a=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){a.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var a=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=a,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var a=t(this),o=a.attr("href"),i=t(a.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},i.data(),a.data());a.is("a")&&n.preventDefault(),i.one("show.bs.modal",function(t){t.isDefaultPrevented()||i.one("hidden.bs.modal",function(){a.is(":visible")&&a.trigger("focus")})}),e.call(i,s,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var a=t(this),o=a.data("bs.tooltip"),i="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||a.data("bs.tooltip",o=new n(this,i)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,a){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(a),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),i=o.length;i--;){var s=o[i];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var r="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,a){n[t]!=a&&(e[t]=a)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var a=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!a)return;var o=this,i=this.tip(),s=this.getUID(this.type);this.setContent(),i.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&i.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(r);c&&(r=r.replace(l,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition(),p=i[0].offsetWidth,u=i[0].offsetHeight;if(c){var h=r,g=this.getPosition(this.$viewport);r="bottom"==r&&d.bottom+u>g.bottom?"top":"top"==r&&d.top-u<g.top?"bottom":"right"==r&&d.right+p>g.width?"left":"left"==r&&d.left-p<g.left?"right":r,i.removeClass(h).addClass(r)}var m=this.getCalculatedOffset(r,d,p,u);this.applyPlacement(m,r);var f=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",f).emulateTransitionEnd(n.TRANSITION_DURATION):f()}},n.prototype.applyPlacement=function(e,n){var a=this.tip(),o=a[0].offsetWidth,i=a[0].offsetHeight,s=parseInt(a.css("margin-top"),10),r=parseInt(a.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(r)&&(r=0),e.top+=s,e.left+=r,t.offset.setOffset(a[0],t.extend({using:function(t){a.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),a.addClass("in");var l=a[0].offsetWidth,c=a[0].offsetHeight;"top"==n&&c!=i&&(e.top=e.top+i-c);var d=this.getViewportAdjustedDelta(n,e,l,c);d.left?e.left+=d.left:e.top+=d.top;var p=/top|bottom/.test(n),u=p?2*d.left-o+l:2*d.top-i+c,h=p?"offsetWidth":"offsetHeight";a.offset(e),this.replaceArrow(u,a[0][h],p)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function a(){"in"!=o.hoverState&&i.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,i=t(this.$tip),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],a="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var i=a?{top:0,left:0}:e.offset(),s={scroll:a?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=a?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,s,r,i)},n.prototype.getCalculatedOffset=function(t,e,n,a){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-a,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-a/2,left:e.left-n}:{top:e.top+e.height/2-a/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,a){var o={top:0,left:0};if(!this.$viewport)return o;var i=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-i-s.scroll,l=e.top+i-s.scroll+a;r<s.top?o.top=s.top-r:l>s.top+s.height&&(o.top=s.top+s.height-l)}else{var c=e.left-i,d=e.left+i+n;c<s.left?o.left=s.left-c:d>s.right&&(o.left=s.left+s.width-d)}return o},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var a=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=a,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var a=t(this),o=a.data("bs.popover"),i="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||a.data("bs.popover",o=new n(this,i)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.6",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var a=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=a,this}}(jQuery),+function(t){"use strict";function e(n,a){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,a),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var a=t(this),o=a.data("bs.scrollspy"),i="object"==typeof n&&n;o||a.data("bs.scrollspy",o=new e(this,i)),"string"==typeof n&&o[n]()})}e.VERSION="3.3.6",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",a=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",a=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),i=/^#./.test(o)&&t(o);return i&&i.length&&i.is(":visible")&&[[i[n]().top+a,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),a=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,i=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=a)return s!=(t=i[i.length-1])&&this.activate(t);if(s&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)s!=i[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(i[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',a=t(n).parents("li").addClass("active");a.parent(".dropdown-menu").length&&(a=a.closest("li.dropdown").addClass("active")),a.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var a=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=a,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var a=t(this),o=a.data("bs.tab");o||a.data("bs.tab",o=new n(this)),"string"==typeof e&&o[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),a=e.data("target");if(a||(a=e.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=n.find(".active:last a"),i=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(i),e.trigger(s),!s.isDefaultPrevented()&&!i.isDefaultPrevented()){var r=t(a);this.activate(e.closest("li"),n),this.activate(r,r.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(e,a,o){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var s=a.find("> .active"),r=o&&t.support.transition&&(s.length&&s.hasClass("fade")||!!a.find("> .fade").length);s.length&&r?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),s.removeClass("in")};var a=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=a,this};var o=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var a=t(this),o=a.data("bs.affix"),i="object"==typeof e&&e;o||a.data("bs.affix",o=new n(this,i)),"string"==typeof e&&o[e]()})}var n=function(e,a){this.options=t.extend({},n.DEFAULTS,a),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.6",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,a){var o=this.$target.scrollTop(),i=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return n>o?"top":!1;if("bottom"==this.affixed)return null!=n?o+this.unpin<=i.top?!1:"bottom":t-a>=o+s?!1:"bottom";var r=null==this.affixed,l=r?o:i.top,c=r?s:e;return null!=n&&n>=o?"top":null!=a&&l+c>=t-a?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),a=this.options.offset,o=a.top,i=a.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof a&&(i=o=a),"function"==typeof o&&(o=a.top(this.$element)),"function"==typeof i&&(i=a.bottom(this.$element));var r=this.getState(s,e,o,i);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:s-e-i})}};var a=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=a,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),a=n.data();a.offset=a.offset||{},null!=a.offsetBottom&&(a.offset.bottom=a.offsetBottom),null!=a.offsetTop&&(a.offset.top=a.offsetTop),e.call(n,a)})})}(jQuery),function(){"use strict";function t(t,e){t.state("landing",{url:"/",template:"<os-landing>",authenticate:!1}).state("help",{url:"/help",template:"<os-help>",authenticate:!1}).state("datasource",{url:"/datasource",template:"<os-datasource>",authenticate:!0}).state("tools",{url:"/tools/{datasource}",template:"<os-tools>",authenticate:!0}).state("metadata",{url:"/metadata/{datasource}",template:"<os-metadata>",authenticate:!0}).state("history",{url:"/history/{datasource}",template:"<os-history>",authenticate:!0}).state("plsr",{url:"/plsr/{datasource}",template:"<os-plsr>",authenticate:!0}).state("pca",{url:"/pca/{datasource}",template:"<os-pca>",authenticate:!0}).state("markers",{url:"/markers/{datasource}",template:"<os-markers>",authenticate:!0}).state("pathways",{url:"/pathways/{datasource}",template:"<os-pathways>",authenticate:!0}).state("timelines",{url:"/timelines/{datasource}",template:"<os-timelines>",authenticate:!0}).state("survival",{url:"/survival/{datasource}",template:"<os-survival>",authenticate:!0}).state("compare",{url:"/compare/{datasource}",template:"<os-compare>",authenticate:!0}),e.otherwise("/")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("oncoscape").config(t)}(),function(){"use strict";angular.module("oncoscape").constant("moment",moment).constant("d3",d3).constant("cytoscape",cytoscape).constant("signals",signals).constant("SockJS",SockJS).constant("domain",document.domain).constant("$",$)}(),function(){"use strict";function t(t,e){t.debugEnabled(!0),e.allowHtml=!0,e.timeOut=3e3,e.positionClass="toast-top-right",e.preventDuplicates=!0,e.progressBar=!0}t.$inject=["$logProvider","toastrConfig"],angular.module("oncoscape").config(t)}(),angular.module("oncoscape").run(["$templateCache",function(t){t.put("app/test.html",'<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Collapsible Tree Example</title><style>\n\n	.node circle {\n	  fill: #fff;\n	  stroke: steelblue;\n	  stroke-width: 3px;\n	}\n\n	.node text { font: 12px sans-serif; }\n\n	.link {\n	  fill: none;\n	  stroke: #ccc;\n	  stroke-width: 2px;\n	}\n	\n    </style></head><body><script src="http://d3js.org/d3.v3.min.js"></script><script>\n\nvar treeData = [\n  {\n    "name": "Top Level",\n    "parent": "null",\n    "children": [\n      {\n        "name": "Level 2: A",\n        "parent": "Top Level",\n        "children": [\n          {\n            "name": "Son of A",\n            "parent": "Level 2: A"\n          },\n          {\n            "name": "Daughter of A",\n            "parent": "Level 2: A"\n          }\n        ]\n      },\n      {\n        "name": "Level 2: B",\n        "parent": "Top Level"\n      }\n    ]\n  }\n];\n\n// ************** Generate the tree diagram	 *****************\nvar margin = {top: 40, right: 120, bottom: 20, left: 120},\n	width = 960 - margin.right - margin.left,\n	height = 500 - margin.top - margin.bottom;\n	\nvar i = 0;\n\nvar tree = d3.layout.tree()\n	.size([height, width]);\n\nvar diagonal = d3.svg.diagonal()\n	.projection(function(d) { return [d.x, d.y]; });\n\nvar svg = d3.select("body").append("svg")\n	.attr("width", width + margin.right + margin.left)\n	.attr("height", height + margin.top + margin.bottom)\n  .append("g")\n	.attr("transform", "translate(" + margin.left + "," + margin.top + ")");\n\nroot = treeData[0];\n  \nupdate(root);\n\nfunction update(source) {\n\n  // Compute the new tree layout.\n  var nodes = tree.nodes(root).reverse(),\n	  links = tree.links(nodes);\n\n  // Normalize for fixed-depth.\n  nodes.forEach(function(d) { d.y = d.depth * 100; });\n\n  // Declare the nodes…\n  var node = svg.selectAll("g.node")\n	  .data(nodes, function(d) { return d.id || (d.id = ++i); });\n\n  // Enter the nodes.\n  var nodeEnter = node.enter().append("g")\n	  .attr("class", "node")\n	  .attr("transform", function(d) { \n		  return "translate(" + d.x + "," + d.y + ")"; });\n\n  nodeEnter.append("circle")\n	  .attr("r", 10)\n	  .style("fill", "#fff");\n\n  nodeEnter.append("text")\n	  .attr("y", function(d) { \n		  return d.children || d._children ? -18 : 18; })\n	  .attr("dy", ".35em")\n	  .attr("text-anchor", "middle")\n	  .text(function(d) { return d.name; })\n	  .style("fill-opacity", 1);\n\n  // Declare the links…\n  var link = svg.selectAll("path.link")\n	  .data(links, function(d) { return d.target.id; });\n\n  // Enter the links.\n  link.enter().insert("path", "g")\n	  .attr("class", "link")\n	  .attr("d", diagonal);\n\n}\n\n</script></body></html>'),t.put("app/components/compare/compare.html",'<section class="compare-v50"><os-plsr></os-plsr></section><section class="compare-v50"><os-pca></os-pca></section>'),t.put("app/components/datasource/datasource.html",'<section class="datasource container-fluid"><div class="row"><div class="col-sm-8 col-md-6"><h1>Data Sources</h1><p>Oncoscape has analyzed and curated the following datasets hosted by The Cancer Genome Atlas (TCGA). Raw data sets for the current organ sites including all others can be found at <a href="https://tcga-data.nci.nih.gov/tcga/">TCGA Data Portal</a></p></div></div><div class="row"><ul><li ng-repeat="dataset in vm.datasets" class="col-xs-12 col-sm-6 col-lg-4"><img class="datasource-img" ng-src="/assets/images/datasets/{{dataset}}.png"><h2 class="datasource-lbl">{{dataset}}</h2><nobr><a href="" ng-click="vm.explore(\'tools\',dataset)">Explore</a> &nbsp;|&nbsp; <a href="" ng-click="vm.explore(\'metadata\',dataset)">Learn More</a></nobr></li></ul></div></section>'),t.put("app/components/filters/filters.html",'<section id="filter-dropdown" class="filters container"><div class="filters-tree" id="filters-chart"><div class="row"><div class="col-sm-8"><h2 style="color:#FFF;">My Cohorts</h2><p></p></div><div class="col-sm-4" style="text-align: right;margin-top:30px;"><div class="btn-group" role="group" aria-label="Basic example"><button type="button" class="btn btn-primary" ng-click="vm.setDisplay(\'Cluster\')">View 1</button> <button type="button" class="btn btn-primary" ng-click="vm.setDisplay(\'Tree\')">View 2</button></div></div></div></div></section>'),t.put("app/components/footer/footer.html",'<footer class="footer container"><div class="row"><div class="col-xs-12 col-sm-6"><img class="footer-logo" src="/assets/images/logo-fred-hutchinson-cancer-research-center.png" alt="Fred Hutchinson Cancer Research Center"> <img class="footer-logo" src="/assets/images/logo-university-of-washington-medicine.png" alt="UW Medicine"> <img class="footer-logo" src="/assets/images/logo-seattle-cancer-care-alliance.png" alt="Seattle Cancer Care Alliance"></div><div class="col-xm-12 col-sm-6 text-right"><a href="https://www.facebook.com/STTRCancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-facebook-out.png" alt="Facebook"></a> <a href="https://twitter.com/sttrcancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-twitter-out.png" alt="Twitter"></a> <a href="https://plus.google.com/+fredhutch/videos" target="_blank"><img class="footer-icon" src="/assets/images/sttr-youtube-out.png" alt="YouTube"></a> <a href="http://instagram.com/FredHutch" target="_blank"><img class="footer-icon" src="/assets/images/sttr-instagram-out.png" alt="Instagram"></a> <a href="http://www.linkedin.com/company/fred-hutchinson-cancer-research-center/careers?trk=top_nav_careers" target="_blank"><img class="footer-icon" src="/assets/images/sttr-linkedin-out.png" alt="LinkedIn"></a> <a href="https://plus.google.com/116048577052683099154/posts" target="_blank"><img class="footer-icon" src="/assets/images/sttr-google-out.png" alt="Google+"></a></div></div></footer>'),t.put("app/components/header/header.html",'<nav class="navbar navbar-inverse navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#"><img alt="Brand" src="/assets/images/logo.png" style="max-height:50px;"></a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" ng-if="vm.showMenu"><ul class="nav navbar-nav navbar-right"><li><a href="#datasource"><span class="glyphicon glyphicon-th"></span>Data Sources</a></li><li><a href="" ng-click="vm.toolsClick()"><span class="glyphicon glyphicon-signal"></span>Analysis Tools</a></li><li><a href="" ng-click="vm.cohortClick()"><span class="glyphicon glyphicon-equalizer"></span>My Cohorts</a></li><li><a href="#help"><span class="glyphicon glyphicon-question-sign"></span>Help</a></li><li><a href="" ng-click="vm.logoutClick()"><span class="glyphicon glyphicon-user"></span>Logout</a></li></ul></div></div></nav><a href="https://github.com/FredHutch/Oncoscape/labels/help%20wanted" class="github"><div class="logo"><svg aria-hidden="true" class="octicon octicon-mark-github" height="28" role="img" version="1.1" viewbox="0 0 16 16" width="28"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"></path></svg></div></a>'),t.put("app/components/help/help.html",'<section class="tools container"><div class="row"><div class="col-sm-8 col-md-6"><br><br><br></div></div><div class="row"><div class="col-xs-12 col-md-7"><h2 style="margin:0px;margin-bottom: 20px;">Now Playing &mdash; Lorum Ipsum</h2><div style="background-color:#000;text-align: center;"><video width="640" height="360" controls="" style="background-color: #000;max-width: 100%;"></video></div><h2>Video Title</h2><p>Transcription At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat</p></div><div class="col-xs-12 col-md-5" style="padding-left: 40px;"><h2 style="margin:0px;">Oncoscape Videos</h2><ul><li ng-repeat="video in vm.videos" style="clear: both;"><div style="width:30%;height:90px;background-color:#EEE;display:inline-block;float:left;margin-bottom: 20px;text-align: center;cursor: pointer;"><span class="glyphicon glyphicon-play-circle" style="font-size: 30px;padding-top:30px; color:#FFF"></span></div><div style="width:69%;display: inline-block;float:left;padding-left: 10px;"><h3 class="tools-lbl" style="margin:0px;">{{video.name}}</h3><p>{{video.desc}}</p><a href="" ng-click="vm.explore(tool.route, vm.datasource)">Watch Video</a></div></li></ul></div></div></section>'),
t.put("app/components/history/history.html",'<section class="history container container-filters"><h2>Patient History &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-xs-3" style="padding-right:20px;"><label>Age At diagnosis</label><div range-slider="" min="vm.diagnosisMinValue" model-min="vm.diagnosisMin" max="vm.diagnosisMaxValue" model-max="vm.diagnosisMax" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMin" max="vm.survivalMaxValue" model-max="vm.survivalMax" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-3" style="padding-right:20px"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width: 100%;" ng-model="vm.search"></div><div class="col-xs-3"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name" style="height:29px;" ng-model="vm.cohort"> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="height:29px;" ng-click="vm.createCohort()">Go!</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section class="history container" style="padding-top:20px;"><table id="history-datatable" class="table table-striped table-bordered" cellspacing="0"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></section>'),t.put("app/components/landing/landing.html",'<div class="landing container"><div class="row" style="padding-top:20px;"><h2>Bridging Cancer Research and Clinical Care</h2></div><div class="row" style="padding-top:20px;"><div class="col-sm-8"><p>Oncoscape is developed at the Fred Hutchinson Cancer Research Center under the auspices of the Solid Tumor Translational Research initiative. Oncoscape is a web-based, menu-driven analysis and visualization platform for large-scale, heterogeneous clinical and molecular patient timeline data as exemplified by the Fred Hutch HIDRA database. Oncoscape was conceived, and is managed, by a Steering Committee comprising: <a href="https://www.fredhutch.org/en/labs/profiles/holland-eric.html">Eric Holland</a>, <a href="http://www.sttrcancer.org/en/contact-us/horse-grant-bio.html">Desert Horse-Grant</a>, <a href="https://www.fredhutch.org/en/diseases/featured-researchers/fearn-paul.html">Paul Fearn</a>, <a href="https://www.linkedin.com/in/paul-shannon-a9478166">Paul Shannon</a>, <a href="https://www.linkedin.com/in/lisa-mcferrin-9758b029">Lisa McFerrin</a>, and <a href="https://www.linkedin.com/in/hbolouri">Hamid Bolouri</a>.</p><p class="">Through its easy point-and-click browser interface, Oncoscape will become an essential tool for doctors and researchers interested in:</p><ul class=""><li>Comparing patients or populations across an array of features, like genetic alterations (CNV, IHC, sequencing, expression) or clinical elements (treatment regimens, diagnostics, outcomes)</li><li>Defining cohorts based on selected traits – identifying “patients like me”</li><li>Aligning patient histories according to timeline events: diagnosis, treatment, progression, survival</li><li>Performing powerful and integrated statistical analysis: Principle Component Analysis, Partial least squares regression, Kaplan-Meier curves, enrichment scores</li><li>Creating high quality visualizations of molecular/clinical data</li></ul><p class="">By providing a portal equipped with rich data, powerful statistics and a simple interface, Oncoscape not only empowers users to quickly answer questions themselves but also expedites the process of discovering novel patterns and relationships. This can lead to numerous possible findings, including optimized drug therapies for individual patients, identification of novel regulatory pathways, or even the need to reassess adherence strategies.</p></div><div class="col-sm-4"><os-login></os-login></div></div></div>'),t.put("app/components/loader/loader.html",'<div class="loader-modal"><div class="loader"><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__ball"></div></div></div>'),t.put("app/components/login/login.html",'<form class="login"><h3 class="login-header">Login</h3><div class="login-body"><div class="alert alert-danger" role="alert" ng-show="vm.hasError"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> <span class="sr-only">Error:</span> Invalid Credentials</div><fieldset class="form-group"><span for="domain" class="small">Affiliation</span><select id="domain" class="form-control" ng-options="option.name for option in vm.domains track by option.name" ng-model="vm.user.domain"></select></fieldset><fieldset class="form-group"><span class="form-control-label small" for="username">Username</span> <input id="username" class="form-control input-sm" type="text" placeholder="Username" ng-model="vm.user.name"></fieldset><fieldset class="form-group" ng-show="vm.user.domain.name!=\'Guest\'"><span class="form-control-label small" for="password">Password</span> <input id="password" class="form-control" type="password" placeholder="Password" ng-model="vm.user.password"></fieldset><button class="btn btn-default" ng-click="vm.login()">Login</button></div></form>'),t.put("app/components/markers/markers.html",'<section class="markers container-fluid container-filters"><h2>Markers + Patients &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-xs-2" style="padding-right:20px;"><label>Edge Options</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optInteractiveMode.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optInteractiveModes" ng-click="vm.optInteractiveMode=item">{{item.name}}</li></ul></div></div><div class="col-xs-2" style="padding-right:20px;"><label>Layout Options</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optPatientLayout.name}} <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li style="padding:5px;font-weight:600;">Patient Distribution</li><li ng-repeat="item in vm.optPatientLayouts" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="item.fn(item)">{{item.name}}</label></li></ul></div></div><div class="col-xs-2" style="padding-right:20px;"><label>Color Options</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Patients + Edges <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li style="padding:5px;font-weight:600;">Patients Colors</li><li ng-repeat="item in vm.optNodeColors" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="item.fn(item);"> {{item.name}}</label></li><li><hr></li><li style="padding:5px;font-weight:600;">Edge Colors</li><li ng-repeat="item in vm.optEdgeColors"><button class="btn btn-default filter-button {{item.class}}" ng-click="item.fn(item); $event.stopPropagation();">{{item.name}} ({{item.state}})</button></li></ul></div></div><div class="col-xs-2" style="padding-right:20px;"><label>Gene Search</label> <input type="text" class="ngrs-range-slider" style="width:100%" ng-model="vm.searchGene"></div><div class="col-xs-2" style="padding-right:20px;"><label>Patient Search</label> <input type="text" class="ngrs-range-slider" style="width:100%" ng-model="vm.searchPatient"></div><div class="col-xs-2"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name" style="height:29px;" ng-model="vm.cohort"> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="height:29px;" ng-click="vm.createCohort()">Go!</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><div class="legend"><ul><li class="legend-section">Node Colors</li><li ng-repeat="item in vm.legandNodes"><div class="circle {{item.color}}"></div>{{item.name}}</li><li><div class="circle gene"></div>Gene</li><li><hr></li><li class="legend-section">Edge Colors</li><li ng-repeat="item in vm.optEdgeColors"><button class="btn btn-default filter-button {{item.class}}" ng-click="item.fn(item); $event.stopPropagation();" style="font-weight: 300">{{item.name}} ({{item.state}})</button></li></ul></div><div class="legend legend-right" ng-show="vm.patient"><ul><li class="legend-section">Patient Information</li><li>PID: {{vm.patient[0]}}</li><li>GENDER: {{vm.patient[2]}}</li><li>STATUS: {{vm.patient[6]}}</li><li>DIAGNOSED: {{vm.patient[4]}} years old</li><li>SURVIVED: {{vm.patient[3]}} years</li><li>PROGRESSION: {{vm.patient[5]}}</li><li><hr></li><li class="legend-section">Genes ({{vm.patientChromosomes.length}})</li><li><span ng-repeat="item in vm.patientChromosomes">{{item}} |</span></li></ul></div><section id="markers-chart" class="markers-chart"></section>'),t.put("app/components/metadata/metadata.html",'<section class="metadata container container-filters"><h2>Metadata &mdash; {{vm.dataset}}</h2><div class="row"><div class="col-xs-9" style="padding-right: 60px;">{{vm.dataset}} raw data was provided by <a href="http://cancergenome.nih.gov/">The Cancer Genome Atlas</a>. Processing of data was conducted by the <a href="http://www.sttrcancer.org/en.html">Solid Tumor Translational Research Organization</a> in conjuntion with the <a href="http://www.fhcrc.org">Fred Hutchinson Cancer Research Center</a>, <a href="http://www.uwmedicine.org/">UW Medicine</a> and <a href="http://www.scca.org">The Seattle Cancer Care Alliance</a>.</div><div class="col-xs-3" style="margin: 10px 0 30px;"><label>Search</label> <input type="text" class="ngrs-range-slider ngrs-range-slider-no-pad" style="width:100%" ng-model="vm.search"></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section class="metadata container" style="padding-top:20px;"><table id="metadata-datatable" class="table table-striped table-bordered" cellspacing="0"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></section>'),t.put("app/components/pathways/pathways.html",'<section class="pathways container container-filters"><h2>Pathways &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-xs-3"><label>Search</label><div class="input-group"><input type="text" class="ngrs-range-slider" style="width:100%" ng-model="vm.search"></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="gbm-chart" class="pathways-chart"></section><div class="modal fade pathways" id="gbm-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div><section class="legend"><ul><li class="legend-section">Legend</li><li style="border:0px solid green; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Activation</li><li style="border:0px solid red; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Inhibition</li><li style="border:0px solid #38347B; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Modification</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Genes</li></ul><ul class="legand" ng-if="vm.tip"><li><hr></li><li class="legend-section">Click To</li><li>View {{vm.tip}}</li></ul></section>'),t.put("app/components/pca/pca.html",'<section class="pca container container-filters"><h2>Principal Component Analysis &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-sm-3" style="padding-right:20px;"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div><div class="col-xs-3"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name" style="height:29px;" ng-model="vm.cohort"> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="height:29px;" ng-click="vm.createCohort()">Go!</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="pca-chart" class="pca container-fluid" style="margin:50px 100px;height: 60vh"></section><section class="legend"><ul><li class="legend-section">Legend</li><li><span class="circle" style="background-color:black;width:10px;height: 10px;margin-right:10px;"></span>Patients</li><li><hr></li><li class="legend-section">Proportion of Variance</li><li>PC1: {{vm.pc1*100}}%</li><li>PC2: {{vm.pc2*100}}%</li></ul></section>'),t.put("app/components/plsr/plsr.html",'<section class="plsr container container-filters"><h2>Partial Least Squares Regression &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-xs-3" style="padding-right:20px;"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Age At Diagnosis</label><div range-slider="" min="vm.deathMinValue" model-min="vm.deathMinFilter" max="vm.deathMaxValue" model-max="vm.deathMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMinFilter" max="vm.survivalMaxValue" model-max="vm.survivalMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="plsr-chart" class="plsr container-fluid container-content"></section><div class="modal fade pathways" id="plsr-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div><section class="legend"><ul><li class="legend-section">Legend</li><li style="border:0px solid #1396de; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Age At Diagnosis</li><li style="border:0px solid #38347b; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Survival</li><li><span class="circle" style="background-color:black;width:10px;height: 10px;margin-right:10px;"></span>Genes</li></ul></section>'),t.put("app/components/survival/survival.html",'<section class="survival container container-filters"><h2>Patient Survival &mdash; {{vm.datasource}} <span ng-if="vm.datasource!=vm.filter.name">{{vm.filter.name}}</span></h2></section><section class="survival container" style="padding-top:20px;text-align: center;"><img id="survival-img" style="max-width: 75%; height: auto; margin:auto;"></section>'),t.put("app/components/timelines/timelines.html",'<section class="timelines container container-filters"><h2>Timelines &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-xs-3" style="padding-right:20px;"><label>Event Visibility</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Select Events <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.events" ng-click="vm.eventClick(item)" style="border:0px solid; border-left-width: 5px;" ng-style="{\'border-color\':item.color}">{{item.name}} ({{item.selected}})</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Event Alignment</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.align.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.events" ng-click="vm.align = item">{{item.name}}</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Feature To Compare</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.feature.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.features" ng-click="vm.feature=item">{{item.name}}</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Sort Patients By</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.sort.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.features" ng-click="vm.sort = item">{{item.name}}</li></ul></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section class="timelines container-fluid container-content" style="position:relative;padding-top:25px;"><h5 class="timelines-lbl-feature" style="padding-left:50px;position:absolute;top:20px;"><span class="glyphicon glyphicon-align-left" style="color:rgb(89, 165, 251);"></span> {{vm.feature.name}}</h5><h5 style="padding-left:50px;position:absolute; bottom:50px;" class="timelines-lbl-events"><ul class="timeline-events"><li ng-repeat="item in vm.events" ng-click="vm.eventClick(item)" ng-style="item.selected && {\'border-color\':item.color}">{{item.name}}</li></ul></h5><div id="timelines-chart" style="height:1200px;"></div></section>'),t.put("app/components/tools/tools.html",'<section class="tools container-fluid"><div class="row"><div class="col-sm-8 col-md-6"><h1>Analysis Tools</h1></div></div><div class="row"><ul><li ng-repeat="tool in vm.tools" class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><img class="tools-img" ng-src="/assets/images/datasets/{{tool.img}}"><div class="tools-copy"><h2 class="tools-lbl">{{tool.name}}</h2><a href="" ng-click="vm.explore(tool.route, vm.datasource)">Explore</a></div></li></ul></div></section>')}]);
//# sourceMappingURL=../maps/scripts/app-ee5835eeff.js.map
