!function(){"use strict";angular.module("oncoscape",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","ui-rangeSlider","toastr"])}(),function(){"use strict";function e(){function e(e,t,n){var a=this;a.datasource=n.datasource||"DEMOdz",a.tools=[{name:"Markers + Patients",route:"markers",img:"markers.png",copy:"Link copy number variation and mutation data to patients."},{name:"Timelines",route:"timelines",img:"timelines.png",copy:""},{name:"Pathways",route:"pathways",img:"pathways.png",copy:"Map patient specific expression levels on a hand curated network of genes."},{name:"PLSR",route:"plsr",img:"plsr.png",copy:"Use linear regression to correlate genes with clinical features using RNA expression."},{name:"PCA",route:"pca",img:"pca.png",copy:"Two dimensional view of per sample expression data."},{name:"Survival",route:"survival",img:"survival.png",copy:"Compare survival rates of selected patients against the remaining population in a Kaplan Meier plot."},{name:"Patient History",route:"history",img:"history.png",copy:""},{name:"MetaData",route:"metadata",img:"metadata.png",copy:""}],a.explore=function(e,n){t.go(e,{datasource:n})}}e.$inject=["osApi","$state","$stateParams"];var t={restrict:"E",templateUrl:"app/components/tools/tools.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osTools",e)}(),function(){"use strict";function e(){function e(e,t,n,a,o,i,r){function s(){var e=u.filter(d,function(e){return e.id});l.draw(e,c.feature,c.events,c.sort,c.align)}var l=function(){var e=angular.element("#timelines-chart"),t=e.width()-100,n=e.height(),a=r.select("#timelines-chart").append("svg").attr("width","100%").attr("height",n),o=[0,t],s={"shape-rendering":"crispEdges",stroke:"none"};a.append("g").style(s).attr({"class":"axisFeature axis",transform:"translate(50, 49)"}).call(r.svg.axis().scale(r.scale.linear().domain([0,1]).range([0,t])).orient("top")),a.append("g").style(s).attr({"class":"axisTimeline axis",transform:"translate(50, 0)"}).call(r.svg.axis().scale(r.scale.linear().domain([0,1]).range([0,t])).orient("bottom"));var l=a.append("g"),c=a.append("g"),d=a.append("g"),u=function(e,t,a,o,i){var r=e.filter(function(e){return e.hasOwnProperty("__"+this.name)},i);r=r.sort(function(e,t){return e.calcEvents[o.index].value>t.calcEvents[o.index].value?-1:1},o),r.forEach(function(e){e.dateEvents.forEach(function(e){e.startValue=e.start+this,e.endValue=null!=e.end?e.end+this:null},-e["__"+this.name].start)},i);var s=Math.floor((n-100)/r.length);1>s&&(s=1),s>20&&(s=20),m(r,t,a,o,i,s),g(r,t,a,o,i,s),h(r,t,a,o,i,s)},g=function(e,t,n,i,s,l){var d;if(-1==t.index)return d=a.selectAll("rect.feature").data([]),void d.exit().remove();var u=[0,r.max(e.map(function(e){return e.calcEvents[this].value},t.index))],p=r.scale.linear().domain(u).range(o);a.transition().duration(750).select("g.axisFeature").call(r.svg.axis().scale(p).orient("top")),d=c.selectAll("rect.feature").data(e),d.transition().duration(300).attr({"class":"feature",x:0,width:function(e){return p(e.calcEvents[t.index].value)},height:1==l?1:l-1}),d.enter().append("rect").style({fill:"#9AD6F1"}).attr({transform:function(e,t){return"translate(50,"+(t*l+50)+")"},"class":"feature",x:0,width:function(e){return p(e.calcEvents[t.index].value)},height:1==l?1:l-1}),d.exit().remove()},m=function(e,n,a,o,i,r){angular.element(".timelines-lbl-events").css({top:r*e.length+100});var s=l.selectAll("rect.lines").data(e);s.enter().append("rect").style({fill:"#EFEFEF"}).attr({width:t,height:r-1,"class":"lines",transform:function(e,t){return"translate(50,"+(t*r+50)+")"}}),s.exit().remove()},h=function(e,n,s,l,c,u){var g=s.filter(function(e){return e.selected}),m=function(e){return e.filter(function(e){for(var t=0;t<g.length;t++)if(g[t].name==e.name)return!0;return!1})},h=[e.reduce(function(e,t){return Math.min(e,m(t.dateEvents).reduce(function(e,t){return Math.min(t.startValue,e)},1/0))},1/0),e.reduce(function(e,t){return Math.max(e,m(t.dateEvents).reduce(function(e,t){var n=null==t.endValue?t.startValue:t.endValue;return Math.max(n,e)},-(1/0)))},-(1/0))],f=r.scale.linear().domain(h).range(o),v=a.transition().duration(300).select("g.axisTimeline");v.attr({transform:"translate(50,"+(u*e.length+49)+")"}),v.call(r.svg.axis().scale(f).orient("bottom").tickFormat(function(e){return i.unix(e/1e3).format("MM/DD/YYYY")}));var y=d.selectAll("g.timeline").data(e);y.enter().append("g").attr({width:t,height:u-1,"class":"timeline",transform:function(e,t){return"translate(50,"+(t*u+50)+")"}}),y.exit().remove();var b=y.selectAll("rect.timeline").data(function(e){return m(e.dateEvents)});b.enter().append("rect").style({opacity:1,fill:p}).attr({"class":"timeline",height:u,width:function(e){return null==e.endValue?3:f(e.endValue)-f(e.startValue)},x:function(e){return Math.round(f(e.startValue))}}),b.transition().style({opacity:1,fill:p}).attr({width:function(e){return null==e.endValue?3:f(e.endValue)-f(e.startValue)},x:function(e){return Math.round(f(e.startValue))}}),b.exit().remove()};return{draw:u}}(),c=this;c.datasource=a.datasource||"DEMOdz",c.features,c.feature,c.events,c.sorts,c.sort,c.align;var d,u=e.getPatientFilterApi();u.init(c.datasource),u.onSelect.add(s),c.eventClick=function(e){e.selected=!e.selected,s()},c.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},e.setBusy(!0)("Loading Dataset"),e.setDataset(c.datasource).then(function(){e.getTimelines().then(function(t){d=h(t.payload.pts),c.sorts=m(d),c.sort=c.sorts[0];var a=m(d);a.unshift({index:-1,name:"None"}),c.features=a,c.feature=c.features[0],c.events=g(t.payload.eventTypes),c.align=c.events[0],n.$watchGroup(["vm.feature","vm.sort","vm.align"],s),e.setBusy(!1)})});var p=function(e){var t=e.name,n="Birth"===t?"DARKBLUE":"Diagnosis"===t?"DARKGREEN":"Pathology"===t?"DARKMAGENTA":"Progression"===t?"DARKORANGE":"Absent"===t?"DARKSLATEBLUE":"Status"===t?"DEEPPINK":"Radiation"===t?"LIMEGREEN":"Procedure"===t?"GOLD":"Encounter"===t?"MIDNIGHTBLUE":"Drug"===t?"MEDIUMSEAGREEN":"black";return n},g=function(e){return Object.keys(e).map(function(e){var t={name:e,selected:!0};return t.color=p(t),t})},m=function(e){return e[0].calcEvents.map(function(e,t){return{name:e.name,index:t}})},h=function(e){e=Object.keys(e).map(function(t){var n=e[t];return n.id=t,n});for(var t=0;t<e.length;t++){var n=e[t],a=i,o="YYYY-MM-DD",r=n.dateEvents.filter(function(e){return"single"===e.eventOrder}).map(function(e){return{start:1e3*a(e.date,o).unix(),end:null,name:e.name}}),s=n.dateEvents.filter(function(e){return"end"===e.eventOrder}).map(function(e){return{end:1e3*a(e.date,o).unix(),id:e.eventID}}),l=n.dateEvents.filter(function(e){return"start"===e.eventOrder}).map(function(e){return{start:1e3*a(e.date,o).unix(),name:e.name,id:e.eventID}});l.forEach(function(e){e.end=s.filter(function(t){return t.id==e.id})[0].end}),n.dateEvents=l.length>0?l.concat(r):r,n.dateEvents.forEach(function(e){n["__"+e.name]=e})}return e}}e.$inject=["osApi","$state","$scope","$stateParams","$window","moment","d3"];var t={restrict:"E",templateUrl:"app/components/timelines/timelines.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osTimelines",e)}(),function(){"use strict";function e(){function e(e,t,n,a,o){function i(){e.setBusy(!0);var t=l.filter(s,function(e){return e});e.getCalculatedSurvivalCurves(t,"").then(function(t){angular.element("#survival-img").attr("src",t.payload),e.setBusy(!1)})}var r=this;r.datasource=o.datasource||"DEMOdz";var s,l=e.getPatientFilterApi();l.init(r.datasource),l.onSelect.add(i),e.setBusy(!0),e.setDataset(r.datasource).then(function(){e.getPatientHistoryTable(r.datasource).then(function(e){s=e.payload.tbl.map(function(e){return e[0]}),i()})})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/survival/survival.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osSurvival",e)}(),function(){"use strict";function e(){function e(e,t,n,a,o,i,r){var s=this;s.datasource=n.datasource||"DEMOdz",s.deathMinFilter=s.deathMinValue=45,s.deathMaxFilter=s.deathMaxValue=66,s.survivalMinFilter=s.survivalMinValue=3,s.survivalMaxFilter=s.survivalMaxValue=7,s.geneSets=[],s.geneSet=null,s.frame,s.tip=null,s.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},s.update=function(){d(!0)};var l=angular.element("#plsr-chart"),c=function(){function e(e,t,l){a&&a.remove(),n&&n.remove();var p=-1*e;d=i.scale.linear().domain([p,e]).range([0,g]),u=i.scale.linear().domain([p,e]).range([m,0]),c=h.selectAll("text").data(t).enter().append("text").attr("class","text").attr("x",function(e){return d(e[0])}).attr("y",function(e){return u(e[1])}).text(function(e){return e.name}).attr("text-anchor",function(e){var t=e[0]>0?"start":"end";return t}).style("fill","black"),n=h.selectAll("line").data(t).enter().append("line").attr("class","line").style("stroke-width",3).style("stroke",function(e){return e.name.indexOf("Age")?"#1396de":"#38347b"}).attr("x1",d(0)).attr("y1",u(0)).attr("x2",function(e){return d(e[0])}).attr("y2",function(e){return u(e[1])}),a=h.selectAll("circle").data(l).enter().append("circle").attr("cx",function(e){return d(e[0])}).attr("cy",function(e){return u(e[1])}).attr("r",function(){return 3}).style("fill","black").on("click",function(e){angular.element("#plsr-webpage").modal();var t="http://www.genecards.org/cgi-bin/carddisp.pl?gene="+e.name;o.$apply(function(){s.frame=r.trustAsResourceUrl(t)})}).on("mouseover",function(e){var t=i.mouse(this);f.text(e.name).style("top",t[1]+160+"px").style("left",t[0]+10+"px").style("visibility","visible")}).on("mousemove",function(){var e=i.mouse(this);f.style("top",e[1]+160+"px").style("left",e[0]+10+"px")}).on("mouseout",function(){return f.style("visibility","hidden")})}function t(e,t,o){c.data(t).transition().duration(900).attr("x",function(e){return d(e[0])}).attr("y",function(e){return u(e[1])}),n.data(t).transition().duration(900).attr("x1",d(0)).attr("y1",u(0)).attr("x2",function(e){return d(e[0])}).attr("y2",function(e){return u(e[1])}),a.data(o).transition().duration(900).each("start",function(){i.select(this)}).delay(function(e,t){return t/o.length*500}).attr("cx",function(e){return d(e[0])}).attr("cy",function(e){return u(e[1])}).each("end",function(){i.select(this).transition().duration(500).style("fill","black").attr("r",3)})}var n,a,c,d,u,p={top:20,right:20,bottom:30,left:40},g=l.width()-p.left-p.right,m=l.height()-p.top-p.bottom,h=i.select("#plsr-chart").append("svg").attr("id","chart").attr("width",g).attr("height",m),f=h.append("div").style("position","absolute").style("z-index","10").style("visibility","hidden");return{create:e,update:t}}("#plsr-chart");e.setBusy(!0)("Loading Dataset"),e.setDataset(s.datasource).then(function(t){var n=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});n=n[n.length-1].replace(".RData",""),e.setBusyMessage("Creating PLSR Matrix"),e.getPLSR(s.datasource,n).then(function(){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(t){s.geneSets=t.payload,s.geneSet=s.geneSets[0],e.setBusyMessage("Loading Patients"),e.getSummarizedPLSRPatientAttributes().then(function(e){var t=e.payload;s.deathMinValue=Math.floor(t.AgeDx[0]/365.24),s.deathMaxValue=Math.floor(t.AgeDx[4]/365.24),s.survivalMinValue=Math.floor(t.Survival[0]/365.24),s.survivalMaxValue=Math.floor(t.Survival[4]/365.24),o.$watch("vm.geneSet",function(){d(!1)})})})})});var d=function(t){e.setBusyMessage("Calculating PLSR");var n=[{name:"Survival",low:365.24*Number(s.survivalMinFilter),high:365.24*Number(s.survivalMaxFilter)},{name:"AgeDx",low:365.24*Number(s.deathMinFilter),high:365.24*Number(s.deathMaxFilter)}];e.getCalculatedPLSR(s.geneSet,n).then(function(n){e.setBusyMessage("Rendering PLSR");var a=n.payload,o=a.loadings.map(function(e,t){return e.name=a.loadingNames[t],e}),i=a.vectors.map(function(e,t){return e.name=a.vectorNames[t],e}),r=1.2*a.maxValue;t?c.update(r,i,o):c.create(r,i,o),e.setBusy(!1)})}}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3","$sce"];var t={restrict:"E",templateUrl:"app/components/plsr/plsr.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPlsr",e)}(),function(){"use strict";function e(){function e(e,t,n,a,o,i){function r(){var e,t,n=l,a=d.width(),o=d.height();e=Math.abs(i.max(n,function(e){return+e[0]})),t=Math.abs(i.min(n,function(e){return+e[0]}));var r=1.2*(e>t?e:t);e=Math.abs(i.max(n,function(e){return+e[1]})),t=Math.abs(i.min(n,function(e){return+e[1]}));var s=1.2*(e>t?e:t),h=i.scale.linear().domain([-r,r]).range([0,a]),f=i.scale.linear().domain([-s,s]).range([o,0]),v=i.svg.axis().scale(h).orient("top").ticks(5),y=i.svg.axis().scale(f).orient("left").ticks(5),b=i.svg.brush().x(h).y(f).on("brushend",function(){var e=b.extent();u.selectAll("circle").classed("pca-node-selected",function(t){return t[0]>e[0][0]&&t[0]<e[1][0]&&t[1]>e[0][1]&&t[1]<e[1][1]}),i.select(this).transition().duration(300).call(b.extent([[0,0],[0,0]]))});u.call(b),n=c.filter(l,function(e){return e.id}),u.attr("width",a).attr("height",o);var w=u.selectAll("circle").data(n,function(e){return e});w.enter().append("circle").attr("class","pca-node").attr("cx",.5*a).attr("cy",.5*o).attr("r",function(){return 3}).style("fill-opacity","0").on("mouseover",function(e){m.transition().duration(200).style("opacity",1),m.html(e.id).style("left",i.event.pageX+10+"px").style("top",i.event.pageY-5+"px")}).on("mouseout",function(){m.transition().duration(500).style("opacity",0)}).transition().duration(750).delay(function(e,t){return t/300*500}).attr("cx",function(e){return h(e[0])}).attr("cy",function(e){return f(e[1])}).style("fill-opacity",1),w.exit().transition().duration(600).delay(function(e,t){return t/300*500}).attr("cx",.5*a).attr("cy",.5*o).style("fill-opacity","0").remove(),p.attr("class","axis").attr("transform","translate(0, "+f(0)+")").call(v).append("text").text("PC1"),g.attr("class","axis").attr("transform","translate("+h(0)+", 0)").call(y).append("text").attr("y",10).attr("dy",".71em").text("PC2")}var s=this;s.datasource=n.datasource||"DEMOdz",s.geneSets=[],s.geneSet=null,s.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var l,c=e.getPatientFilterApi();c.init(s.datasource),c.onSelect.add(r),s.cohort,s.createCohort=function(){c.addFilter(s.cohort,i.selectAll(".pca-node-selected")[0].map(function(e){return e.__data__.id})),s.cohort=""};var d=angular.element("#pca-chart"),u=i.select("#pca-chart").append("svg").attr("id","chart"),p=u.append("g"),g=u.append("g"),m=i.select("body").append("div").attr("class","tooltip");e.setBusy(!0)("Loading Dataset"),e.setDataset(s.datasource).then(function(t){var n=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});n=n[n.length-1].replace(".RData",""),e.setBusyMessage("Creating PCA Matrix"),e.getPCA(s.datasource,n).then(function(){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(e){s.geneSets=e.payload,s.geneSet=s.geneSets[0],o.$watch("vm.geneSet",function(){h()})})})});var h=function(){e.setBusyMessage("Calculating PCA"),e.getCalculatedPCA(s.geneSet).then(function(t){e.setBusyMessage("Rendering PCA");var n=t.payload;s.pc1=t.payload["importance.PC1"],s.pc2=t.payload["importance.PC2"];var a=n.scores,o=n.ids;l=a.map(function(e,t){return e.id=o[t],e},n.ids),r(),e.setBusy(!1)})}}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3"];var t={restrict:"E",templateUrl:"app/components/pca/pca.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPca",e)}(),function(){"use strict";function e(){function e(e,t,n,a,o,i){function r(){var e="rgb(5, 108, 225)",t="red",n="rgb(56, 52,123)",a="green";return[{selector:"node",style:{content:"data(label)","text-valign":"center","text-halign":"center",shape:"ellipse",width:"60px",height:"50px",color:e,"background-color":"rgb(250, 250, 250)","border-width":"2px","border-color":e}},{selector:"edge",style:{width:"2px","line-color":e,"line-style":"solid"}},{selector:'node[nodeType="class"], node[nodeType="family"], node[nodeType="complex"]',style:{content:"","background-color":"white",shape:"roundrectangle"}},{selector:'edge[edgeType="activates"], edge[edgeType="indirectly activates"]',style:{"line-color":a,"target-arrow-shape":"triangle","target-arrow-color":a}},{selector:'edge[edgeType="inhibits"], edge[edgeType="ubiquitinylates"]',style:{"line-color":t,"target-arrow-shape":"tee","target-arrow-color":t}},{selector:'edge[edgeType="fusion"]',style:{"line-color":a}},{selector:'edge[edgeType="contains"]',style:{display:"none"}},{selector:'node[nodeType="process"]',style:{}},{selector:"node:selected",style:{"overlay-opacity":"0.5","overlay-color":"red"}},{selector:'node[nodeType="rtk"]',style:{content:"data(label)","background-color":"rgb(224, 209, 178)","border-color":"black","border-width":"0px","font-size":"48px",shape:"roundrectangle",width:"40px",height:"160px"}},{selector:'node[nodeType="kinase"]',style:{content:"data(label)","background-color":"rgb(255, 206, 194)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="dimer"]',style:{content:"","background-color":"rgb(234, 219, 188)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="loop"]',style:{content:"","background-color":"rgb(255, 255, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px","border-style":"dotted"}},{selector:'node[nodeType="gtpase"]',style:{content:"data(label)","background-color":"rgb(194, 194, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="adaptor"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="GEF"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="process"]',style:{content:"data(label)","background-color":"rgb(255, 255, 255)",shape:"roundrectangle",width:"100px",height:"40px","font-size":"24px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="TF"]',style:{content:"data(label)","background-color":"rgb(255, 206, 94)",shape:"diamond",width:"160px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="gene fusion"]',style:{content:"data(label)",shape:"roundrectangle","font-size":"24px","border-color":"red","border-width":"3px"}},{selector:"edge:selected",style:{"overlay-color":"grey","overlay-opacity":"0.3"}},{selector:'edge[edgeType="recruits"]',style:{width:"2px"}},{selector:'edge[edgeType="fusion"]',style:{"line-color":n}},{selector:'edge[edgeType="recruits"]',style:{"line-color":"red",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","target-arrow-color":"black"}},{selector:'edge[edgeType="cycles"]',style:{"line-color":"black",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","source-arrow-shape":"triangle","target-arrow-color":"green","source-arrow-color":"red"}},{selector:'edge[edgeType="associates"]',style:{"line-color":"black",width:"1px","line-style":"solid"}},{selector:'edge[edgeType="activation"]',style:{"line-color":"green",width:"1px"}},{selector:'edge[edgeType="inhibition"]',style:{"line-color":"red",width:"1px"}}]}var s,l=this;l.datasource=n.datasource||"DEMOdz",l.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},l.search="",l.frame,l.tip=null;var c,d=angular.element("#gbm-chart");a.$watch("vm.search",function(){if(!angular.isUndefined(c)){var e=l.search.toUpperCase(),t=e.length;c.nodes().map(function(n){0==t?n.unselect():n.attr("name").substr(0,t)===e?n.select():n.unselect()})}}),e.setBusy(!0),e.setDataset(l.datasource).then(function(){e.getPathway().then(function(t){s=angular.fromJson(t.payload),c=i({container:d,elements:s.elements,style:r(),layout:{name:"preset",fit:!0}}).on("click","node",function(e){angular.element("#gbm-webpage").modal();var t="http://www.genecards.org/cgi-bin/carddisp.pl?gene="+e.cyTarget.data().id;a.$apply(function(){l.frame=o.trustAsResourceUrl(t)})}).on("click","edge",function(e){angular.element("#gbm-webpage").modal();var t="http://www.ncbi.nlm.nih.gov/pubmed/?term="+e.cyTarget.data().pmid;a.$apply(function(){l.frame=o.trustAsResourceUrl(t)})}).on("mouseover","edge",function(e){a.$apply(function(){l.tip=e.cyTarget.data().source+" Extract"}),e.cyTarget.style({width:"4px"})}).on("mouseout","edge",function(e){a.$apply(function(){l.tip=null}),e.cyTarget.style({width:"2px"})}).on("mouseover","node",function(e){a.$apply(function(){l.tip=e.cyTarget.data().name+" Gene Card"})}).on("mouseout","node",function(){a.$apply(function(){l.tip=null})}),e.setBusy(!1)})})}e.$inject=["osApi","$state","$stateParams","$scope","$sce","cytoscape"];var t={restrict:"E",templateUrl:"app/components/pathways/pathways.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPathways",e)}(),function(){"use strict";function e(e,t,n,a,o){var i={},r=1,s=function(){return 9999==r&&(r=1),r++},l=new e(o.protocol()+"://"+o.host()+":"+("3002"==o.port()?80:o.port())+"/oncoscape","",{debug:!1,devel:!1});l.onmessage=function(e){var t=angular.fromJson(e.data);if(angular.isDefined(i[t.cmd])){var n=i[t.cmd];delete i[t.cmd],n.resolve(t)}else a.error("Unhandled message: %o",t)};var c=function(e){e.callback=s(),e.status="request",e.payload=e.payload||"";var t=n.defer();return i[e.callback]=t,0===l.readyState?l.onopen=function(){l.send(angular.toJson(e))}:l.send(angular.toJson(e)),t.promise.then(function(t){return e.response=t,t})};return{request:c}}e.$inject=["SockJS","$rootScope","$q","$log","$location"],angular.module("oncoscape").factory("osSocket",e)}(),function(){"use strict";function e(e,t,n){function a(){var e=new n.Signal,a=new n.Signal,o={name:"",password:"",domain:{name:"Guest"},authenticated:!1,token:null},i=[{name:"Guest"},{name:"FHCRC"},{name:"SCCA"}],r=function(){o.name="",o.password="",o.domain={name:"Guest"},o.authenticated=!1,o.token=null,a.dispatch()},s=function(n){if(o=n,"Guest"==n.domain.name)return o.authenticated=!0,o.token="Guest",void e.dispatch(o);var a={method:"POST",url:"/login/",data:{username:o.name,password:o.password,domain:o.domain.name}};return t(a).then(function(t){t.data.success?(o.authenticated=!0,o.token=t.data.token,e.dispatch(o)):(o.authenticated=!1,o.token=null)})};return{getDomains:function(){return i},getUser:function(){return o},login:s,logout:r,onLogin:e,onLogout:a}}function o(){return I}function i(e){return e?angular.element(".loader-modal").show():angular.element(".loader-modal").hide(),r}function r(){}function s(){angular.element("#filter-dropdown").slideToggle()}function l(){angular.element("#filter-dropdown").slideToggle()}function c(){angular.element("#filter-dropdown").slideToggle()}function d(t){return e.request({cmd:"specifyCurrentDataset",payload:t})}function u(){return e.request({cmd:"getDataSetNames"})}function p(t){return e.request({cmd:"getDataManifest",payload:t})}function g(t){return e.request({cmd:"getPatientHistoryTable",payload:{datasetName:t,durationFormat:"byYear"}})}function m(){}function h(){}function f(){return e.request({cmd:"getGeneSetNames"})}function v(){return e.request({cmd:"getSampleCategorizationNames"})}function y(t){return e.request({cmd:"getSampleCategorization",payload:t})}function b(t){return e.request({cmd:"getMarkersNetwork",payload:t})}function w(){}function x(t){return e.request({cmd:"getCanonicalizePatientIDsInDataset",payload:t})}function k(){}function C(){}function M(t,n){var a={dataPackage:t,matrixName:n};return e.request({cmd:"createPCA",payload:a})}function T(t){var n={genes:t};return e.request({cmd:"calculatePCA",payload:n})}function A(t,n){var a={dataPackage:t,matrixName:n};return e.request({cmd:"createPLSR",payload:a})}function P(t,n){var a={genes:t,factorCount:n.length,factors:n};return e.request({cmd:"calculatePLSR",payload:a})}function S(t){return t=t||["AgeDx","Survival"],e.request({cmd:"summarizePLSRPatientAttributes",payload:t})}function D(t,n){return e.request({cmd:"calculateSurvivalCurves",payload:{sampleIDs:t,title:n}})}function E(){return e.request({cmd:"createTimelines"})}function $(){}function F(){return e.request({cmd:"getModuleModificationDate",payload:"gbmPathways"})}function L(){return e.request({cmd:"getPathway",payload:"g.gbmPathways.json"})}function O(t,n){return e.request({cmd:"get_mRNA_data",payload:{entities:t,features:n}})}function N(t,n){return e.request({cmd:"get_cnv_data",payload:{entities:t,features:n}})}function z(t,n){return e.request({cmd:"get_mutation_data",payload:{entities:t,features:n}})}function G(){return q}function V(){function e(e){l!=e&&(l=e,c=angular.fromJson(localStorage.getItem(e)),c||(c={name:e,ids:"*"}),d=c)}function t(){}function a(e,t){var n={name:e,ids:t};d.hasOwnProperty("children")||(d.children=[]),d.children.push(n),d=n,p.dispatch(c),g.dispatch(d),localStorage.setItem(l,u(c))}function o(){return d}function i(e){d=e,g.dispatch(d)}function r(){return c}function s(e,t){return"*"==d.ids?e:e.filter(function(e){for(var n=0;n<d.ids.length;n++)if(t(e)==d.ids[n])return!0;return!1})}var l=null,c=null,d=null,u=function(e){var t="{";if(t+='"name":"'+e.name+'"',t+=',"ids":',t+="string"==typeof e.ids?'"*"':'["'+e.ids.join('","')+'"]',e.hasOwnProperty("children")){t+=',"children":[';for(var n=0;n<e.children.length;n++)n>0&&(t+=","),t+=u(e.children[n]);t+="]"}return t+="}"},p=new n.Signal,g=new n.Signal;return{init:e,filter:s,getActiveFilter:o,setActiveFilter:i,addFilter:a,delFilter:t,getFilterTree:r,onChange:p,onSelect:g}}var I=a(),q=V();return{getPatientFilterApi:G,getUserApi:o,showFilter:s,hideFilter:l,toggleFilter:c,setBusy:i,setBusyMessage:r,setDataset:d,getDataSetNames:u,getDataManifest:p,getPatientHistoryTable:g,getPatientHistoryDxAndSurvivalMinMax:m,getSampleDataFrame:h,getGeneSetNames:f,getSampleCategorizationNames:v,getSampleCategorization:y,getMarkersNetwork:b,getPathway:L,getDrugGeneInteractions:w,getCanonicalizePatientIDsInDataset:x,getGeneSetGenes:k,getOncoprintDataSelection:C,getPCA:M,getCalculatedPCA:T,getPLSR:A,getCalculatedPLSR:P,getSummarizedPLSRPatientAttributes:S,getCalculatedSurvivalCurves:D,getTimelines:E,getCalculatedTimelines:$,getMrnaData:O,getCnvData:N,getMutationData:z,getModuleModificationDate:F}}e.$inject=["osSocket","$http","signals"],angular.module("oncoscape").service("osApi",e)}(),function(){"use strict";function e(){function e(e,t,n,a,o){var i=this;i.dataset=o.datasource||"DEMOdz",i.colnames=[],i.rows=[],i.search="",i.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var r;e.setBusy(!0),e.getDataManifest(i.dataset).then(function(t){i.colnames=t.payload.colnames,i.rows=t.payload.mtx,n(function(){r=angular.element("#metadata-datatable").dataTable({paging:!1}),a.$watch("vm.search",function(){r.api().search(i.search).draw()}),e.setBusy(!1)},0,!1)})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/metadata/metadata.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osMetadata",e)}(),function(){"use strict";function e(){function e(e,t,n,a,o,i,r,s){function l(t){if(e.setBusy(!0),!angular.isUndefined(t)){angular.isDefined(m)&&m.restore();var n=d.nodes('node[nodeType="patient"]').filterFn(function(e){if("*"==this)return!1;for(var t=0;t<this.length;t++)if(e.data().id==this[t])return!1;return!0},t.ids);m=d.remove(n),e.setBusy(!1)}}var c=this;c.datasource=o.datasource||"DEMOdz",c.optInteractiveModes,c.optInteractiveMode,c.optPatientLayouts,c.optPatientLayout,c.optNodeColors,c.optNodeColor,c.optEdgeColors,c.legandNodes,c.legandPatient,c.legandChromosomes,c.frame,c.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},c.cohort,c.createCohort=function(){e.setBusy(!0);var t=d.$('node[nodeType="patient"]:selected'),n=t.map(function(e){return e.data().id});g.addFilter(c.cohort,n),c.cohort=""};var d,u,p=angular.element("#markers-chart"),g=e.getPatientFilterApi();g.init(c.datasource),g.onSelect.add(l);var m;e.setBusy(!0),e.setDataset(c.datasource).then(function(){e.getPatientHistoryTable(c.datasource).then(function(t){var o=t.payload.tbl;e.getMarkersNetwork(t.payload).then(function(t){u=angular.fromJson(t.payload).elements,u.nodes.filter(function(e){return"patient"===e.data.nodeType}).map(function(e){e.data.pos={x:e.position.x,y:e.position.y},e.data.patient=this.filter(function(t){return t[0]===e.data.id})[0]},o),u.nodes.filter(function(e){var t=e.data.nodeType;return"centromere"===t||"telomere"===t||"gene"===t}).map(function(e){return e.locked=!0,e.selectable=!0,e.grabbable=!1,e}),u.edges.map(function(e){return e.locked=!0,e.selectable=!1,e.grabbable=!1,e}),d=i({container:p,elements:u,style:x,hideEdgesOnViewport:!0,hideLabelsOnViewport:!0,textureOnViewport:!0,motionBlur:!0,minZoom:.1,maxZoom:10,layout:{name:"preset",fit:!0}}),d.nodes().map(function(e){e.data({degree:e.degree(),baseWidth:e.width(),baseHeight:e.height(),zoomed:!1})}),l(),c.optPatientLayouts=b(d,c),c.optEdgeColors=y(d,c,n),c.optNodeColors=v(d,c,e),c.optInteractiveModes=f(d,c,a),c.optInteractiveMode=c.optInteractiveModes[0],h(d),a.$watch("vm.searchGene",function(){angular.isUndefined(c.searchGene)||d.nodes('node[nodeType="gene"]').forEach(function(e){return""==c.searchGene?void e.deselect():void(0==e.data().name.toLowerCase().indexOf(c.searchGene.toLowerCase())?e.select():e.deselect())})}),a.$watch("vm.searchPatient",function(){angular.isUndefined(c.searchPatient)||d.nodes('node[nodeType="patient"]').forEach(function(e){return""==c.searchPatient?void e.deselect():void(0==e.data().id.toLowerCase().indexOf(c.searchPatient.toLowerCase())?e.select():e.deselect())})}),e.setBusy(!1)})})});var h=function(e){var t=0;e.on("pan",function(e){var n=e.cy.zoom()>2?2:e.cy.zoom()>.5?1:0;t!=n&&(t=n,console.log("ZOOM"))})},f=function(e,t){var n=function(){var e=new r.Signal,t=new r.Signal,n=new r.Signal,a=new r.Signal,o=new r.Signal,i=new r.Signal,s=function(){e.removeAll(),t.removeAll(),a.removeAll(),o.removeAll(),n.removeAll(),i.removeAll()},l=function(t){e.add(t),a.add(t)},c=function(e){t.add(e),o.add(e)},d=function(e){n.add(e),i.add(e)};return{geneOver:e,geneOut:t,geneClick:n,patientOver:a,patientOut:o,patientClick:i,over:l,out:c,click:d,removeAll:s}}();e.on("click",'node[nodeType="gene"]',n.geneClick.dispatch).on("click",'node[nodeType="patient"]',n.patientClick.dispatch).on("mouseover",'node[nodeType="gene"]',n.geneOver.dispatch).on("mouseover",'node[nodeType="patient"]',n.patientOver.dispatch).on("mouseout",'node[nodeType="gene"]',n.geneOut.dispatch).on("mouseout",'node[nodeType="patient"]',n.patientOut.dispatch);
var o={showPatientInfo:function(e){return"patient"==e.cyTarget.data().nodeType&&a.$apply(function(){t.patient=e.cyTarget.attr("patient"),t.patientChromosomes=e.cyTarget.neighborhood("node").map(function(e){return e.data().id})}),this},hidePatientInfo:function(){return a.$apply(function(){t.patient=t.patientChromosomes=null}),this},showNodeLabel:function(e){return e.cyTarget.style({"font-size":"50px"}),this},hideNodeLabel:function(e){return e.cyTarget.style({"font-size":"0px"}),this},showNeighborLabel:function(e){return e.cyTarget.neighborhood("node").style({"font-size":"50px"}),this},hideNeighborLabel:function(e){return e.cyTarget.neighborhood("node").style({"font-size":"0px"}),this},showDegreeOne:function(e){return e.cyTarget.neighborhood("edge").style({display:"element","line-style":"solid"}),this},hideDegreeOne:function(e){return e.cyTarget.neighborhood("edge").style({display:"none"}),this},showDegreeTwo:function(e){return e.cyTarget.neighborhood("node").neighborhood("edge").style({"line-style":"dashed",display:"element"}),this.showDegreeOne(e),this},hideDegreeTwo:function(e){return e.cyTarget.neighborhood("node").neighborhood("edge").style({display:"none"}),this},showOncoPrint:function(e){var n=t.datasource;if("DEMOdz"!=n&&n.indexOf(!1)){var o=n.substr(4)+"_tcga",i=e.cyTarget.neighborhood("node").map(function(e){return e.data().name}).join("+"),r="http://www.cbioportal.org/ln?cancer_study_id="+o+"&q="+i;a.$apply(function(){s.open(r)})}}},i=[{name:"Hide All",register:function(){n.click(function(e){o.showOncoPrint(e)}),n.over(function(e){o.showPatientInfo(e)}),n.out(function(e){o.hidePatientInfo(e)})},unregister:function(){n.removeAll()}},{name:"Show All",register:function(){n.click(function(e){o.showOncoPrint(e)}),n.over(function(e){o.showPatientInfo(e)}),n.out(function(e){o.hidePatientInfo(e)}),e.$('edge[edgeType!="chromosome"]').style({display:"element"})},unregister:function(){n.removeAll(),e.$('edge[edgeType!="chromosome"]').style({display:"none"})}},{name:"1째 When Selected",register:function(){d.$('node[nodeType="patient"]:selected').forEach(function(e){e.neighborhood("edge").style({display:"element","line-style":"solid"})}),d.on("select","node",function(e){o.showDegreeOne(e)}),d.on("unselect","node",function(e){o.hideDegreeOne(e)})},unregister:function(){d.$('node[nodeType="patient"]:selected').forEach(function(e){e.neighborhood("edge").style({display:"none"})}),d.off("select","node"),d.off("unselect","node")}},{name:"2째 When Selected",register:function(){d.$('node[nodeType="patient"]:selected').forEach(function(e){e.neighborhood("edge").style({display:"element","line-style":"solid"}),e.neighborhood("node").neighborhood("edge").style({"line-style":"dashed",display:"element"})}),d.on("select","node",function(e){o.showDegreeTwo(e)}),d.on("unselect","node",function(e){o.hideDegreeTwo(e)})},unregister:function(){d.$('node[nodeType="patient"]:selected').forEach(function(e){e.neighborhood("edge").style({display:"none"}),e.neighborhood("node").neighborhood("edge").style({display:"none"})}),d.off("select","node"),d.off("unselect","node")}},{name:"1째 On Mouse Over",register:function(){n.click(function(e){o.showOncoPrint(e)}),n.over(function(e){o.showPatientInfo(e).showDegreeOne(e)}),n.out(function(e){o.hidePatientInfo(e).hideDegreeOne(e)})},unregister:function(){n.removeAll()}},{name:"2째 On Mouse Over",register:function(){n.click(function(e){o.showOncoPrint(e)}),n.over(function(e){o.showPatientInfo(e).showDegreeTwo(e)}),n.out(function(e){o.hidePatientInfo(e).hideDegreeTwo(e)})},unregister:function(){n.removeAll()}}];return a.$watch("vm.optInteractiveMode",function(e,t){t.unregister(),e.register()}),i},v=function(e,t,n){var a=function(a){e.$('node[nodeType="patient"]').style({"background-color":"rgb(19, 150, 222)"}),n.getSampleCategorization(a.name).then(function(n){t.legandNodes=n.payload.tbl.map(function(e){return e[0]+"|"+e[1]}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(e){var t=e.split("|");return{name:t[0],color:t[1]}}),e.$('node[nodeType="patient"]').forEach(function(e){for(var t=e.data().id,n=0;n<this.rownames.length;n++)if(t===this.rownames[n]){e.style({"background-color":this.tbl[n][1]});break}},n.payload)})};n.getSampleCategorizationNames().then(function(e){t.optNodeColors=t.optNodeColors.concat(e.payload.map(function(e){return{name:e,fn:a}}))}),t.legandNodes=[{name:"Patients",color:"#3993fa"}];var o=[{name:"Default",fn:function(){t.legandNodes=[{name:"Patients",color:"#3993fa"}],e.$('node[nodeType="patient"]').style({"background-color":"rgb(19, 150, 222)"})}},{name:"Gender",fn:function(){t.legandNodes=[{name:"Male",color:"blue"},{name:"Female",color:"pink"}],e.$('node[nodeType="patient"]').forEach(function(e){e.data().patient&&e.style({"background-color":"male"===e.data().patient[2]?"rgb(5, 108, 225)":"female"===e.data().patient[2]?"pink":"black"})})}},{name:"Age At Diagnosis",fn:function(){t.legandNodes=[{name:"Young",color:"green"},{name:"Old",color:"red"}],e.$('node[nodeType="patient"]').forEach(function(e){if(e.data().patient){var t=e.data().patient[4];e.style({"background-color":"rgb("+255*t/100+","+255*(100-t)/100+",0)"})}})}}];return t.optNodeColor=o[0],o},y=function(e){var t=function(t){var n=angular.element("."+t["class"]);switch(t.state){case"Visible":t.state="Highlight",n.css("border-color",t.color),e.$('edge[edgeType="'+t.name+'"]').style({"line-color":t.color,width:"5px"});break;case"Hidden":t.state="Visible",n.css("border-color",w.gray),e.$('edge[edgeType="'+t.name+'"]').style({"line-color":"#CCC",width:"5px"});break;default:t.state="Hidden",n.css("border-color",w.white),e.$('edge[edgeType="'+t.name+'"]').style({width:"0px"})}},a=[{name:"mutation","class":"edgeMutation",color:"#004358",state:"Highlight",fn:t},{name:"cnGain.1","class":"edgeCnGain1",color:"#1F8A70",state:"Highlight",fn:t},{name:"cnLoss.1","class":"edgeCnLoss1",color:"#BEDB39",state:"Highlight",fn:t},{name:"cnGain.2","class":"edgeCnGain2",color:"#FFE11A",state:"Highlight",fn:t},{name:"cnLoss.2","class":"edgeCnLoss2",color:"#FD7400",state:"Highlight",fn:t}];return n(function(){a.forEach(function(t){angular.element("."+t["class"]).css("border-color",t.color),e.$('edge[edgeType="'+t.name+'"]').style({"line-color":t.color,width:"5px"})})}),a},b=function(e,t){var n=[{name:"Hobo",fn:function(n){t.optPatientLayout=n,e.$('node[nodeType="patient"]').forEach(function(e){e.position(e.data().pos)})}},{name:"Age At Diagnosis",fn:function(n){t.optPatientLayout=n,e.$('node[nodeType="patient"]').forEach(function(e){e.data().patient&&e.position({x:500,y:60*e.data().patient[4]-3e3})})}},{name:"Gender",fn:function(n){t.optPatientLayout=n;var a=1e3,o=1e3;e.$('node[nodeType="patient"]').forEach(function(e){e.data().patient&&("male"==e.data().patient[2].toLowerCase()?e.position({x:a-=50,y:500}):e.position({x:o-=50,y:-500}))})}}];return t.optPatientLayout=n[0],n},w={darkblue:"rgb(5, 108, 225)",blue:"rgb(19, 150, 222)",black:"black",white:"white",red:"red",purple:"rgb(56, 52,123)",gray:"#CCC"},x=[{selector:"node",style:{"background-color":w.blue,"border-opacity":1,"border-color":w.red,"border-width":"0px",height:"20px",width:"20px",label:" data(id)","text-halign":"center","text-valign":"center","font-size":"0px"}},{selector:'node[nodeType="patient"]',style:{"background-color":w.blue,height:"mapData(degree, 0, 50, 20.0, 100.0)",width:"mapData(degree, 0, 50, 20.0, 100.0)"}},{selector:"edge",style:{display:"none"}},{selector:'edge[edgeType="chromosome"]',style:{"line-color":w.blue,display:"element"}},{selector:'node[nodeType="gene"]',style:{"border-color":w.purple,"border-width":"3px","background-color":w.white,height:"mapData(degree, 0, 50, 10.0, 80.0)",width:"mapData(degree, 0, 50, 10.0, 80.0)"}},{selector:'node[nodeType="gene"]:selected',style:{"border-color":w.red,"border-width":"6px"}},{selector:'node[nodeType="centromere"]',style:{"font-size":"24px","min-zoomed-font-size":"12px","text-halign":"center","text-valign":"center","background-color":w.white,"border-color":w.blue,color:w.blue,"border-width":"3px",height:"40px",width:"120px",shape:"roundrectangle",label:"data(id)"}},{selector:'node[nodeType="patient"]:selected',style:{"border-color":w.red,"border-width":"6px"}}]}e.$inject=["osApi","$state","$timeout","$scope","$stateParams","cytoscape","signals","$window"];var t={restrict:"E",templateUrl:"app/components/markers/markers.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osMarkers",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/loader/loader.html",replace:!0};return e}angular.module("oncoscape").directive("osLoader",e)}(),function(){"use strict";function e(){function e(e,t){var n=e.getUserApi(),a=this;a.domains=n.getDomains(),a.user=n.getUser(),a.hasError=!1,a.login=function(){var e=n.login(a.user);angular.isDefined(e)?e.then(function(){a.user.authenticated?t.go("datasource"):a.hasError=!0}):t.go("datasource")}}e.$inject=["osApi","$state"];var t={restrict:"E",templateUrl:"app/components/login/login.html",replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osLogin",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.login=function(){e.go("login")}}e.$inject=["$state"];var t={restrict:"E",templateUrl:"app/components/landing/landing.html",replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osLanding",e)}(),function(){"use strict";function e(){function e(e,t,n,a,o){function i(){c.fnClearTable();var e=l.filter(s.tbl,function(e){return e[0]});if(0!=e.length){var t=e.map(function(e){return e[4]}),a=e.map(function(e){return e[3]});n(function(){r.filter=l.getActiveFilter().name,r.diagnosisMin=r.diagnosisMinValue=Math.floor(Math.min.apply(null,t)),r.diagnosisMax=r.diagnosisMaxValue=Math.ceil(Math.max.apply(null,t)),r.survivalMin=r.survivalMinValue=Math.floor(Math.min.apply(null,a)),r.survivalMax=r.survivalMaxValue=Math.floor(Math.max.apply(null,a))}),c.fnAddData(e)}}var r=this;r.datasource=o.datasource||"DEMOdz",r.filter,r.colnames=[],r.diagnosisMin=r.diagnosisMinValue=1,r.diagnosisMax=r.diagnosisMaxValue=99,r.survivalMin=r.survivalMinValue=0,r.survivalMax=r.survivalMaxValue=10,r.search="";var s,l=e.getPatientFilterApi();l.init(r.datasource),l.onSelect.add(i),r.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},r.applyFilter=function(){angular.element.fn.DataTable.ext.search=[function(e,t){var n=parseFloat(t[3]),a=parseFloat(t[4]);return isNaN(n)||isNaN(a)?!1:a>=r.diagnosisMin&&a<=r.diagnosisMax&&n>=r.survivalMin&&n<=r.survivalMax}],c.api().draw()},r.cohort,r.createCohort=function(){l.addFilter(r.cohort,c._("tr",{filter:"applied"}).map(function(e){return e[0]})),r.cohort=""};var c;e.setBusy(!0),e.setDataset(r.datasource).then(function(){e.getPatientHistoryTable(r.datasource).then(function(t){s=t.payload,r.colnames=s.colnames,n(function(){c=angular.element("#history-datatable").dataTable({scrollY:"70vh",paging:!1}),a.$watch("vm.search",function(){c.api().search(r.search).draw()}),i(),e.setBusy(!1)},0,!1)})})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/history/history.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHistory",e)}(),function(){"use strict";function e(){function e(){var e=this;e.videos=[{name:"Oncoscape + Github",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Creating Cohorts",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Patients + Markers",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Timelines",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""}]}var t={restrict:"E",templateUrl:"app/components/help/help.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHelp",e)}(),function(){"use strict";function e(){function e(e,t,n,a){var o=e.getUserApi();o.onLogin.add(function(){a(function(){i.showMenu=!0})}),o.onLogout.add(function(){a(function(){i.showMenu=!1})});var i=this;i.showMenu=!1,i.datasource=t.datasource||"DEMOdz",i.toolsClick=function(){n.go("tools",{datasource:i.datasource})},i.cohortClick=function(){e.toggleFilter()},i.logoutClick=function(){o.logout(),n.transitionTo("landing")}}e.$inject=["osApi","$stateParams","$state","$timeout"];var t={restrict:"E",templateUrl:"app/components/header/header.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHeader",e)}(),function(){"use strict";function e(){function e(e,t,n,a){var o=t.datasource||"DEMOdz",i=e.getPatientFilterApi();i.init(o),i.onChange.add(function(){r.draw()});var r=function(e,t){function o(e){switch(e){case"Cluster":h();break;case"Tree":f()}}function i(){f()}var r,s;r=s=Math.min(n.innerWidth,n.innerHeight)-200;var l,c,d=2e3,u=a.layout.tree().size([s,r-160]),p=a.layout.cluster().size([s,r-160]),g=a.svg.diagonal().projection(function(e){return[e.y,e.x]}),m=a.select("#filters-chart").append("svg").attr("width",r).attr("height",s).append("g").attr("transform","translate(100,0)"),h=function(){var n=e.getFilterTree(),o=p.nodes(n),i=p.links(o);m.transition().duration(d).attr("transform","translate(40,0)"),l=m.selectAll(".filter-link").data(i),l.enter().append("path").attr("class","filter-link").transition().duration(d).attr("d",g),l.transition().duration(d).attr("d",g),l.exit().remove(),c=m.selectAll(".filter-node").data(o);var r=c.enter().append("g").attr("class","filter-node").attr("transform",function(e){return"translate("+e.y+","+e.x+")"});r.append("circle").attr("class","filter-node-circle").attr("r",10).on("click",function(n){e.setActiveFilter(n),t.hideFilter()}).on("mouseover",function(){a.select(this).transition().ease("elastic").duration("500").attr("r",15)}).on("mouseout",function(){a.select(this).transition().ease("quad").delay("100").duration("200").attr("r",10)}),r.append("text").attr({"class":"filter-node-text",dy:30}).style({fill:"#FFF","text-anchor":"middle"}).text(function(e){return e.name}),c.transition().duration(d).attr("transform",function(e){return"translate("+e.y+","+e.x+")"}),c.exit().remove()},f=function(){var n=e.getFilterTree(),o=u.nodes(n),i=u.links(o);m.transition().duration(d).attr("transform","translate(40,0)"),l=m.selectAll(".filter-link").data(i),l.enter().append("path").attr("class","filter-link").transition().duration(d).attr("d",g),l.transition().duration(d).attr("d",g),l.exit().remove(),c=m.selectAll(".filter-node").data(o);var r=c.enter().append("g").attr("class","filter-node").attr("transform",function(e){return"translate("+e.y+","+e.x+")"});r.append("circle").attr("class","filter-node-circle").attr("r",10).on("click",function(n){e.setActiveFilter(n),t.hideFilter()}).on("mouseover",function(){a.select(this).transition().ease("elastic").duration("500").attr("r",15)}).on("mouseout",function(){a.select(this).transition().ease("quad").delay("100").duration("200").attr("r",10)}),r.append("text").attr({"class":"filter-node-text",dy:30}).style({fill:"#FFF","text-anchor":"middle"}).text(function(e){return e.name}),c.transition().duration(d).attr("transform",function(e){return"translate("+e.y+","+e.x+")"}),c.exit().remove()};return h(),{setDisplay:o,draw:i}}(i,e),s=this;s.setDisplay=r.setDisplay}e.$inject=["osApi","$stateParams","$window","d3"];var t={restrict:"E",templateUrl:"app/components/filters/filters.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osFilters",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/footer/footer.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osFooter",e)}(),function(){"use strict";function e(){function e(e,t){var n=this;n.datasets=[],n.explore=function(e,n){t.go(e,{datasource:n})},e.setBusy(!0),e.getDataSetNames().then(function(t){n.datasets=t.payload.datasets,e.setBusy(!1)})}e.$inject=["osApi","$state"];var t={restrict:"E",templateUrl:"app/components/datasource/datasource.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osDatasource",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/compare/compare.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osCompare",e)}(),function(){"use strict";function e(e,t,n){e.$on("$stateChangeStart",function(e,t){angular.element.fn.DataTable.ext.search=[]})}e.$inject=["$rootScope","$state","osApi"],angular.module("oncoscape").run(e)}(),/*
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.6",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.6",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),a(c.target).is('input[type="radio"]')||a(c.target).is('input[type="checkbox"]')||c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.6",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.6",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.6",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.6",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");
d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.6",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);
*/
function(){"use strict";function e(e,t){e.state("landing",{url:"/",template:"<os-landing>",authenticate:!1}).state("help",{url:"/help",template:"<os-help>",authenticate:!1}).state("datasource",{url:"/datasource",template:"<os-datasource>",authenticate:!0}).state("tools",{url:"/tools/{datasource}",template:"<os-tools>",authenticate:!0}).state("metadata",{url:"/metadata/{datasource}",template:"<os-metadata>",authenticate:!0}).state("history",{url:"/history/{datasource}",template:"<os-history>",authenticate:!0}).state("plsr",{url:"/plsr/{datasource}",template:"<os-plsr>",authenticate:!0}).state("pca",{url:"/pca/{datasource}",template:"<os-pca>",authenticate:!0}).state("markers",{url:"/markers/{datasource}",template:"<os-markers>",authenticate:!0}).state("pathways",{url:"/pathways/{datasource}",template:"<os-pathways>",authenticate:!0}).state("timelines",{url:"/timelines/{datasource}",template:"<os-timelines>",authenticate:!0}).state("survival",{url:"/survival/{datasource}",template:"<os-survival>",authenticate:!0}).state("compare",{url:"/compare/{datasource}",template:"<os-compare>",authenticate:!0}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("oncoscape").config(e)}(),function(){"use strict";angular.module("oncoscape").constant("moment",moment).constant("d3",d3).constant("cytoscape",cytoscape).constant("signals",signals).constant("SockJS",SockJS).constant("domain",document.domain).constant("$",$)}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!0}e.$inject=["$logProvider","toastrConfig"],angular.module("oncoscape").config(e)}(),angular.module("oncoscape").run(["$templateCache",function(e){e.put("app/test.html",'<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Collapsible Tree Example</title><style>\n\n	.node circle {\n	  fill: #fff;\n	  stroke: steelblue;\n	  stroke-width: 3px;\n	}\n\n	.node text { font: 12px sans-serif; }\n\n	.link {\n	  fill: none;\n	  stroke: #ccc;\n	  stroke-width: 2px;\n	}\n	\n    </style></head><body><script src="http://d3js.org/d3.v3.min.js"></script><script>\n\nvar treeData = [\n  {\n    "name": "Top Level",\n    "parent": "null",\n    "children": [\n      {\n        "name": "Level 2: A",\n        "parent": "Top Level",\n        "children": [\n          {\n            "name": "Son of A",\n            "parent": "Level 2: A"\n          },\n          {\n            "name": "Daughter of A",\n            "parent": "Level 2: A"\n          }\n        ]\n      },\n      {\n        "name": "Level 2: B",\n        "parent": "Top Level"\n      }\n    ]\n  }\n];\n\n// ************** Generate the tree diagram	 *****************\nvar margin = {top: 40, right: 120, bottom: 20, left: 120},\n	width = 960 - margin.right - margin.left,\n	height = 500 - margin.top - margin.bottom;\n	\nvar i = 0;\n\nvar tree = d3.layout.tree()\n	.size([height, width]);\n\nvar diagonal = d3.svg.diagonal()\n	.projection(function(d) { return [d.x, d.y]; });\n\nvar svg = d3.select("body").append("svg")\n	.attr("width", width + margin.right + margin.left)\n	.attr("height", height + margin.top + margin.bottom)\n  .append("g")\n	.attr("transform", "translate(" + margin.left + "," + margin.top + ")");\n\nroot = treeData[0];\n  \nupdate(root);\n\nfunction update(source) {\n\n  // Compute the new tree layout.\n  var nodes = tree.nodes(root).reverse(),\n	  links = tree.links(nodes);\n\n  // Normalize for fixed-depth.\n  nodes.forEach(function(d) { d.y = d.depth * 100; });\n\n  // Declare the nodes\n  var node = svg.selectAll("g.node")\n	  .data(nodes, function(d) { return d.id || (d.id = ++i); });\n\n  // Enter the nodes.\n  var nodeEnter = node.enter().append("g")\n	  .attr("class", "node")\n	  .attr("transform", function(d) { \n		  return "translate(" + d.x + "," + d.y + ")"; });\n\n  nodeEnter.append("circle")\n	  .attr("r", 10)\n	  .style("fill", "#fff");\n\n  nodeEnter.append("text")\n	  .attr("y", function(d) { \n		  return d.children || d._children ? -18 : 18; })\n	  .attr("dy", ".35em")\n	  .attr("text-anchor", "middle")\n	  .text(function(d) { return d.name; })\n	  .style("fill-opacity", 1);\n\n  // Declare the links\n  var link = svg.selectAll("path.link")\n	  .data(links, function(d) { return d.target.id; });\n\n  // Enter the links.\n  link.enter().insert("path", "g")\n	  .attr("class", "link")\n	  .attr("d", diagonal);\n\n}\n\n</script></body></html>'),e.put("app/components/compare/compare.html",'<section class="compare-v50"><os-plsr></os-plsr></section><section class="compare-v50"><os-pca></os-pca></section>'),e.put("app/components/datasource/datasource.html",'<section class="datasource container-fluid"><div class="row"><div class="col-sm-8 col-md-6"><h1>Data Sources</h1><p>Oncoscape has analyzed and curated the following datasets hosted by The Cancer Genome Atlas (TCGA). Raw data sets for the current organ sites including all others can be found at <a href="https://tcga-data.nci.nih.gov/tcga/">TCGA Data Portal</a></p></div></div><div class="row"><ul><li ng-repeat="dataset in vm.datasets" class="col-xs-12 col-sm-6 col-lg-4"><img class="datasource-img" ng-src="/assets/images/datasets/{{dataset}}.png"><h2 class="datasource-lbl">{{dataset}}</h2><nobr><a href="" ng-click="vm.explore(\'tools\',dataset)">Explore</a> &nbsp;|&nbsp; <a href="" ng-click="vm.explore(\'metadata\',dataset)">Learn More</a></nobr></li></ul></div></section>'),e.put("app/components/filters/filters.html",'<section id="filter-dropdown" class="filters container"><div class="filters-tree" id="filters-chart"><div class="row"><div class="col-sm-8"><h2 style="color:#FFF;">My Cohorts</h2><p></p></div><div class="col-sm-4" style="text-align: right;margin-top:30px;"><div class="btn-group" role="group" aria-label="Basic example"><button type="button" class="btn btn-primary" ng-click="vm.setDisplay(\'Cluster\')">View 1</button> <button type="button" class="btn btn-primary" ng-click="vm.setDisplay(\'Tree\')">View 2</button></div></div></div></div></section>'),e.put("app/components/footer/footer.html",'<footer class="footer container"><div class="row"><div class="col-xs-12 col-sm-6"><img class="footer-logo" src="/assets/images/logo-fred-hutchinson-cancer-research-center.png" alt="Fred Hutchinson Cancer Research Center"> <img class="footer-logo" src="/assets/images/logo-university-of-washington-medicine.png" alt="UW Medicine"> <img class="footer-logo" src="/assets/images/logo-seattle-cancer-care-alliance.png" alt="Seattle Cancer Care Alliance"></div><div class="col-xm-12 col-sm-6 text-right"><a href="https://www.facebook.com/STTRCancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-facebook-out.png" alt="Facebook"></a> <a href="https://twitter.com/sttrcancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-twitter-out.png" alt="Twitter"></a> <a href="https://plus.google.com/+fredhutch/videos" target="_blank"><img class="footer-icon" src="/assets/images/sttr-youtube-out.png" alt="YouTube"></a> <a href="http://instagram.com/FredHutch" target="_blank"><img class="footer-icon" src="/assets/images/sttr-instagram-out.png" alt="Instagram"></a> <a href="http://www.linkedin.com/company/fred-hutchinson-cancer-research-center/careers?trk=top_nav_careers" target="_blank"><img class="footer-icon" src="/assets/images/sttr-linkedin-out.png" alt="LinkedIn"></a> <a href="https://plus.google.com/116048577052683099154/posts" target="_blank"><img class="footer-icon" src="/assets/images/sttr-google-out.png" alt="Google+"></a></div></div></footer>'),e.put("app/components/header/header.html",'<nav class="navbar navbar-inverse navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#"><img alt="Brand" src="/assets/images/logo.png" style="max-height:50px;"></a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" ng-if="vm.showMenu"><ul class="nav navbar-nav navbar-right"><li><a href="#datasource"><span class="glyphicon glyphicon-th"></span>Data Sources</a></li><li><a href="" ng-click="vm.toolsClick()"><span class="glyphicon glyphicon-signal"></span>Analysis Tools</a></li><li><a href="" ng-click="vm.cohortClick()"><span class="glyphicon glyphicon-equalizer"></span>My Cohorts</a></li><li><a href="#help"><span class="glyphicon glyphicon-question-sign"></span>Help</a></li><li><a href="" ng-click="vm.logoutClick()"><span class="glyphicon glyphicon-user"></span>Logout</a></li></ul></div></div></nav><a href="https://github.com/FredHutch/Oncoscape/labels/help%20wanted" class="github"><div class="logo"><svg aria-hidden="true" class="octicon octicon-mark-github" height="28" role="img" version="1.1" viewbox="0 0 16 16" width="28"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"></path></svg></div></a>'),e.put("app/components/help/help.html",'<section class="tools container"><div class="row"><div class="col-sm-8 col-md-6"><br><br><br></div></div><div class="row"><div class="col-xs-12 col-md-7"><h2 style="margin:0px;margin-bottom: 20px;">Now Playing &mdash; Lorum Ipsum</h2><div style="background-color:#000;text-align: center;"><video width="640" height="360" controls="" style="background-color: #000;max-width: 100%;"></video></div><h2>Video Title</h2><p>Transcription At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat</p></div><div class="col-xs-12 col-md-5" style="padding-left: 40px;"><h2 style="margin:0px;">Oncoscape Videos</h2><ul><li ng-repeat="video in vm.videos" style="clear: both;"><div style="width:30%;height:90px;background-color:#EEE;display:inline-block;float:left;margin-bottom: 20px;text-align: center;cursor: pointer;"><span class="glyphicon glyphicon-play-circle" style="font-size: 30px;padding-top:30px; color:#FFF"></span></div><div style="width:69%;display: inline-block;float:left;padding-left: 10px;"><h3 class="tools-lbl" style="margin:0px;">{{video.name}}</h3><p>{{video.desc}}</p><a href="" ng-click="vm.explore(tool.route, vm.datasource)">Watch Video</a></div></li></ul></div></div></section>'),e.put("app/components/landing/landing.html",'<div class="landing container"><div class="row" style="padding-top:20px;"><h2>Bridging Cancer Research and Clinical Care</h2></div><div class="row" style="padding-top:20px;"><div class="col-sm-8"><p>Oncoscape is developed at the Fred Hutchinson Cancer Research Center under the auspices of the Solid Tumor Translational Research initiative. Oncoscape is a web-based, menu-driven analysis and visualization platform for large-scale, heterogeneous clinical and molecular patient timeline data as exemplified by the Fred Hutch HIDRA database. Oncoscape was conceived, and is managed, by a Steering Committee comprising: <a href="https://www.fredhutch.org/en/labs/profiles/holland-eric.html">Eric Holland</a>, <a href="http://www.sttrcancer.org/en/contact-us/horse-grant-bio.html">Desert Horse-Grant</a>, <a href="https://www.fredhutch.org/en/diseases/featured-researchers/fearn-paul.html">Paul Fearn</a>, <a href="https://www.linkedin.com/in/paul-shannon-a9478166">Paul Shannon</a>, <a href="https://www.linkedin.com/in/lisa-mcferrin-9758b029">Lisa McFerrin</a>, and <a href="https://www.linkedin.com/in/hbolouri">Hamid Bolouri</a>.</p><p class="">Through its easy point-and-click browser interface, Oncoscape will become an essential tool for doctors and researchers interested in:</p><ul class=""><li>Comparing patients or populations across an array of features, like genetic alterations (CNV, IHC, sequencing, expression) or clinical elements (treatment regimens, diagnostics, outcomes)</li><li>Defining cohorts based on selected traits  identifying patients like me</li><li>Aligning patient histories according to timeline events: diagnosis, treatment, progression, survival</li><li>Performing powerful and integrated statistical analysis: Principle Component Analysis, Partial least squares regression, Kaplan-Meier curves, enrichment scores</li><li>Creating high quality visualizations of molecular/clinical data</li></ul><p class="">By providing a portal equipped with rich data, powerful statistics and a simple interface, Oncoscape not only empowers users to quickly answer questions themselves but also expedites the process of discovering novel patterns and relationships. This can lead to numerous possible findings, including optimized drug therapies for individual patients, identification of novel regulatory pathways, or even the need to reassess adherence strategies.</p></div><div class="col-sm-4"><os-login></os-login></div></div></div>'),e.put("app/components/history/history.html",'<section class="history container container-filters"><h2>Patient History &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-xs-3" style="padding-right:20px;"><label>Age At diagnosis</label><div range-slider="" min="vm.diagnosisMinValue" model-min="vm.diagnosisMin" max="vm.diagnosisMaxValue" model-max="vm.diagnosisMax" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMin" max="vm.survivalMaxValue" model-max="vm.survivalMax" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-3" style="padding-right:20px"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width: 100%;" ng-model="vm.search"></div><div class="col-xs-3"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name" style="height:29px;" ng-model="vm.cohort"> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="height:29px;" ng-click="vm.createCohort()">Go!</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section class="history container" style="padding-top:20px;"><table id="history-datatable" class="table table-striped table-bordered" cellspacing="0"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></section>'),e.put("app/components/login/login.html",'<form class="login"><h3 class="login-header">Login</h3><div class="login-body"><div class="alert alert-danger" role="alert" ng-show="vm.hasError"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> <span class="sr-only">Error:</span> Invalid Credentials</div><fieldset class="form-group"><span for="domain" class="small">Affiliation</span><select id="domain" class="form-control" ng-options="option.name for option in vm.domains track by option.name" ng-model="vm.user.domain"></select></fieldset><fieldset class="form-group"><span class="form-control-label small" for="username">Username</span> <input id="username" class="form-control input-sm" type="text" placeholder="Username" ng-model="vm.user.name"></fieldset><fieldset class="form-group" ng-show="vm.user.domain.name!=\'Guest\'"><span class="form-control-label small" for="password">Password</span> <input id="password" class="form-control" type="password" placeholder="Password" ng-model="vm.user.password"></fieldset><button class="btn btn-default" ng-click="vm.login()">Login</button></div></form>'),e.put("app/components/loader/loader.html",'<div class="loader-modal"><div class="loader"><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__ball"></div></div></div>'),e.put("app/components/markers/markers.html",'<section class="markers container-fluid container-filters"><h2>Markers + Patients &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-xs-2" style="padding-right:20px;"><label>Edge Options</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optInteractiveMode.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optInteractiveModes" ng-click="vm.optInteractiveMode=item">{{item.name}}</li></ul></div></div><div class="col-xs-2" style="padding-right:20px;"><label>Layout Options</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optPatientLayout.name}} <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li style="padding:5px;font-weight:600;">Patient Distribution</li><li ng-repeat="item in vm.optPatientLayouts" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="item.fn(item)">{{item.name}}</label></li></ul></div></div><div class="col-xs-2" style="padding-right:20px;"><label>Color Options</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Patients + Edges <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li style="padding:5px;font-weight:600;">Patients Colors</li><li ng-repeat="item in vm.optNodeColors" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="item.fn(item);"> {{item.name}}</label></li><li><hr></li><li style="padding:5px;font-weight:600;">Edge Colors</li><li ng-repeat="item in vm.optEdgeColors"><button class="btn btn-default filter-button {{item.class}}" ng-click="item.fn(item); $event.stopPropagation();">{{item.name}} ({{item.state}})</button></li></ul></div></div><div class="col-xs-2" style="padding-right:20px;"><label>Gene Search</label> <input type="text" class="ngrs-range-slider" style="width:100%" ng-model="vm.searchGene"></div><div class="col-xs-2" style="padding-right:20px;"><label>Patient Search</label> <input type="text" class="ngrs-range-slider" style="width:100%" ng-model="vm.searchPatient"></div><div class="col-xs-2"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name" style="height:29px;" ng-model="vm.cohort"> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="height:29px;" ng-click="vm.createCohort()">Go!</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><div class="legend"><ul><li class="legend-section">Node Colors</li><li ng-repeat="item in vm.legandNodes"><div class="circle {{item.color}}"></div>{{item.name}}</li><li><div class="circle gene"></div>Gene</li><li><hr></li><li class="legend-section">Edge Colors</li><li ng-repeat="item in vm.optEdgeColors"><button class="btn btn-default filter-button {{item.class}}" ng-click="item.fn(item); $event.stopPropagation();" style="font-weight: 300">{{item.name}} ({{item.state}})</button></li></ul></div><div class="legend legend-right" ng-show="vm.patient"><ul><li class="legend-section">Patient Information</li><li>PID: {{vm.patient[0]}}</li><li>GENDER: {{vm.patient[2]}}</li><li>STATUS: {{vm.patient[6]}}</li><li>DIAGNOSED: {{vm.patient[4]}} years old</li><li>SURVIVED: {{vm.patient[3]}} years</li><li>PROGRESSION: {{vm.patient[5]}}</li><li><hr></li><li class="legend-section">Genes ({{vm.patientChromosomes.length}})</li><li><span ng-repeat="item in vm.patientChromosomes">{{item}} |</span></li></ul></div><section id="markers-chart" class="markers-chart"></section>'),e.put("app/components/metadata/metadata.html",'<section class="metadata container container-filters"><h2>Metadata &mdash; {{vm.dataset}}</h2><div class="row"><div class="col-xs-9" style="padding-right: 60px;">{{vm.dataset}} raw data was provided by <a href="http://cancergenome.nih.gov/">The Cancer Genome Atlas</a>. Processing of data was conducted by the <a href="http://www.sttrcancer.org/en.html">Solid Tumor Translational Research Organization</a> in conjuntion with the <a href="http://www.fhcrc.org">Fred Hutchinson Cancer Research Center</a>, <a href="http://www.uwmedicine.org/">UW Medicine</a> and <a href="http://www.scca.org">The Seattle Cancer Care Alliance</a>.</div><div class="col-xs-3" style="margin: 10px 0 30px;"><label>Search</label> <input type="text" class="ngrs-range-slider ngrs-range-slider-no-pad" style="width:100%" ng-model="vm.search"></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section class="metadata container" style="padding-top:20px;"><table id="metadata-datatable" class="table table-striped table-bordered" cellspacing="0"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></section>'),e.put("app/components/pca/pca.html",'<section class="pca container container-filters"><h2>Principal Component Analysis &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-sm-3" style="padding-right:20px;"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div><div class="col-xs-3"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name" style="height:29px;" ng-model="vm.cohort"> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="height:29px;" ng-click="vm.createCohort()">Go!</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="pca-chart" class="pca container-fluid" style="margin:50px 100px;height: 60vh"></section><section class="legend"><ul><li class="legend-section">Legend</li><li><span class="circle" style="background-color:black;width:10px;height: 10px;margin-right:10px;"></span>Patients</li><li><hr></li><li class="legend-section">Proportion of Variance</li><li>PC1: {{vm.pc1*100}}%</li><li>PC2: {{vm.pc2*100}}%</li></ul></section>'),e.put("app/components/pathways/pathways.html",'<section class="pathways container container-filters"><h2>Pathways &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-xs-3"><label>Search</label><div class="input-group"><input type="text" class="ngrs-range-slider" style="width:100%" ng-model="vm.search"></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="gbm-chart" class="pathways-chart"></section><div class="modal fade pathways" id="gbm-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div><section class="legend"><ul><li class="legend-section">Legend</li><li style="border:0px solid green; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Activation</li><li style="border:0px solid red; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Inhibition</li><li style="border:0px solid #38347B; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Modification</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Genes</li></ul><ul class="legand" ng-if="vm.tip"><li><hr></li><li class="legend-section">Click To</li><li>View {{vm.tip}}</li></ul></section>'),e.put("app/components/plsr/plsr.html",'<section class="plsr container container-filters"><h2>Partial Least Squares Regression &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-xs-3" style="padding-right:20px;"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Age At Diagnosis</label><div range-slider="" min="vm.deathMinValue" model-min="vm.deathMinFilter" max="vm.deathMaxValue" model-max="vm.deathMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMinFilter" max="vm.survivalMaxValue" model-max="vm.survivalMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="plsr-chart" class="plsr container-fluid container-content"></section><div class="modal fade pathways" id="plsr-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div><section class="legend"><ul><li class="legend-section">Legend</li><li style="border:0px solid #1396de; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Age At Diagnosis</li><li style="border:0px solid #38347b; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Survival</li><li><span class="circle" style="background-color:black;width:10px;height: 10px;margin-right:10px;"></span>Genes</li></ul></section>'),e.put("app/components/survival/survival.html",'<section class="survival container container-filters"><h2>Patient Survival &mdash; {{vm.datasource}} <span ng-if="vm.datasource!=vm.filter.name">{{vm.filter.name}}</span></h2></section><section class="survival container" style="padding-top:20px;text-align: center;"><img id="survival-img" style="max-width: 75%; height: auto; margin:auto;"></section>'),e.put("app/components/timelines/timelines.html",'<section class="timelines container container-filters"><h2>Timelines &mdash; {{vm.datasource}}</h2><div class="row"><div class="col-xs-3" style="padding-right:20px;"><label>Event Visibility</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Select Events <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.events" ng-click="vm.eventClick(item)" style="border:0px solid; border-left-width: 5px;" ng-style="{\'border-color\':item.color}">{{item.name}} ({{item.selected}})</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Event Alignment</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.align.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.events" ng-click="vm.align = item">{{item.name}}</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Feature To Compare</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.feature.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.features" ng-click="vm.feature=item">{{item.name}}</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Sort Patients By</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.sort.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.features" ng-click="vm.sort = item">{{item.name}}</li></ul></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section class="timelines container-fluid container-content" style="position:relative;padding-top:25px;"><h5 class="timelines-lbl-feature" style="padding-left:50px;position:absolute;top:20px;"><span class="glyphicon glyphicon-align-left" style="color:rgb(89, 165, 251);"></span> {{vm.feature.name}}</h5><h5 style="padding-left:50px;position:absolute; bottom:50px;" class="timelines-lbl-events"><ul class="timeline-events"><li ng-repeat="item in vm.events" ng-click="vm.eventClick(item)" ng-style="item.selected && {\'border-color\':item.color}">{{item.name}}</li></ul></h5><div id="timelines-chart" style="height:1200px;"></div></section>'),e.put("app/components/tools/tools.html",'<section class="tools container-fluid"><div class="row"><div class="col-sm-8 col-md-6"><h1>Analysis Tools</h1></div></div><div class="row"><ul><li ng-repeat="tool in vm.tools" class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><img class="tools-img" ng-src="/assets/images/datasets/{{tool.img}}"><div class="tools-copy"><h2 class="tools-lbl">{{tool.name}}</h2><a href="" ng-click="vm.explore(tool.route, vm.datasource)">Explore</a></div></li></ul></div></section>');
}]);
//# sourceMappingURL=../maps/scripts/app-07146b3956.js.map
