!function(){"use strict";angular.module("oncoscape",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","ui-rangeSlider","toastr"])}(),function(){"use strict";function e(){function e(e){var t=this;t.trayClass=Math.random().toString(36).substring(3),t.iconClass=Math.random().toString(36).substring(3);var a=!0;t.toggle=function(){var r=angular.element("."+t.trayClass),i=angular.element("."+t.iconClass),s=angular.element("."+t.content);a=!a,i.addClass(a?"glyphicon-remove":"glyphicon-plus").removeClass(a?"glyphicon-plus":"glyphicon-remove"),r.attr("locked",a?"true":"false"),a?(s.removeClass("tray-content-block-collapsed"),r.unbind("mouseover",n).unbind("mouseout",o).removeClass("tray-collapsed"),e(function(){t.change()})):(s.addClass("tray-content-block-collapsed"),r.addClass("tray-collapsed").bind("mouseover",n).bind("mouseout",o),e(function(){t.change()}))};var n=function(){angular.element("."+t.trayClass).removeClass("tray-collapsed")},o=function(){angular.element("."+t.trayClass).addClass("tray-collapsed")}}e.$inject=["$timeout"];var t={restrict:"E",templateUrl:"app/components/tray/tray.html",scope:{caption:"@",content:"@",change:"&"},controller:e,controllerAs:"vm",bindToController:!0,replace:!0,transclude:!0};return t}angular.module("oncoscape").directive("osTray",e)}(),function(){"use strict";function e(){function e(e,t,a){if(angular.isUndefined(a.datasource))return void t.go("datasource");var n=this;n.datasource=a.datasource,n.tools=[{name:"Markers + Patients",route:"markers",img:"markers.png",copy:"Link copy number variation and mutation data to patients."},{name:"Timelines",route:"timelines",img:"timelines.png",copy:""},{name:"Pathways",route:"pathways",img:"pathways.png",copy:"Map patient specific expression levels on a hand curated network of genes."},{name:"PLSR",route:"plsr",img:"plsr.png",copy:"Use linear regression to correlate genes with clinical features using RNA expression."},{name:"PCA",route:"pca",img:"pca.png",copy:"Two dimensional view of per sample expression data."},{name:"Survival",route:"survival",img:"survival.png",copy:"Compare survival rates of selected patients against the remaining population in a Kaplan Meier plot."},{name:"Patient Data",route:"history",img:"history.png",copy:""},{name:"MetaData",route:"metadata",img:"metadata.png",copy:""}],n.explore=function(e,a){t.go(e,{datasource:a})}}e.$inject=["osApi","$state","$stateParams"];var t={restrict:"E",templateUrl:"app/components/tools/tools.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osTools",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,r,i){function s(){var e=u.filter(d,function(e){return e.id});l.draw(e,c.feature,c.events,c.sort,c.align)}var l=function(){var e=angular.element("#timelines-chart"),t=e.width()-100,a=e.height(),n=i.select("#timelines-chart").append("svg").attr("width","100%").attr("height",a),o=[0,t],s={"shape-rendering":"crispEdges",stroke:"none"};n.append("g").style(s).attr({"class":"axisFeature axis",transform:"translate(50, 49)"}).call(i.svg.axis().scale(i.scale.linear().domain([0,1]).range([0,t])).orient("top")),n.append("g").style(s).attr({"class":"axisTimeline axis",transform:"translate(50, 0)"}).call(i.svg.axis().scale(i.scale.linear().domain([0,1]).range([0,t])).orient("bottom"));var l=n.append("g"),c=n.append("g"),d=n.append("g"),u=function(e,t,n,o,r){var i=e.filter(function(e){return e.hasOwnProperty("__"+this.name)},r);i=i.sort(function(e,t){return e.calcEvents[o.index].value>t.calcEvents[o.index].value?-1:1},o),i.forEach(function(e){e.dateEvents.forEach(function(e){e.startValue=e.start+this,e.endValue=null!=e.end?e.end+this:null},-e["__"+this.name].start)},r);var s=Math.floor((a-100)/i.length);1>s&&(s=1),s>20&&(s=20),g(i,t,n,o,r,s),m(i,t,n,o,r,s),h(i,t,n,o,r,s)},m=function(e,t,a,r,s,l){var d;if(-1==t.index)return d=n.selectAll("rect.feature").data([]),void d.exit().remove();var u=[0,i.max(e.map(function(e){return e.calcEvents[this].value},t.index))],p=i.scale.linear().domain(u).range(o);n.transition().duration(750).select("g.axisFeature").call(i.svg.axis().scale(p).orient("top")),d=c.selectAll("rect.feature").data(e),d.transition().duration(300).attr({"class":"feature",x:0,width:function(e){return p(e.calcEvents[t.index].value)},height:1==l?1:l-1}),d.enter().append("rect").style({fill:"#9AD6F1"}).attr({transform:function(e,t){return"translate(50,"+(t*l+50)+")"},"class":"feature",x:0,width:function(e){return p(e.calcEvents[t.index].value)},height:1==l?1:l-1}),d.exit().remove()},g=function(e,a,n,o,r,i){angular.element(".timelines-lbl-events").css({top:i*e.length+100});var s=l.selectAll("rect.lines").data(e);s.enter().append("rect").style({fill:"#EFEFEF"}).attr({width:t,height:i-1,"class":"lines",transform:function(e,t){return"translate(50,"+(t*i+50)+")"}}),s.exit().remove()},h=function(e,a,s,l,c,u){var m=s.filter(function(e){return e.selected}),g=function(e){return e.filter(function(e){for(var t=0;t<m.length;t++)if(m[t].name==e.name)return!0;return!1})},h=[e.reduce(function(e,t){return Math.min(e,g(t.dateEvents).reduce(function(e,t){return Math.min(t.startValue,e)},1/0))},1/0),e.reduce(function(e,t){return Math.max(e,g(t.dateEvents).reduce(function(e,t){var a=null==t.endValue?t.startValue:t.endValue;return Math.max(a,e)},-(1/0)))},-(1/0))],v=i.scale.linear().domain(h).range(o),f=n.transition().duration(300).select("g.axisTimeline");f.attr({transform:"translate(50,"+(u*e.length+49)+")"}),f.call(i.svg.axis().scale(v).orient("bottom").tickFormat(function(e){return r.unix(e/1e3).format("MM/DD/YYYY")}));var b=d.selectAll("g.timeline").data(e);b.enter().append("g").attr({width:t,height:u-1,"class":"timeline",transform:function(e,t){return"translate(50,"+(t*u+50)+")"}}),b.exit().remove();var y=b.selectAll("rect.timeline").data(function(e){return g(e.dateEvents)});y.enter().append("rect").style({opacity:1,fill:p}).attr({"class":"timeline",height:u,width:function(e){return null==e.endValue?3:v(e.endValue)-v(e.startValue)},x:function(e){return Math.round(v(e.startValue))}}),y.transition().style({opacity:1,fill:p}).attr({width:function(e){return null==e.endValue?3:v(e.endValue)-v(e.startValue)},x:function(e){return Math.round(v(e.startValue))}}),y.exit().remove()};return{draw:u}}();if(angular.isUndefined(n.datasource))return void t.go("datasource");var c=this;c.datasource=n.datasource,c.features,c.feature,c.events,c.sorts,c.sort,c.align;var d,u=e.getPatientFilterApi();u.init(c.datasource),u.onSelect.add(s),c.eventClick=function(e){e.selected=!e.selected,s()},c.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},e.setBusy(!0)("Loading Dataset"),e.setDataset(c.datasource).then(function(){e.getTimelines().then(function(t){d=h(t.payload.pts),c.sorts=g(d),c.sort=c.sorts[0];var n=g(d);n.unshift({index:-1,name:"None"}),c.features=n,c.feature=c.features[0],c.events=m(t.payload.eventTypes),c.align=c.events[0],a.$watchGroup(["vm.feature","vm.sort","vm.align"],s),e.setBusy(!1)})});var p=function(e){var t=e.name,a="Birth"===t?"DARKBLUE":"Diagnosis"===t?"DARKGREEN":"Pathology"===t?"DARKMAGENTA":"Progression"===t?"DARKORANGE":"Absent"===t?"DARKSLATEBLUE":"Status"===t?"DEEPPINK":"Radiation"===t?"LIMEGREEN":"Procedure"===t?"GOLD":"Encounter"===t?"MIDNIGHTBLUE":"Drug"===t?"MEDIUMSEAGREEN":"black";return a},m=function(e){return Object.keys(e).map(function(e){var t={name:e,selected:!0};return t.color=p(t),t})},g=function(e){return e[0].calcEvents.map(function(e,t){return{name:e.name,index:t}})},h=function(e){e=Object.keys(e).map(function(t){var a=e[t];return a.id=t,a});for(var t=0;t<e.length;t++){var a=e[t],n=r,o="YYYY-MM-DD",i=a.dateEvents.filter(function(e){return"single"===e.eventOrder}).map(function(e){return{start:1e3*n(e.date,o).unix(),end:null,name:e.name}}),s=a.dateEvents.filter(function(e){return"end"===e.eventOrder}).map(function(e){return{end:1e3*n(e.date,o).unix(),id:e.eventID}}),l=a.dateEvents.filter(function(e){return"start"===e.eventOrder}).map(function(e){return{start:1e3*n(e.date,o).unix(),name:e.name,id:e.eventID}});l.forEach(function(e){e.end=s.filter(function(t){return t.id==e.id})[0].end}),a.dateEvents=l.length>0?l.concat(i):i,a.dateEvents.forEach(function(e){a["__"+e.name]=e})}return e}}e.$inject=["osApi","$state","$scope","$stateParams","$window","moment","d3"];var t={restrict:"E",templateUrl:"app/components/timelines/timelines.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osTimelines",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o){function r(){e.setBusy(!0);var t=l.filter(s,function(e){return e});e.getCalculatedSurvivalCurves(t,"").then(function(t){angular.element("#survival-img").attr("src",t.payload),e.setBusy(!1)})}if(angular.isUndefined(o.datasource))return void t.go("datasource");var i=this;i.datasource=o.datasource;var s,l=e.getPatientFilterApi();l.init(i.datasource),l.onSelect.add(r),e.setBusy(!0),e.setDataset(i.datasource).then(function(){e.getPatientHistoryTable(i.datasource).then(function(e){s=e.payload.tbl.map(function(e){return e[0]}),r()})})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/survival/survival.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osSurvival",e)}(),function(){"use strict";function e(){function e(e,t){var a=this;a.tool="Pathways",a.filter="DemoDZ",a.toolsClick=function(){t.go("tools",{datasource:a.datasource})},a.cohortClick=function(){e.toggleFilter()}}e.$inject=["osApi","$state"];var t={restrict:"E",templateUrl:"app/components/subnav/subnav.html",replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osSubnav",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,r,i,s,l){if(angular.isUndefined(a.datasource))return void t.go("datasource");var c=this;c.datasource=a.datasource,c.deathMinFilter=c.deathMinValue=45,c.deathMaxFilter=c.deathMaxValue=66,c.survivalMinFilter=c.survivalMinValue=3,c.survivalMaxFilter=c.survivalMaxValue=7,c.geneSets=[],c.geneSet=null,c.frame,c.tip=null;var d,u,p,m,g,h,v=r.select("#plsr-chart").append("svg").attr("id","chart"),f=r.select("body").append("div").attr("class","tooltip plsr-tooltip");e.setBusy(!0)("Loading Dataset"),e.setDataset(c.datasource).then(function(t){var a=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});a=a[a.length-1].replace(".RData",""),e.setBusyMessage("Creating PLSR Matrix"),e.getPLSR(c.datasource,a).then(function(){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(t){c.geneSets=t.payload,c.geneSet=c.geneSets[0],e.setBusyMessage("Loading Patients"),e.getSummarizedPLSRPatientAttributes().then(function(e){var t=e.payload;c.deathMinValue=Math.floor(t.AgeDx[0]/365.24),c.deathMaxValue=Math.floor(t.AgeDx[4]/365.24),c.survivalMinValue=Math.floor(t.Survival[0]/365.24),c.survivalMaxValue=Math.floor(t.Survival[4]/365.24),o.$watch("vm.geneSet",function(){c.update()})})})})}),c.update=function(){function t(){d=s.innerWidth-100,u=s.innerHeight-190,"true"==angular.element(".tray").attr("locked")&&(d-=300),v.attr("width","100%").attr("height",u),p=r.scale.linear().domain([-g,g]).range([0,d]).nice(),m=r.scale.linear().domain([-h,h]).range([u,0]).nice()}function a(e,a,n){g=.9*e,h=.9*e,t();var s=r.svg.brush().x(p).y(m).on("brushend",function(){var e=s.extent();v.selectAll("circle").classed("pca-node-selected",function(t){return t[0]>e[0][0]&&t[0]<e[1][0]&&t[1]>e[0][1]&&t[1]<e[1][1]}),r.select(this).transition().duration(300).call(s.extent([[0,0],[0,0]]))});v.call(s);var l=v.selectAll("circle").data(n,function(e){return e});l.enter().append("circle").attr({"class":"plsr-node",cx:.5*d,cy:.5*u,r:3}).style("fill-opacity","0").on("mouseover",function(e){f.transition().duration(200).style("opacity",1),f.html(e.name).style("left",r.event.pageX+15+"px").style("top",r.event.pageY-15+"px")}).on("mouseout",function(){f.transition().duration(500).style("opacity",0)}).on("click",function(e){angular.element("#plsr-webpage").modal();var t="https://www.genecards.org/cgi-bin/carddisp.pl?gene="+e.name;o.$apply(function(){c.frame=i.trustAsResourceUrl(t)})}),l.transition().duration(750).delay(function(e,t){return t/300*500}).attr("cx",function(e){return p(e[0])}).attr("cy",function(e){return m(e[1])}).style("fill-opacity",1),l.exit().transition().duration(600).delay(function(e,t){return t/300*500}).attr("cx",.5*d).attr("cy",.5*u).style("fill-opacity","0").remove();var b=v.selectAll("line").data(a);b.enter().append("line").attr({"class":"line","stroke-width":3,x1:p(0),y1:m(0),x2:p(0),y2:m(0)}).style("stroke",function(e){return e.name.indexOf("Age")?"#1396de":"#38347b"}),b.transition().duration(900).attr({x1:p(0),y1:m(0),x2:function(e){return p(e[0])},y2:function(e){return m(e[1])}}),b.exit().remove();var y=v.selectAll("text").data(a);y.enter().append("text").attr({"class":"text",x:.5*d,y:.5*u,"text-anchor":function(e){return e[0]>0?"start":"end"}}).text(function(e){return e.name}).style({fill:"black","text-anchor":"middle"}),y.transition().duration(900).attr({x:function(e){return p(e[0])},y:function(e){return m(e[1])}}),y.exit().remove()}e.setBusyMessage("Calculating PLSR");var n=[{name:"Survival",low:365.24*Number(c.survivalMinFilter),high:365.24*Number(c.survivalMaxFilter)},{name:"AgeDx",low:365.24*Number(c.deathMinFilter),high:365.24*Number(c.deathMaxFilter)}];e.getCalculatedPLSR(c.geneSet,n).then(function(t){e.setBusyMessage("Rendering PLSR");var n=t.payload,o=n.loadings.map(function(e,t){return e.name=this[t],e},n.loadingNames),r=n.vectors.map(function(e,t){return e.name=this[t],e},n.vectorNames),i=1.2*n.maxValue;a(i,r,o),e.setBusy(!1)}),c.resize=function(){t(),v.selectAll("circle").attr({cx:function(e){return p(e[0])},cy:function(e){return m(e[1])}}),v.selectAll("text").attr({x:function(e){return p(e[0])},y:function(e){return m(e[1])}}),v.selectAll("line").attr({x1:p(0),y1:m(0),x2:function(e){return p(e[0])},y2:function(e){return m(e[1])}})},angular.element(s).bind("resize",l.debounce(c.resize,300))}}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3","$sce","$window","_"];var t={restrict:"E",templateUrl:"app/components/plsr/plsr.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPlsr",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,r,i,s){function l(){requestAnimationFrame(l),b.update()}if(angular.isUndefined(a.datasource))return void t.go("datasource");var c=this;c.datasource=a.datasource,c.geneSets=[],c.geneSet=null,c.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var d,u=angular.element("#pca-chart");e.setBusy(!0)("Loading Dataset"),e.setDataset(c.datasource).then(function(t){var a=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});a=a[a.length-1].replace(".RData",""),e.setBusyMessage("Creating PCA Matrix"),e.getPCA(c.datasource,a).then(function(){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(e){c.geneSets=e.payload,c.geneSet=c.geneSets[0],o.$watch("vm.geneSet",function(){p()})})})});var p=function(){e.setBusyMessage("Calculating PCA"),e.getCalculatedPCA2(c.geneSet).then(function(t){e.setBusyMessage("Rendering PCA");var a=t.payload;c.pc1=t.payload["importance.PC1"],c.pc2=t.payload["importance.PC2"];var n=a.scores,o=a.ids;d=n.map(function(e,t){return e.id=o[t],e},a.ids),v(),e.setBusy(!1)})},m=new i.Scene,g=new i.PerspectiveCamera(50,s.innerWidth/s.innerHeight,.1,1e3);g.position.z=60;var h=s.WebGLRenderingContext?new i.WebGLRenderer({antialias:!0}):new i.CanvasRenderer;h.setPixelRatio(s.devicePixelRatio),h.setSize(s.innerWidth,s.innerHeight),u.append(h.domElement);var v=function(){for(var e=[],t=d.length,a=new i.SphereGeometry(.1,8,8),n=new i.MeshBasicMaterial({color:"#59a5fb"}),o=0;t>o;o++){e[o]=new i.Mesh(a,n);var r=d[o];e[o].position.x=r[0],e[o].position.y=r[1],e[o].position.z=r[2],m.add(e[o])}f()},f=function(){h.render(m,g)},b=new i.OrbitControls(g);b.addEventListener("change",f),l()}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3","THREE","$window"];var t={restrict:"E",templateUrl:"app/components/pca3d/pca3d.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPca3d",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,r,i,s){function l(){u=i.innerWidth-100,p=i.innerHeight-190,"true"==angular.element(".tray").attr("locked")&&(u-=300),C.attr("width","100%").attr("height",p),m=r.scale.linear().domain([-h,h]).range([0,u]).nice(),g=r.scale.linear().domain([-v,v]).range([p,0]).nice()}function c(){var e,t,a=y;e=Math.abs(r.max(a,function(e){return+e[0]})),t=Math.abs(r.min(a,function(e){return+e[0]})),h=1.2*(e>t?e:t),e=Math.abs(r.max(a,function(e){return+e[1]})),t=Math.abs(r.min(a,function(e){return+e[1]})),v=1.2*(e>t?e:t),l(),f=r.svg.axis().scale(m).orient("top").ticks(5),b=r.svg.axis().scale(g).orient("left").ticks(5);var n=r.svg.brush().x(m).y(g).on("brushend",function(){var e=n.extent();C.selectAll("circle").classed("pca-node-selected",function(t){return t[0]>e[0][0]&&t[0]<e[1][0]&&t[1]>e[0][1]&&t[1]<e[1][1]}),r.select(this).transition().duration(300).call(n.extent([[0,0],[0,0]]))});C.call(n),a=x.filter(y,function(e){return e.id});var o=C.selectAll("circle").data(a,function(e){return e});o.enter().append("circle").attr({"class":"pca-node",cx:.5*u,cy:.5*p,r:3}).style("fill-opacity","0").on("mouseover",function(e){T.transition().duration(200).style("opacity",1),T.html(e.id).style("left",r.event.pageX+10+"px").style("top",r.event.pageY-5+"px")}).on("mouseout",function(){T.transition().duration(500).style("opacity",0)}).transition().duration(750).delay(function(e,t){return t/300*500}).attr("cx",function(e){return m(e[0])}).attr("cy",function(e){return g(e[1])}).style("fill-opacity",1),o.exit().transition().duration(600).delay(function(e,t){return t/300*500}).attr("cx",.5*u).attr("cy",.5*p).style("fill-opacity","0").remove(),M.attr("class","axis").attr("transform","translate(0, "+g(0)+")").call(f).append("text").text("PC1"),k.attr("class","axis").attr("transform","translate("+m(0)+", 0)").call(b).append("text").attr("y",10).attr("dy",".71em").text("PC2")}if(angular.isUndefined(a.datasource))return void t.go("datasource");var d=this;d.datasource=a.datasource,d.geneSets=[],d.geneSet=null,d.optNodeColors=[{name:"Default"},{name:"Gender"},{name:"Age At Diagnosis"}],d.optNodeColor=d.optNodeColors[0];var u,p,m,g,h,v,f,b,y,w,x=e.getPatientFilterApi();x.init(d.datasource),x.onSelect.add(c),d.cohort,d.createCohort=function(){x.addFilter(d.cohort,r.selectAll(".pca-node-selected")[0].map(function(e){return e.__data__.id})),d.cohort=""};var C=r.select("#pca-chart").append("svg").attr("id","chart"),k=C.append("g"),M=C.append("g"),T=r.select("body").append("div").attr("class","tooltip pca-tooltip");e.setBusy(!0)("Loading Dataset"),e.setDataset(d.datasource).then(function(t){var a=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});e.getPatientHistoryTable(d.datasource).then(function(t){w=t.payload.tbl,a=a[a.length-1].replace(".RData",""),e.setBusyMessage("Creating PCA Matrix"),e.getPCA(d.datasource,a).then(function(){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(e){d.geneSets=e.payload,d.geneSet=d.geneSets[0],o.$watch("vm.geneSet",function(){A()})})})})});var A=function(){e.setBusyMessage("Calculating PCA"),e.getCalculatedPCA(d.geneSet).then(function(t){e.setBusyMessage("Rendering PCA");var a=t.payload;d.pc1=Math.round(100*t.payload["importance.PC1"]),d.pc2=Math.round(100*t.payload["importance.PC2"]);var n=a.scores,o=a.ids;y=n.map(function(e,t){return e.id=o[t],e},a.ids),c(),e.setBusy(!1)})};d.resize=function(){l(),f.scale(m),b.scale(g),M.attr("transform","translate(0, "+g(0)+")").call(f),k.attr("transform","translate("+m(0)+", 0)").call(b),C.selectAll("circle").attr("cx",function(e){return m(e[0])}).attr("cy",function(e){return g(e[1])})},angular.element(i).bind("resize",s.debounce(d.resize,300))}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3","$window","_"];var t={restrict:"E",templateUrl:"app/components/pca/pca.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPca",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,r){function i(){var e="rgb(5, 108, 225)",t="red",a="rgb(56, 52,123)",n="green";return[{selector:"node",style:{content:"data(label)","text-valign":"center","text-halign":"center",shape:"ellipse",width:"60px",height:"50px",color:e,"background-color":"rgb(250, 250, 250)","border-width":"2px","border-color":e}},{selector:"edge",style:{width:"2px","line-color":e,"line-style":"solid"}},{selector:'node[nodeType="class"], node[nodeType="family"], node[nodeType="complex"]',style:{content:"","background-color":"white",shape:"roundrectangle"}},{selector:'edge[edgeType="activates"], edge[edgeType="indirectly activates"]',style:{"line-color":n,"target-arrow-shape":"triangle","target-arrow-color":n}},{selector:'edge[edgeType="inhibits"], edge[edgeType="ubiquitinylates"]',style:{"line-color":t,"target-arrow-shape":"tee","target-arrow-color":t}},{selector:'edge[edgeType="fusion"]',style:{"line-color":n}},{selector:'edge[edgeType="contains"]',style:{display:"none"}},{selector:'node[nodeType="process"]',style:{}},{selector:"node:selected",style:{"overlay-opacity":"0.5","overlay-color":"red"}},{selector:'node[nodeType="rtk"]',style:{content:"data(label)","background-color":"rgb(224, 209, 178)","border-color":"black","border-width":"0px","font-size":"48px",shape:"roundrectangle",width:"40px",height:"160px"}},{selector:'node[nodeType="kinase"]',style:{content:"data(label)","background-color":"rgb(255, 206, 194)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="dimer"]',style:{content:"","background-color":"rgb(234, 219, 188)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="loop"]',style:{content:"","background-color":"rgb(255, 255, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px","border-style":"dotted"}},{selector:'node[nodeType="gtpase"]',style:{content:"data(label)","background-color":"rgb(194, 194, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="adaptor"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="GEF"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="process"]',style:{content:"data(label)","background-color":"rgb(255, 255, 255)",shape:"roundrectangle",width:"100px",height:"40px","font-size":"24px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="TF"]',style:{content:"data(label)","background-color":"rgb(255, 206, 94)",shape:"diamond",width:"160px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="gene fusion"]',style:{content:"data(label)",shape:"roundrectangle","font-size":"24px","border-color":"red","border-width":"3px"}},{selector:"edge:selected",style:{"overlay-color":"grey","overlay-opacity":"0.3"}},{selector:'edge[edgeType="recruits"]',style:{width:"2px"}},{selector:'edge[edgeType="fusion"]',style:{"line-color":a}},{selector:'edge[edgeType="recruits"]',style:{"line-color":"red",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","target-arrow-color":"black"}},{selector:'edge[edgeType="cycles"]',style:{"line-color":"black",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","source-arrow-shape":"triangle","target-arrow-color":"green","source-arrow-color":"red"}},{selector:'edge[edgeType="associates"]',style:{"line-color":"black",width:"1px","line-style":"solid"}},{selector:'edge[edgeType="activation"]',style:{"line-color":"green",width:"1px"}},{selector:'edge[edgeType="inhibition"]',style:{"line-color":"red",width:"1px"}}]}if(angular.isUndefined(a.datasource))return void t.go("datasource");var s,l=this;l.datasource=a.datasource,l.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},l.search="",l.frame,l.tip=null;var c,d=angular.element("#gbm-chart");n.$watch("vm.search",function(){if(!angular.isUndefined(c)){var e=l.search.toUpperCase(),t=e.length;c.nodes().map(function(a){0==t?a.unselect():a.attr("name").substr(0,t)===e?a.select():a.unselect()})}}),e.setBusy(!0),e.setDataset(l.datasource).then(function(){e.getPathway().then(function(t){s=angular.fromJson(t.payload),c=r({container:d,elements:s.elements,style:i(),minZoom:.2,maxZoom:5,layout:{name:"preset",fit:!0}}).on("click","node",function(e){angular.element("#gbm-webpage").modal();var t="https://www.genecards.org/cgi-bin/carddisp.pl?gene="+e.cyTarget.data().id;n.$apply(function(){l.frame=o.trustAsResourceUrl(t)})}).on("click","edge",function(e){angular.element("#gbm-webpage").modal();var t="https://www.ncbi.nlm.nih.gov/pubmed/?term="+e.cyTarget.data().pmid;n.$apply(function(){l.frame=o.trustAsResourceUrl(t)})}).on("mouseover","edge",function(e){n.$apply(function(){l.tip=e.cyTarget.data().source+" Extract"}),e.cyTarget.style({width:"4px"})}).on("mouseout","edge",function(e){n.$apply(function(){l.tip=null}),e.cyTarget.style({width:"2px"})}).on("mouseover","node",function(e){n.$apply(function(){l.tip=e.cyTarget.data().name+" Gene Card"})}).on("mouseout","node",function(){n.$apply(function(){l.tip=null})}),e.setBusy(!1)})})}e.$inject=["osApi","$state","$stateParams","$scope","$sce","cytoscape"];var t={restrict:"E",templateUrl:"app/components/pathways/pathways.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPathways",e)}(),function(){"use strict";function e(e,t,a,n,o){var r,i={},s=function(){return r},l=function(e){r=e},c=1,d=function(){return 9999==c&&(c=1),c++},u=new e(o.protocol()+"://"+o.host()+":"+("3002"==o.port()?80:o.port())+"/oncoscape","",{debug:!1,devel:!1});u.onmessage=function(e){var t=angular.fromJson(e.data);if(angular.isDefined(i[t.cmd])){var a=i[t.cmd];delete i[t.cmd],a.resolve(t)}else n.error("Unhandled message: %o",t)};var p=function(e){e.callback=d(),e.status="request",e.payload=e.payload||"",e.ds=s();var t=a.defer();return i[e.callback]=t,0===u.readyState?u.onopen=function(){u.send(angular.toJson(e))}:u.send(angular.toJson(e)),t.promise.then(function(t){return e.response=t,t})};return{request:p,setDataSource:l}}e.$inject=["SockJS","$rootScope","$q","$log","$location"],angular.module("oncoscape").factory("osSocket",e)}(),function(){"use strict"}(),function(){"use strict";function e(e,t,a){function n(){return H}function o(t){e.setDataSource(t),H=t,j.dispatch(H)}function r(){var e=new a.Signal,n=new a.Signal,o={name:"",password:"",domain:{name:"Guest"},authenticated:!1,token:null},r=[{name:"Guest"},{name:"FHCRC"},{name:"SCCA"}],i=function(){o.name="",o.password="",o.domain={name:"Guest"},o.authenticated=!1,o.token=null,n.dispatch()},s=function(a){if(o=a,"Guest"==a.domain.name)return o.authenticated=!0,o.token="Guest",void e.dispatch(o);var n={method:"POST",url:"/login/",data:{username:o.name,password:o.password,domain:o.domain.name}};return t(n).then(function(t){t.data.success?(o.authenticated=!0,o.token=t.data.token,e.dispatch(o)):(o.authenticated=!1,o.token=null)})};return{getDomains:function(){return r},getUser:function(){return o},login:s,logout:i,onLogin:e,onLogout:n}}function i(){return Y}function s(e){return e?angular.element(".loader-modal").show():angular.element(".loader-modal").hide(),l}function l(){}function c(){angular.element("#filter-dropdown").slideToggle()}function d(){angular.element("#filter-dropdown").slideToggle()}function u(){angular.element("#filter-dropdown").slideToggle()}function p(t){return e.setDataSource(t),e.request({cmd:"specifyCurrentDataset",payload:t})}function m(){return e.request({cmd:"getDataSetNames"})}function g(t){return e.request({cmd:"getDataManifest",payload:t})}function h(t){return e.request({cmd:"getPatientHistoryTable",payload:{datasetName:t,durationFormat:"byYear"}})}function v(){}function f(){}function b(){return e.request({cmd:"getGeneSetNames"})}function y(){return e.request({cmd:"getSampleCategorizationNames"})}function w(t){return e.request({cmd:"getSampleCategorization",payload:t})}function x(t){return e.request({cmd:"getMarkersNetwork",payload:t})}function C(){}function k(t){return e.request({cmd:"getCanonicalizePatientIDsInDataset",payload:t})}function M(){}function T(){}function A(t,a){var n={dataPackage:t,matrixName:a};return e.request({cmd:"createPCA",payload:n})}function P(t){var a={genes:t};return e.request({cmd:"calculatePCA",payload:a})}function S(t){var a={genes:t};return e.request({cmd:"calculatePCA2",payload:a})}function E(t,a){var n={dataPackage:t,matrixName:a};return e.request({cmd:"createPLSR",payload:n})}function D(t,a){var n={genes:t,factorCount:a.length,factors:a};return e.request({cmd:"calculatePLSR",payload:n})}function $(t){return t=t||["AgeDx","Survival"],e.request({cmd:"summarizePLSRPatientAttributes",payload:t})}function _(t,a){return e.request({cmd:"calculateSurvivalCurves",payload:{sampleIDs:t,title:a}})}function F(){return e.request({cmd:"createTimelines"})}function G(){}function L(){return e.request({cmd:"getModuleModificationDate",payload:"gbmPathways"})}function N(){return e.request({cmd:"getPathway",payload:"g.gbmPathways.json"})}function z(t,a){return e.request({cmd:"get_mRNA_data",payload:{entities:t,features:a}})}function R(t,a){return e.request({cmd:"get_cnv_data",payload:{entities:t,features:a}})}function B(t,a){return e.request({cmd:"get_mutation_data",payload:{entities:t,features:a}})}function O(){return W}function U(){return J}function I(e){function t(){return c}function a(e){c.push(e),s.dispatch(c)}function n(e){c.splice(c.indexOf(e)),l.dispatch(c)}function o(e){}function r(e){}function i(){}var s=new e.Signal,l=new e.Signal,c=[];return{get:t,add:a,remove:n,onAdd:s,onRemove:l,save:o,load:r,destroy:i}}function V(){return K}function q(){function e(e){l!=e&&(l=e,c=angular.fromJson(localStorage.getItem(e)),c||(c={name:e,ids:"*"}),d=c)}function t(){}function n(e,t){var a={name:e,ids:t};d.hasOwnProperty("children")||(d.children=[]),d.children.push(a),d=a,p.dispatch(c),m.dispatch(d),localStorage.setItem(l,u(c))}function o(){return d}function r(e){d=e,m.dispatch(d)}function i(){return c}function s(e,t){return"*"==d.ids?e:e.filter(function(e){for(var a=0;a<d.ids.length;a++)if(t(e)==d.ids[a])return!0;return!1})}var l=null,c=null,d=null,u=function(e){var t="{";if(t+='"name":"'+e.name+'"',t+=',"ids":',t+="string"==typeof e.ids?'"*"':'["'+e.ids.join('","')+'"]',e.hasOwnProperty("children")){t+=',"children":[';for(var a=0;a<e.children.length;a++)a>0&&(t+=","),t+=u(e.children[a]);t+="]"}return t+="}"},p=new a.Signal,m=new a.Signal;return{init:e,filter:s,getActiveFilter:o,setActiveFilter:r,addFilter:n,delFilter:t,getFilterTree:i,onChange:p,onSelect:m}}var H,j=new a.Signal,Y=r(),W=I(a),J=I(a),K=q();return{getCohortPatient:O,getCohortGene:U,setDataSource:o,getDataSource:n,onDataSource:j,
getPatientFilterApi:V,getUserApi:i,showFilter:c,hideFilter:d,toggleFilter:u,setBusy:s,setBusyMessage:l,setDataset:p,getDataSetNames:m,getDataManifest:g,getPatientHistoryTable:h,getPatientHistoryDxAndSurvivalMinMax:v,getSampleDataFrame:f,getGeneSetNames:b,getSampleCategorizationNames:y,getSampleCategorization:w,getMarkersNetwork:x,getPathway:N,getDrugGeneInteractions:C,getCanonicalizePatientIDsInDataset:k,getGeneSetGenes:M,getOncoprintDataSelection:T,getPCA:A,getCalculatedPCA:P,getCalculatedPCA2:S,getPLSR:E,getCalculatedPLSR:D,getSummarizedPLSRPatientAttributes:$,getCalculatedSurvivalCurves:_,getTimelines:F,getCalculatedTimelines:G,getMrnaData:z,getCnvData:R,getMutationData:B,getModuleModificationDate:L}}e.$inject=["osSocket","$http","signals"],angular.module("oncoscape").service("osApi",e)}(),function(){"use strict";function e(){function e(e,u,p,m,g,h,v,f,b){if(angular.isUndefined(g.datasource))return void u.go("datasource");var y,w=angular.element(".markers-chart"),x=a(this,g);x.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},x.resize=function(){var e=f.innerWidth;"true"==angular.element(".tray").attr("locked")&&(e-=300),w.width(e),w.height(f.innerHeight-145),y&&y.resize()},angular.element(f).bind("resize",b.debounce(x.resize,300)),e.setBusy(!0),d(e,x,function(a){x.resize();var d=o();y=n(a,d,h,angular.element("#markers-chart")),c(y,x,m),l(y,x,m,e),i(y,x,m,p),r(y,x,m,p,e,v),t(y,x,m),s(y,b),e.setBusy(!1)})}function t(e,t,a){a.$watch("vm.searchGene",function(){if(angular.isUndefined(t.searchGene))return void(t.geneSearchResult="");e.startBatch();var a={found:0};e.nodes('node[nodeType="gene"]').forEach(function(e){return""==t.searchGene?void e.deselect():void(0==e.data().name.toLowerCase().indexOf(t.searchGene.toLowerCase())?(e.select(),this.found+=1):e.deselect())},a),e.endBatch(),""==t.searchGene?t.searchGeneResult="":t.searchGeneResult="("+a.found+" Matches)"}),a.$watch("vm.searchPatient",function(){if(!angular.isUndefined(t.searchPatient)){e.startBatch();var a={found:0};e.nodes('node[nodeType="patient"]').forEach(function(e){return""==t.searchPatient?void e.deselect():void(0==e.data().id.toLowerCase().indexOf(t.searchPatient.toLowerCase())?(e.select(),this.found+=1):e.deselect())},a),e.endBatch(),""==t.searchPatient?t.searchPatientResult="":t.searchPatientResult="("+a.found+" Matches)"}})}function a(e,t){return e.datasource=t.datasource,e.optInteractiveModes,e.optInteractiveMode,e.optPatientLayouts,e.optPatientLayout,e.optNodeColors,e.optNodeColor,e.optEdgeColors,e.legandNodes,e.legandPatient,e.legandChromosomes,e.searchGene,e.searchGeneResult="",e.searchPatient,e.searchPatientResult="",e.frame,e}function n(e,t,a,n){return a({container:n,elements:e,style:t,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,textureOnViewport:!1,motionBlur:!0,minZoom:1e-4,maxZoom:40,layout:{name:"preset",fit:!0}})}function o(){return[{selector:"node",style:{display:"data(display)",height:"mapData(sizeEle, 0, 50, .1, 80)",width:"mapData(sizeEle, 0, 50, .1, 80)","font-size":"data(sizeLbl)","text-valign":"center"}},{selector:'node[nodeType="patient"]',style:{"background-color":"data(color)","text-halign":"center","border-width":"data(sizeBdr)","border-color":"data(color)"}},{selector:'node[nodeType="patient"]:selected',style:{"border-color":"#FF0000"}},{selector:'node[nodeType="gene"]',style:{"background-color":"#FFFFFF","border-color":"#38347b","text-halign":"right",label:"data(id)","border-width":"data(sizeBdr)"}},{selector:'node[nodeType="gene"]:selected',style:{"border-color":"#FF0000"}},{selector:'node[nodeType="centromere"]',style:{"font-size":"24px","text-halign":"center","background-color":"#FFFFFF","border-color":"rgb(19, 150, 222)",height:"40px",width:"120px",shape:"roundrectangle",label:"  data(id)"}},{selector:"edge",style:{display:"data(display)","line-color":"data(color)","line-width":"data(sizeEle)"}}]}function r(e,t,a,n,o,r){var i=function(e){var t=new e.Signal,a=new e.Signal,n=new e.Signal,o=new e.Signal,r=new e.Signal,i=new e.Signal,s=function(){t.removeAll(),a.removeAll(),o.removeAll(),r.removeAll(),n.removeAll(),i.removeAll()},l=function(e){t.add(e),o.add(e)},c=function(e){a.add(e),r.add(e)},d=function(e){n.add(e),i.add(e)};return{geneOver:t,geneOut:a,geneClick:n,patientOver:o,patientOut:r,patientClick:i,over:l,out:c,click:d,removeAll:s}}(r);e.on("click",'node[nodeType="gene"]',i.geneClick.dispatch).on("click",'node[nodeType="patient"]',i.patientClick.dispatch).on("mouseover",'node[nodeType="gene"]',i.geneOver.dispatch).on("mouseover",'node[nodeType="patient"]',i.patientOver.dispatch).on("mouseout",'node[nodeType="gene"]',i.geneOut.dispatch).on("mouseout",'node[nodeType="patient"]',i.patientOut.dispatch);var s={};e.$('edge[edgeType!="chromosome"]').forEach(function(e){this[e.id()]={display:"none"}},s);var l={showPatientInfo:function(e){return"patient"==e.cyTarget.data().nodeType&&a.$apply(function(){t.patient=e.cyTarget.attr("patient"),t.patientChromosomes=e.cyTarget.neighborhood("node").map(function(e){return e.data().id})}),this},hidePatientInfo:function(){return a.$apply(function(){t.patient=t.patientChromosomes=null}),this},showDegreeOne:function(t){var a={};t.cyTarget.neighborhood("edge").forEach(function(e){this[e.id()]={display:"element"}},a),e.batchData(a)},hideDegreeOne:function(t){var a={};t.cyTarget.neighborhood("edge").forEach(function(e){this[e.id()]={display:"none"}},a),e.batchData(a)},showDegreeTwo:function(t){var a={};t.cyTarget.neighborhood("node").forEach(function(e){e.neighborhood("edge").forEach(function(e){this[e.id()]={display:"element"}},this)},a),e.batchData(a)},hideDegreeTwo:function(t){var a={};t.cyTarget.neighborhood("node").forEach(function(e){e.neighborhood("edge").forEach(function(e){this[e.id()]={display:"none"}},this)},a),e.batchData(a)},showOncoPrint:function(){}},c=[{name:"Hide All",register:function(){i.click(function(e){l.showOncoPrint(e)}),i.over(function(e){l.showPatientInfo(e)}),i.out(function(e){l.hidePatientInfo(e)})},unregister:function(){i.removeAll()}},{name:"Show All",register:function(){i.click(function(e){l.showOncoPrint(e)}),i.over(function(e){l.showPatientInfo(e)}),i.out(function(e){l.hidePatientInfo(e)});var t={};e.$('edge[edgeType!="chromosome"]').forEach(function(e){this[e.id()]={display:"element"}},t),e.batchData(t)},unregister:function(){i.removeAll(),e.batchData(s)}},{name:"1° When Selected",register:function(){var t={};e.$('node[nodeType="patient"]:selected').forEach(function(e){e.neighborhood("edge").forEach(function(e){this[e.id()]={display:"element"}},t)},t),e.batchData(t),e.on("select","node",function(e){l.showDegreeOne(e)}),e.on("unselect","node",function(e){l.hideDegreeOne(e)})},unregister:function(){e.batchData(s),e.off("select","node"),e.off("unselect","node")}},{name:"2° When Selected",register:function(){var t={};e.$('node[nodeType="patient"]:selected').forEach(function(e){e.neighborhood("node").forEach(function(e){e.neighborhood("edge").forEach(function(e){this[e.id()]={display:"element"}},this)},this)},t),e.batchData(t),e.on("select","node",function(e){l.showDegreeTwo(e)}),e.on("unselect","node",function(e){l.hideDegreeTwo(e)})},unregister:function(){e.batchData(s),e.off("select","node"),e.off("unselect","node")}},{name:"1° On Mouse Over",register:function(){i.click(function(e){l.showOncoPrint(e)}),i.over(function(e){l.showPatientInfo(e).showDegreeOne(e)}),i.out(function(e){l.hidePatientInfo(e).hideDegreeOne(e)})},unregister:function(){i.removeAll()}},{name:"2° On Mouse Over",register:function(){i.click(function(e){l.showOncoPrint(e)}),i.over(function(e){l.showPatientInfo(e).showDegreeTwo(e)}),i.out(function(e){l.hidePatientInfo(e).hideDegreeTwo(e)})},unregister:function(){i.removeAll()}}];t.optInteractiveModes=c,t.optInteractiveMode=t.optInteractiveModes[0],a.$watch("vm.optInteractiveMode",function(e,t){angular.isDefined(t)&&t.unregister(),angular.isDefined(e)&&e.register()})}function i(e,t,a,n){var o=[{name:"mutation","class":"edgeMutation",color:"#004358",state:"Highlight"},{name:"cnGain.1","class":"edgeCnGain1",color:"#1F8A70",state:"Highlight"},{name:"cnLoss.1","class":"edgeCnLoss1",color:"#BEDB39",state:"Highlight"},{name:"cnGain.2","class":"edgeCnGain2",color:"#FFE11A",state:"Highlight"},{name:"cnLoss.2","class":"edgeCnLoss2",color:"#FD7400",state:"Highlight"}],r={mutation:o[0],"cnGain.1":o[1],"cnLoss.1":o[2],"cnGain.2":o[3],"cnLoss.2":o[4]};n(function(){o.forEach(function(e){angular.element("."+e["class"]).css("border-color",e.color)});var t={};e.edges('edge[edgeType!="chromosome"]').forEach(function(e){this[e.id()]={color:r[e.data("edgeType")].color}},t),e.batchData(t)}),t.optEdgeColors=o,t.updateEdge=function(t){var a,n;switch(t.state){case"Highlight":t.state="Show",a="#3993fa",n={color:a};break;case"Show":t.state="Hide",a="#EEEEEE",n={color:"#FFF"};break;default:t.state="Highlight",a=t.color,n={color:a}}angular.element("."+t["class"]).css("border-color",a);var o={};e.edges('edge[edgeType="'+t.name+'"]').forEach(function(e){this.degmap[e.id()]=this.state},{degmap:o,state:n}),e.batchData(o)}}function s(e,t){e.on("pan",t.debounce(function(t){var a=Math.max(t.cy.zoom(),1),n={},o=Math.ceil(Math.max(12/a,1)),r=Math.ceil(Math.max(5/a,.5));e.nodes().forEach(function(e){this.degmap[e.id()]={sizeEle:e.degree()/this.zoom,sizeLbl:o,sizeBdr:r}},{degmap:n,zoom:a,font:o,sizeBdr:r}),e.batchData(n)},300))}function l(e,t,a,n){n.getSampleCategorizationNames().then(function(o){var r=[{name:"Default"},{name:"Gender"},{name:"Age At Diagnosis"}];angular.isDefined(o.payload.length)&&r.concat(o.payload.map(function(e){return{name:e}})),t.optNodeColors=r,t.optNodeColor=t.optNodeColors[0],a.$watch("vm.optNodeColor",function(){var a={};switch(t.optNodeColor.name){case"Default":t.legandNodes=[{name:"Patients",color:"#3993fa"}],e.$('node[nodeType="patient"]').forEach(function(e){a[e.id()]={color:"#3993fa"}});break;case"Gender":t.legandNodes=[{name:"Male",color:"blue"},{name:"Female",color:"pink"}],e.$('node[nodeType="patient"]').forEach(function(e){try{var t=e.data("patient")[0][2];a[e.id()]={color:"male"===t?"rgb(5, 108, 225)":"pink"}}catch(n){a[e.id()]={color:"#EEEEEE"}}});break;case"Age At Diagnosis":t.legandNodes=[{name:"Young",color:"green"},{name:"Old",color:"red"}],e.$('node[nodeType="patient"]').forEach(function(e){try{var t=Number(e.data("patient")[0][4]);a[e.id()]={color:"rgb("+255*t/100+","+255*(100-t)/100+",0)"}}catch(n){a[e.id()]={color:"#000000"}}});break;default:n.getSampleCategorization(t.optNodeColor.name).then(function(a){t.legandNodes=a.payload.tbl.map(function(e){return e[0]+"|"+e[1]}).filter(function(e,t,a){return a.indexOf(e)===t}).map(function(e){var t=e.split("|");return{name:t[0],color:t[1]}});for(var n=a.payload.rownames,o=a.payload.tbl,r={},i=e.$('node[nodeType="patient"]'),s=0;s<i.length;s++){var l=i[s].id();r[l]={color:"#DDDDDD"};for(var c=0;c<n.length;c++)if(l==n[c]){r[l]={color:o[c][1]};break}}})}e.batchData(a)})})}function c(e,t,a){t.optPatientLayouts=[{name:"Hobo"},{name:"Age At Diagnosis"},{name:"Gender"}],t.optPatientLayout=t.optPatientLayouts[0],a.$watch("vm.optPatientLayout",function(t){var a=e.nodes('node[nodeType="patient"]');switch(e.startBatch(),t.name){case"Hobo":a.forEach(function(e){e.position(e.data("hobo"))});break;case"Age At Diagnosis":a.forEach(function(e){try{var t=Number(e.data("patient")[0][4]);t=t.map(0,100,-3e3,3e3),e.position({y:t,x:Math.pow(t,2)/5e3-200})}catch(a){e.position({x:100,y:0})}});break;case"Gender":a.filter(function(e,t){try{return"male"==t.data("patient")[0][2].toLowerCase()}catch(a){return!1}}).forEach(function(e,t){var a=30,n=30,o=.1*(t+1),r=-1e3+(a+n*o)*Math.cos(o),i=-1200+(a+n*o)*Math.sin(o);e.position({x:r,y:i})}),a.filter(function(e,t){return angular.isUndefined(t.data("patient")[0])}).forEach(function(e,t){var a=50,n=50,o=.1*(t+1),r=-2500+(a+n*o)*Math.cos(o),i=0+(a+n*o)*Math.sin(o);e.position({x:r,y:i})}),a.filter(function(e,t){try{return"female"==t.data("patient")[0][2].toLowerCase()}catch(a){return!1}}).forEach(function(e,t){var a=30,n=30,o=.1*(t+1),r=-1e3+(a+n*o)*Math.cos(o),i=1200+(a+n*o)*Math.sin(o);e.position({x:r,y:i})})}e.endBatch()})}function d(e,t,a){e.setDataset(t.datasource).then(function(){e.getPatientHistoryTable(t.datasource).then(function(t){var n=t.payload.tbl;e.getMarkersNetwork(t.payload).then(function(e){var t=angular.fromJson(e.payload).elements;t.nodes.filter(function(e){return"patient"===e.data.nodeType}).map(function(e){var t=e.data;t.display="element",t.color="rgb(19, 150, 222)",t.sizeEle=t.degree,t.sizeLbl=12,t.sizeBdr=5,t.hobo={x:e.position.x,y:e.position.y},t.patient=this.filter(function(t){return t[0]===e.data.id})},n),t.nodes.filter(function(e){return"patient"!=e.data.nodeType}).map(function(e){var t=e.data;return t.display="element",t.color="rgb(19, 150, 222)",t.sizeEle=t.degree,t.sizeLbl=12,t.sizeBdr=5,e.locked=!0,e.selectable=!0,e.grabbable=!1,e}),t.edges.map(function(e){var t=e.data;return t.display="chromosome"==t.edgeType?"element":"none",t.color="rgb(19, 150, 222)",t.sizeEle=1,t.sizeLbl=12,e.locked=!0,e.selectable=!1,e.grabbable=!1,e}),a(t)})})})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams","cytoscape","signals","$window","_"];var u={restrict:"E",templateUrl:"app/components/markers/markers.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return u}angular.module("oncoscape").directive("osMarkers",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o){if(angular.isUndefined(o.datasource))return void t.go("datasource");var r=this;r.dataset=o.datasource,r.colnames=[],r.rows=[],r.search="",r.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var i;e.setBusy(!0),e.getDataManifest(r.dataset).then(function(t){r.colnames=t.payload.colnames,r.rows=t.payload.mtx,a(function(){i=angular.element("#metadata-datatable").dataTable({paging:!1}),n.$watch("vm.search",function(){i.api().search(r.search).draw()}),e.setBusy(!1)},0,!1)})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/metadata/metadata.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osMetadata",e)}(),function(){"use strict";function e(){function e(e,t){var a=e.getUserApi(),n=this;n.domains=a.getDomains(),n.user=a.getUser(),n.hasError=!1,n.login=function(){var e=a.login(n.user);angular.isDefined(e)?e.then(function(){n.user.authenticated?t.go("datasource"):n.hasError=!0}):t.go("datasource")}}e.$inject=["osApi","$state"];var t={restrict:"E",templateUrl:"app/components/login/login.html",replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osLogin",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.login=function(){e.go("login")}}e.$inject=["$state"];var t={restrict:"E",templateUrl:"app/components/landing/landing.html",replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osLanding",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/loader/loader.html",replace:!0};return e}angular.module("oncoscape").directive("osLoader",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o){function r(){c.fnClearTable();var e=l.filter(s.tbl,function(e){return e[0]});if(0!=e.length){var t=e.map(function(e){return e[4]}),n=e.map(function(e){return e[3]});a(function(){i.filter=l.getActiveFilter().name,i.diagnosisMin=i.diagnosisMinValue=Math.floor(Math.min.apply(null,t)),i.diagnosisMax=i.diagnosisMaxValue=Math.ceil(Math.max.apply(null,t)),i.survivalMin=i.survivalMinValue=Math.floor(Math.min.apply(null,n)),i.survivalMax=i.survivalMaxValue=Math.floor(Math.max.apply(null,n))}),c.fnAddData(e)}}if(angular.isUndefined(o.datasource))return void t.go("datasource");var i=this;i.datasource=o.datasource,i.filter,i.colnames=[],i.diagnosisMin=i.diagnosisMinValue=1,i.diagnosisMax=i.diagnosisMaxValue=99,i.survivalMin=i.survivalMinValue=0,i.survivalMax=i.survivalMaxValue=10,i.search="";var s,l=e.getPatientFilterApi();l.init(i.datasource),l.onSelect.add(r),i.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},i.applyFilter=function(){angular.element.fn.DataTable.ext.search=[function(e,t){var a=parseFloat(t[3]),n=parseFloat(t[4]);return isNaN(a)||isNaN(n)?!1:n>=i.diagnosisMin&&n<=i.diagnosisMax&&a>=i.survivalMin&&a<=i.survivalMax}],c.api().draw()},i.cohort,i.createCohort=function(){l.addFilter(i.cohort,c._("tr",{filter:"applied"}).map(function(e){return e[0]})),i.cohort=""};var c;e.setBusy(!0),e.setDataset(i.datasource).then(function(){e.getPatientHistoryTable(i.datasource).then(function(t){s=t.payload,i.colnames=s.colnames,a(function(){c=angular.element("#history-datatable").dataTable({paging:!1}),n.$watch("vm.search",function(){c.api().search(i.search).draw()}),r(),e.setBusy(!1)},0,!1)})})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/history/history.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHistory",e)}(),function(){"use strict";function e(){function e(){var e=this;e.videos=[{name:"Oncoscape + Github",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Creating Cohorts",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Patients + Markers",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Timelines",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""}]}var t={restrict:"E",templateUrl:"app/components/help/help.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHelp",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/footer/footer.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osFooter",e)}(),function(){"use strict";function e(){function e(e,t,a,n){e.onDataSource.add(function(){n(function(){r.showTools=!0})});var o=e.getUserApi();o.onLogin.add(function(){n(function(){r.showMenu=!0})}),o.onLogout.add(function(){n(function(){r.showMenu=!1})});var r=this;r.showMenu=!1,r.showTools=!1,r.toolsClick=function(){a.go("tools",{datasource:e.getDataSource()})},r.cohortClick=function(){e.toggleFilter()},r.logoutClick=function(){o.logout(),a.transitionTo("landing")}}e.$inject=["osApi","$stateParams","$state","$timeout"];var t={restrict:"E",templateUrl:"app/components/header/header.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHeader",e)}(),function(){"use strict";function e(){function e(e,t,a,n){}e.$inject=["osApi","$stateParams","$window","d3"];var t={restrict:"E",templateUrl:"app/components/filters/filters.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osFilters",e)}(),function(){"use strict";function e(){function e(e,t){var a=this;a.datasets=[],a.explore=function(a,n){e.setDataSource(n),t.go(a,{datasource:n})};var n={DEMOdz:"Glioblastoma (DEMO)",TCGAbrain:"Brain (TCGA)",TCGAbrca:"Breast (TCGA)",TCGAcoadread:"Colorectal (TCGA)",TCGAgbm:"Glioblastoma (TCGA)",TCGAhnsc:"Head + Neck (TCGA)",TCGAlgg:"Lower Grade Glioma (TCGA)",TCGAluad:"Lung Adenocarcinoma (TCGA)",TCGAlung:"Lung (TCGA)",TCGAlusc:"Lung Sasquamous Cell (TCGA)",TCGApaad:"Pancreas (TCGA)",TCGAprad:"Prostate (TCGA)"};e.setBusy(!0),e.getDataSetNames().then(function(t){var o=t.payload.datasets;a.datasets=o.map(function(e){return{name:this[e],id:e}},n),e.setBusy(!1)})}e.$inject=["osApi","$state"];var t={restrict:"E",templateUrl:"app/components/datasource/datasource.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osDatasource",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.cohorts,t.cohort}e.$inject=["osApi"];var t={restrict:"E",templateUrl:"app/components/cohort/cohort.html",replace:!0};return t}angular.module("oncoscape").directive("osCohort",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/compare/compare.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osCompare",e)}(),function(){"use strict";function e(e,t,a,n,o,r){r.log("  ___  _ __   ___ ___  ___  ___ __ _ _ __   ___ \n / _ \\| '_ \\ / __/ _ \\/ __|/ __/ _` | '_ \\ / _ \\\n| (_) | | | | (_| (_) \\__ \\ (_| (_| | |_) |  __/\n \\___/|_| |_|\\___\\___/|___/\\___\\__,_| .__/ \\___|\n                                    |_|         "),a.onerror=function(e,t,a,o,r){r||(r=new Error(e),r.fileName=t,r.lineNumber=a,r.columnNumber=o||0),n(r)},e.$on("$stateChangeStart",function(e,t){o.setBusy(!1),angular.element.fn.DataTable.ext.search=[]})}e.$inject=["$rootScope","$state","$window","$exceptionHandler","osApi","$log"],angular.module("oncoscape").run(e)}(),function(){"use strict";function e(e,t){e.state("landing",{url:"/",template:"<os-landing>",authenticate:!1}).state("help",{url:"/help",template:"<os-help>",authenticate:!1}).state("datasource",{url:"/datasource",template:"<os-datasource>",authenticate:!0}).state("tools",{url:"/tools/{datasource}",template:"<os-tools>",authenticate:!0}).state("metadata",{url:"/metadata/{datasource}",template:"<os-metadata>",authenticate:!0}).state("history",{url:"/history/{datasource}",template:"<os-history>",authenticate:!0}).state("plsr",{url:"/plsr/{datasource}",template:"<os-plsr>",authenticate:!0}).state("pca",{url:"/pca/{datasource}",template:"<os-pca>",authenticate:!0}).state("pca3d",{url:"/pca3d/{datasource}",template:"<os-pca3d>",authenticate:!0}).state("markers",{url:"/markers/{datasource}",template:"<os-markers>",authenticate:!0}).state("pathways",{url:"/pathways/{datasource}",template:"<os-pathways>",authenticate:!0}).state("timelines",{url:"/timelines/{datasource}",template:"<os-timelines>",authenticate:!0}).state("survival",{url:"/survival/{datasource}",template:"<os-survival>",authenticate:!0}).state("compare",{url:"/compare/{datasource}",template:"<os-compare>",authenticate:!0}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("oncoscape").config(e)}(),function(){"use strict";angular.module("oncoscape").constant("moment",moment).constant("d3",d3).constant("cytoscape",cytoscape).constant("signals",signals).constant("SockJS",SockJS).constant("THREE",THREE).constant("$",$).constant("_",_),Number.prototype.map=function(e,t,a,n){return(this-e)*(n-a)/(t-e)+a}}(),function(){"use strict";function e(e){e.debugEnabled(!0)}e.$inject=["$logProvider"],angular.module("oncoscape").config(e)}(),angular.module("oncoscape").run(["$templateCache",function(e){e.put("app/components/cohort/cohort.html",'<div class="row"><div class="col-xs-12 form-label"><h2>Cohorts</h2></div><div class="col-xs-12 form-item"><label>Select Cohorts</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.cohort.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.cohorts" ng-click="vm.cohort=item">{{item.name}}</li></ul></div></div><div class="col-xs-12 form-item"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name"> <span class="input-group-btn"><button class="btn btn-primary" type="button">Go</button></span></div></div></div>'),e.put("app/components/compare/compare.html",'<section class="compare-v50"><os-plsr></os-plsr></section><section class="compare-v50"><os-pca></os-pca></section>'),e.put("app/components/datasource/datasource.html",'<section class="datasource container-fluid"><div class="row"><div class="col-sm-8 col-md-6"><h1>Data Sources</h1><p>Oncoscape has analyzed and curated the following datasets hosted by The Cancer Genome Atlas (TCGA). Raw data sets for the current organ sites including all others can be found at <a href="https://tcga-data.nci.nih.gov/tcga/">TCGA Data Portal</a></p></div></div><div class="row"><ul><li ng-repeat="dataset in vm.datasets" class="col-xs-12 col-sm-6 col-lg-4"><img class="datasource-img" ng-src="/assets/images/datasets/{{dataset.id}}.png"><h2 class="datasource-lbl">{{dataset.name}}</h2><nobr><a href="" ng-click="vm.explore(\'tools\',dataset.id)">Explore</a> &nbsp;|&nbsp; <a href="" ng-click="vm.explore(\'metadata\',dataset.id)">Learn More</a></nobr></li></ul></div></section>'),e.put("app/components/footer/footer.html",'<footer class="footer container"><div class="row"><div class="col-xs-12 col-sm-6"><img class="footer-logo" src="/assets/images/logo-fred-hutchinson-cancer-research-center.png" alt="Fred Hutchinson Cancer Research Center"> <img class="footer-logo" src="/assets/images/logo-university-of-washington-medicine.png" alt="UW Medicine"> <img class="footer-logo" src="/assets/images/logo-seattle-cancer-care-alliance.png" alt="Seattle Cancer Care Alliance"></div><div class="col-xm-12 col-sm-6 text-right"><a href="https://www.facebook.com/STTRCancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-facebook-out.png" alt="Facebook"></a> <a href="https://twitter.com/sttrcancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-twitter-out.png" alt="Twitter"></a> <a href="https://plus.google.com/+fredhutch/videos" target="_blank"><img class="footer-icon" src="/assets/images/sttr-youtube-out.png" alt="YouTube"></a> <a href="http://instagram.com/FredHutch" target="_blank"><img class="footer-icon" src="/assets/images/sttr-instagram-out.png" alt="Instagram"></a> <a href="http://www.linkedin.com/company/fred-hutchinson-cancer-research-center/careers?trk=top_nav_careers" target="_blank"><img class="footer-icon" src="/assets/images/sttr-linkedin-out.png" alt="LinkedIn"></a> <a href="https://plus.google.com/116048577052683099154/posts" target="_blank"><img class="footer-icon" src="/assets/images/sttr-google-out.png" alt="Google+"></a></div></div></footer>'),e.put("app/components/filters/filters.html",'<section id="filter-dropdown" class="filters container"><div class="filters-tree" id="filters-chart"><div class="row"><div class="col-sm-8"><h2 style="color:#FFF;">My Cohorts</h2><p></p></div><div class="col-sm-4" style="text-align: right;margin-top:30px;"><div class="btn-group" role="group" aria-label="Basic example"><button type="button" class="btn btn-primary" ng-click="vm.setDisplay(\'Cluster\')">Irregular</button> <button type="button" class="btn btn-primary" ng-click="vm.setDisplay(\'Tree\')">Normal</button></div></div></div></div></section>'),e.put("app/components/header/header.html",'<div class="header"><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#"><img alt="Brand" src="/assets/images/logo.png" style="max-height:50px;"></a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" ng-if="vm.showMenu"><ul class="nav navbar-nav navbar-right"><li><a href="#datasource"><span class="glyphicon glyphicon-th"></span>Data Sources</a></li><li><a href="#help"><span class="glyphicon glyphicon-question-sign"></span>Help</a></li><li><a href="" ng-click="vm.logoutClick()"><span class="glyphicon glyphicon-user"></span>Logout</a></li></ul><ul class="nav navbar-nav navbar-right" ng-if="vm.showTools"><li><a href="" ng-click="vm.toolsClick()"><span class="glyphicon glyphicon-signal"></span>Analysis Tools</a></li></ul></div></div><div class="nav-divider"></div></nav></div><a href="https://github.com/FredHutch/Oncoscape/labels/help%20wanted" class="github" tooltip="Submit Issues" style="text-align: right;"><div class="logo"><svg aria-hidden="true" class="octicon octicon-mark-github" height="28" role="img" version="1.1" viewbox="0 0 16 16" width="28"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"></path></svg></div></a>'),e.put("app/components/help/help.html",'<section class="tools container"><div class="row"><div class="col-sm-8 col-md-6"><br><br><br></div></div><div class="row"><div class="col-xs-12 col-md-7"><h2 style="margin:0px;margin-bottom: 20px;">Now Playing &mdash; Lorum Ipsum</h2><div style="background-color:#000;text-align: center;"><video width="640" height="360" controls="" style="background-color: #000;max-width: 100%;"></video></div><h2>Video Title</h2><p>Transcription At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat</p></div><div class="col-xs-12 col-md-5" style="padding-left: 40px;"><h2 style="margin:0px;">Oncoscape Videos</h2><ul><li ng-repeat="video in vm.videos" style="clear: both;"><div style="width:30%;height:90px;background-color:#EEE;display:inline-block;float:left;margin-bottom: 20px;text-align: center;cursor: pointer;"><span class="glyphicon glyphicon-play-circle" style="font-size: 30px;padding-top:30px; color:#FFF"></span></div><div style="width:69%;display: inline-block;float:left;padding-left: 10px;"><h3 class="tools-lbl" style="margin:0px;">{{video.name}}</h3><p>{{video.desc}}</p><a href="" ng-click="vm.explore(tool.route, vm.datasource)">Watch Video</a></div></li></ul></div></div></section>'),e.put("app/components/history/history.html",'<os-tray caption="Patients" content="tray-content-block"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Filters</h2></div><div class="col-xs-12 form-item"><label>Age At Diagnosis</label><div range-slider="" min="vm.diagnosisMinValue" model-min="vm.diagnosisMin" max="vm.diagnosisMaxValue" model-max="vm.diagnosisMax" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-12 form-item"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMin" max="vm.survivalMaxValue" model-max="vm.survivalMax" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-12 form-item"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width: 100%;" ng-model="vm.search"></div></div><os-cohort></os-cohort></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Patient Data</h2><table id="history-datatable" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></div></section>'),
e.put("app/components/landing/landing.html",'<div class="landing container"><div class="row" style="padding-top:20px;"><h2>Bridging Cancer Research and Clinical Care</h2></div><div class="row" style="padding-top:20px;"><div class="col-sm-8"><p>Oncoscape is developed at the Fred Hutchinson Cancer Research Center under the auspices of the Solid Tumor Translational Research initiative. Oncoscape is a web-based, menu-driven analysis and visualization platform for large-scale, heterogeneous clinical and molecular patient timeline data as exemplified by the Fred Hutch HIDRA database. Oncoscape was conceived, and is managed, by a Steering Committee comprising: <a href="https://www.fredhutch.org/en/labs/profiles/holland-eric.html">Eric Holland</a>, <a href="http://www.sttrcancer.org/en/contact-us/horse-grant-bio.html">Desert Horse-Grant</a>, <a href="https://www.linkedin.com/in/lisa-mcferrin-9758b029">Lisa McFerrin</a>, <a href="https://www.linkedin.com/in/hbolouri">Hamid Bolouri</a>, <a href="https://www.linkedin.com/in/jenny-zhang-ba62a2104">Jenny Zhang</a>, <a href="https://www.linkedin.com/in/gretchenh">Gretchen Heinrich</a>, <a href="https://www.linkedin.com/in/robert-mcdermott-a77b9011">Robert McDermott</a> and <a href="https://www.linkedin.com/in/zager">Michael Zager</a>.</p><p class="">Through its easy point-and-click browser interface, Oncoscape will become an essential tool for doctors and researchers interested in:</p><ul class=""><li>Comparing patients or populations across an array of features, like genetic alterations (CNV, IHC, sequencing, expression) or clinical elements (treatment regimens, diagnostics, outcomes)</li><li>Defining cohorts based on selected traits – identifying “patients like me”</li><li>Aligning patient histories according to timeline events: diagnosis, treatment, progression, survival</li><li>Performing powerful and integrated statistical analysis: Principle Component Analysis, Partial least squares regression, Kaplan-Meier curves, enrichment scores</li><li>Creating high quality visualizations of molecular/clinical data</li></ul><p class="">By providing a portal equipped with rich data, powerful statistics and a simple interface, Oncoscape not only empowers users to quickly answer questions themselves but also expedites the process of discovering novel patterns and relationships. This can lead to numerous possible findings, including optimized drug therapies for individual patients, identification of novel regulatory pathways, or even the need to reassess adherence strategies.</p></div><div class="col-sm-4"><os-login></os-login></div></div></div>'),e.put("app/components/loader/loader.html",'<div class="loader-modal"><div class="loader"><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__ball"></div></div></div>'),e.put("app/components/markers/markers.html",'<os-tray content="tray-content-block" change="vm.resize()"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Options</h2></div><div class="col-xs-12 form-item"><label>Interactive Mode</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optInteractiveMode.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optInteractiveModes" ng-click="vm.optInteractiveMode=item">{{item.name}}</li></ul></div></div><div class="col-xs-12 form-item"><label>Patient Layout</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optPatientLayout.name}} <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li style="padding:5px;font-weight:600;">Patient Distribution</li><li ng-repeat="item in vm.optPatientLayouts" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="vm.optPatientLayout = item" ng-checked="optPatientLayout==item">{{item.name}}</label></li></ul></div></div><div class="col-sm-12 form-item"><label>Patient Color</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optNodeColor.name}} <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li style="padding:5px;font-weight:600;">Patients Colors</li><li ng-repeat="item in vm.optNodeColors" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="vm.optNodeColor = item" ng-checked="vm.optNodeColor==item"> {{item.name}}</label></li></ul></div></div><div class="col-sm-12 form-item"><label>Edge Colors</label> <span ng-repeat="item in vm.optEdgeColors" class="legend-bar btn btn-default filter-button {{item.class}}" ng-click="vm.updateEdge(item); $event.stopPropagation();">{{item.name}} ({{item.state}})</span></div><div class="col-sm-12 form-item"><label>Patient Search {{vm.searchPatientResult}}</label> <input type="text" class="form-control" ng-model="vm.searchPatient" placeholder="Enter Patient Id"></div><div class="col-sm-12 form-item"><label>Gene Search {{vm.searchGeneResult}}</label> <input type="text" class="form-control" ng-model="vm.searchGene" placeholder="Enter Gene Name"></div></div><os-cohort></os-cohort><div class="row"><div class="col-xs-12 form-label"><h2>Legend</h2><span class="legend" ng-repeat="item in vm.legandNodes"><span class="legend-dot" style="background-color:{{item.color}}"></span> {{item.name}}</span></div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Patients + Markers</h2></div><div id="markers-chart" class="markers-chart"></div></section><section ng-show="vm.patient" class="container-fluid" style="position:absolute;bottom:0px;margin-right: 300px;z-index: 999;"><div class="row" style="background-color:#FFF"><div class="col-xs-12 legend"><ul style="float:left;"><li class="legend-section">Patient Information</li><li>PID: {{vm.patient[0][0]}}</li><li>GENDER: {{vm.patient[0][2]}}</li><li>STATUS: {{vm.patient[0][6]}}</li><li>DIAGNOSED: {{vm.patient[0][4]}} years old</li><li>SURVIVED: {{vm.patient[0][3]}} years</li><li>PROGRESSION: {{vm.patient[0][5]}}</li></ul><ul><li class="legend-section">Genes ({{vm.patientChromosomes.length}})</li><li><span ng-repeat="item in vm.patientChromosomes">{{item}} |</span></li></ul></div></div></section>'),e.put("app/components/login/login.html",'<form class="login"><h3 class="login-header">Login</h3><div class="login-body"><div class="alert alert-danger" role="alert" ng-show="vm.hasError"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> <span class="sr-only">Error:</span> Invalid Credentials</div><fieldset class="form-group"><span for="domain" class="small">Affiliation</span><select id="domain" class="form-control" ng-options="option.name for option in vm.domains track by option.name" ng-model="vm.user.domain"></select></fieldset><fieldset class="form-group"><span class="form-control-label small" for="username">Username</span> <input id="username" class="form-control input-sm" type="text" placeholder="Username" ng-model="vm.user.name"></fieldset><fieldset class="form-group" ng-show="vm.user.domain.name!=\'Guest\'"><span class="form-control-label small" for="password">Password</span> <input id="password" class="form-control" type="password" placeholder="Password" ng-model="vm.user.password"></fieldset><button class="btn btn-default" ng-click="vm.login()">Login</button></div></form>'),e.put("app/components/metadata/metadata.html",'<os-tray caption="Patients" content="tray-content-block"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Search</h2></div><div class="col-xs-12 form-item"><input type="text" class="ngrs-range-slider ngrs-range-slider-no-pad" style="width:100%" ng-model="vm.search"></div><div class="col-xs-12 form-label"><h2>Information</h2><label>Raw data was provided by <a href="http://cancergenome.nih.gov/">The Cancer Genome Atlas</a>. Processing of data was conducted by the <a href="http://www.sttrcancer.org/en.html">Solid Tumor Translational Research Organization</a> in conjuntion with the <a href="http://www.fhcrc.org">Fred Hutchinson Cancer Research Center</a>, <a href="http://www.uwmedicine.org/">UW Medicine</a> and <a href="http://www.scca.org">The Seattle Cancer Care Alliance</a>.</label></div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>{{vm.dataset}} Metadata</h2><table id="metadata-datatable" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></div></section>'),e.put("app/components/pathways/pathways.html",'<os-tray content="tray-content-block"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Search</h2></div><div class="col-xs-12 form-item"><input type="text" class="ngrs-range-slider" style="width:100%" ng-model="vm.search"></div><div class="col-xs-12 form-label"><h2>Legend</h2><span class="legend-bar" style="border-color: green">Activation</span> <span class="legend-bar" style="border-color: red">Inhibition</span> <span class="legend-bar" style="border-color: #38347B">Modification</span> <span class="legend-bar" style="border-color: #056ce1">Genes</span></div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Pathways</h2><div id="gbm-chart" class="pathways-chart"></div></div></section><div class="modal fade pathways" id="gbm-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div>'),e.put("app/components/pca/pca.html",'<os-tray content="tray-content-block" change="vm.resize($event)"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Filters</h2></div><div class="col-xs-12 form-item"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div><div class="col-xs-12 form-item"><label>Patient Colors</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optNodeColor.name}} <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optNodeColors" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="vm.optNodeColor = item" ng-checked="vm.optNodeColor==item"> {{item.name}}</label></li></ul></div></div><div class="col-xs-12 form-item"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width: 100%;" ng-model="vm.search"></div></div><os-cohort></os-cohort><div class="row"><div class="col-xs-6 form-label"><h2>Legend</h2><span class="circle" style="background-color:black;width:10px;height: 10px;margin-right:10px;"></span>Patients</div><div class="col-xs-6 form-label"><h2>Variance</h2>PC1: {{vm.pc1}}%<br>PC2: {{vm.pc2}}%</div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Principal Component Analysis</h2><div id="pca-chart" class="pca"></div></div></section>'),e.put("app/components/pca3d/pca3d.html",'<section id="pca-chart" class="pca container-fluid" style="position: absolute;left:0px;top:0px;right: 0px;bottom: 0px;padding:0px;margin:0px;overflow: hidden;"></section>'),e.put("app/components/plsr/plsr.html",'<os-tray content="tray-content-block" change="vm.resize($event)"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Filters</h2></div><div class="col-xs-12 form-item"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div><div class="col-xs-12 form-item"><label>Age At Diagnosis</label><div range-slider="" min="vm.deathMinValue" model-min="vm.deathMinFilter" max="vm.deathMaxValue" model-max="vm.deathMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div><div class="col-xs-12 form-item"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMinFilter" max="vm.survivalMaxValue" model-max="vm.survivalMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div></div><os-cohort></os-cohort><div class="row"><div class="col-xs-12 form-label"><h2>Legend</h2><span class="legend-bar" style="border-color: #1396de">Age At Diagnosis</span> <span class="legend-bar" style="border-color: #38347b">Survial</span> <span class="legend"><span class="legend-dot" style="background-color:#000"></span>Genes</span></div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Partial Least Squares Regression</h2><div id="plsr-chart" class="plsr"></div></div></section><div class="modal fade plsr-webpage" id="plsr-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div>'),e.put("app/components/subnav/subnav.html",'<div class="subnav"><div class="btn-group" style="float:right"><button type="button" class="btn btn-primary" ng-click="vm.toolsClick()">Analysis Tools</button> <button type="button" class="btn btn-primary" ng-click="vm.cohortClick()">Cohorts</button></div><h2>{{vm.tool}} &mdash; {{vm.filter}}</h2></div>'),e.put("app/components/survival/survival.html",'<os-tray caption="Patients" content="tray-content-block"><section class="tray-content"><os-cohort></os-cohort></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Patient Survival</h2><div style="text-align: center;"><img id="survival-img" style="width:100%; height: auto; margin:auto;"></div></div></section>'),e.put("app/components/timelines/timelines.html",'<section class="timelines container container-filters"><h2>Timelines</h2><div class="row"><div class="col-xs-3" style="padding-right:20px;"><label>Event Visibility</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Select Events <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.events" ng-click="vm.eventClick(item)" style="border:0px solid; border-left-width: 5px;" ng-style="{\'border-color\':item.color}">{{item.name}} ({{item.selected}})</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Event Alignment</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.align.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.events" ng-click="vm.align = item">{{item.name}}</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Feature To Compare</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.feature.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.features" ng-click="vm.feature=item">{{item.name}}</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Sort Patients By</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.sort.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.features" ng-click="vm.sort = item">{{item.name}}</li></ul></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section class="timelines container-fluid container-content" style="position:relative;padding-top:25px;"><h5 class="timelines-lbl-feature" style="padding-left:50px;position:absolute;top:20px;"><span class="glyphicon glyphicon-align-left" style="color:rgb(89, 165, 251);"></span> {{vm.feature.name}}</h5><h5 style="padding-left:50px;position:absolute; bottom:50px;" class="timelines-lbl-events"><ul class="timeline-events"><li ng-repeat="item in vm.events" ng-click="vm.eventClick(item)" ng-style="item.selected && {\'border-color\':item.color}">{{item.name}}</li></ul></h5><div id="timelines-chart" style="height:1200px;"></div></section>'),e.put("app/components/tools/tools.html",'<section class="tools container-fluid"><div class="row"><div class="col-sm-8 col-md-6"><h1>Analysis Tools</h1></div></div><div class="row"><ul><li ng-repeat="tool in vm.tools" class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><img class="tools-img" ng-src="/assets/images/datasets/{{tool.img}}"><div class="tools-copy"><h2 class="tools-lbl">{{tool.name}}</h2><a href="" ng-click="vm.explore(tool.route, vm.datasource)">Explore</a></div></li></ul></div></section>'),e.put("app/components/tray/tray.html",'<div class="tray {{vm.trayClass}}" locked="true"><ng-transclude></ng-transclude><i class="glyphicon glyphicon-remove tray-sticky-icon {{vm.iconClass}}" ng-click="vm.toggle()"></i></div>')}]);
//# sourceMappingURL=../maps/scripts/app-5669038527.js.map
