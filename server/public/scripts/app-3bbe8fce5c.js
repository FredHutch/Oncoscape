!function(){"use strict";angular.module("oncoscape",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","ui-rangeSlider","toastr"])}(),function(){"use strict";function e(){function e(e){var t=this;t.trayClass=Math.random().toString(36).substring(3),t.iconClass=Math.random().toString(36).substring(3);var a=!0;t.toggle=function(){var i=angular.element("."+t.trayClass),s=angular.element("."+t.iconClass),r=angular.element("."+t.content);a=!a,s.addClass(a?"fa-lock":"fa-unlock-alt").removeClass(a?"fa-unlock-alt":"fa-lock"),i.attr("locked",a?"true":"false"),a?(r.removeClass("tray-content-block-collapsed"),i.unbind("mouseover",n).unbind("mouseout",o).removeClass("tray-collapsed"),e(function(){t.change()})):(r.addClass("tray-content-block-collapsed"),i.addClass("tray-collapsed").bind("mouseover",n).bind("mouseout",o),e(function(){t.change()}))};var n=function(){angular.element("."+t.trayClass).removeClass("tray-collapsed")},o=function(){angular.element("."+t.trayClass).addClass("tray-collapsed")}}e.$inject=["$timeout"];var t={restrict:"E",templateUrl:"app/components/tray/tray.html",scope:{caption:"@",content:"@",change:"&"},controller:e,controllerAs:"vm",bindToController:!0,replace:!0,transclude:!0};return t}angular.module("oncoscape").directive("osTray",e)}(),function(){"use strict";function e(){function e(e,t,a){if(angular.isUndefined(a.datasource))return void t.go("datasource");var n=this;n.datasource=a.datasource,n.tools=[{name:"Markers + Patients",route:"markers",img:"markers.png",copy:"Link copy number variation and mutation data to patients."},{name:"Timelines",route:"timelines",img:"timelines.png",copy:""},{name:"Pathways",route:"pathways",img:"pathways.png",copy:"Map patient specific expression levels on a hand curated network of genes."},{name:"PLSR",route:"plsr",img:"plsr.png",copy:"Use linear regression to correlate genes with clinical features using RNA expression."},{name:"PCA",route:"pca",img:"pca.png",copy:"Two dimensional view of per sample expression data."},{name:"Survival",route:"survival",img:"survival.png",copy:"Compare survival rates of selected patients against the remaining population in a Kaplan Meier plot."},{name:"Patient Data",route:"history",img:"history.png",copy:""},{name:"MetaData",route:"metadata",img:"metadata.png",copy:""}],n.explore=function(e,a){t.go(e,{datasource:a})}}e.$inject=["osApi","$state","$stateParams"];var t={restrict:"E",templateUrl:"app/components/tools/tools.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osTools",e)}(),function(){"use strict";function e(){function e(e,t,a){if(angular.isUndefined(a.datasource))return void t.go("datasource");var n=function(){angular.element(".tool-menu").removeClass("tray-collapsed-left")},o=function(){angular.element(".tool-menu").addClass("tray-collapsed-left")},i=angular.element(".tool-menu");i.bind("mouseover",n).bind("mouseout",o);var s=this;s.datasource=a.datasource,s.tools=[{name:"Markers + Patients",route:"markers",img:"markers.png",copy:"Link copy number variation and mutation data to patients."},{name:"Timelines",route:"timelines",img:"timelines.png",copy:""},{name:"Pathways",route:"pathways",img:"pathways.png",copy:"Map patient specific expression levels on a hand curated network of genes."},{name:"PLSR",route:"plsr",img:"plsr.png",copy:"Use linear regression to correlate genes with clinical features using RNA expression."},{name:"PCA",route:"pca",img:"pca.png",copy:"Two dimensional view of per sample expression data."},{name:"Survival",route:"survival",img:"survival.png",copy:"Compare survival rates of selected patients against the remaining population in a Kaplan Meier plot."},{name:"Patient Data",route:"history",img:"history.png",copy:""},{name:"MetaData",route:"metadata",img:"metadata.png",copy:""}],s.explore=function(e,a){t.go(e,{datasource:a})}}e.$inject=["osApi","$state","$stateParams"];var t={restrict:"E",templateUrl:"app/components/toolmenu/toolmenu.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osToolMenu",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i,s,r,l){if(angular.isUndefined(n.datasource))return void t.go("datasource");var c,d,u,p,m,g=0,h=!1;o.addEventListener("keydown",function(e){16==e.keyCode&&(h=!0)},!1),o.addEventListener("keyup",function(e){16==e.keyCode&&(h=!1)},!1);var v=this;v.selShow=!1,v.selPatient,v.selEvent,v.selFields=[],v.datasource=n.datasource,v.optCohortPatients,v.optCohortPatient,v.optCohortModes,v.optCohortMode,v.timescaleunit,v.timescales,v.timescale,v.features,v.feature,v.events,v.sorts,v.sort,v.align;var f,b,y=angular.element("#timelines-chart"),w=r.select("#timelines-chart").append("svg").attr("id","chart").style({width:"100%"}),x=w.append("g").attr({"class":"axis"}).style({"shape-rendering":"crispEdges","stroke-width":"1.0",stroke:"#000",fill:"none"}),C=w.append("svg").attr({"class":"bars-svg"}),M=C.append("rect").attr({width:y.width(),height:o.innerHeight-75-10-130-50}).style({fill:"#FFFFFF"}),k=C.append("g").attr({"class":"bars"}),P=function(){if(!h){var e=Math.max(g,r.event.scale),t=r.event.translate[1],a=o.innerHeight-75-10-130-50,n=20*c.patients.length*e,i=a-n;t>0&&(t=0),i>t&&(t=i),f.translate([r.event.translate[0],t]);var s=20*e,l=a/s,d=Math.abs(t/s);b.y(r.scale.linear().range([0,a]).domain([d,d+l])),k.attr("transform","translate(1,"+t+")scale(1,"+e+")")}},T=function(){h||(r.event.target.clear(),r.select(this).call(r.event.target))},A=function(){if(!h)return r.event.target.clear(),void r.select(this).call(r.event.target);var e=b.extent(),t=Math.floor(e[0][1]),a=Math.floor(e[1][1]);k.selectAll("g.timeline").each(function(e,n){var o=r.select(this.firstChild);o.classed("timeline-selected",n>=t&&a>=n)})},S=function(){r.event.target.clear(),r.select(this).call(r.event.target)},E=function(){var e=20,t=o.innerHeight-75-10-130,n=y.width();c=D(d,v.align,v.sort),p=r.scale.linear().domain(c.bounds).range([10,n-10]),m=r.scale.linear().domain([0,c.patients.length]).range(0,t-50),g=(t-50)/(20*c.patients.length),w.attr({height:t+"px"}),C.attr({height:t-50+"px",width:n+"px"}),M.attr({height:t-50+"px",width:n+"px"}),k.attr("transform","scale(1,"+g+")");var i=k.selectAll("g.timeline").data(c.patients);i.exit().remove(),i.enter().append("g").attr({"class":"timeline"}).on("mousedown",function(){h||k.selectAll(".timeline-selected").classed("timeline-selected",!1)}),i.attr({width:n,height:e,transform:function(t,a){return"translate(0,"+a*e+")"}}).append("rect").attr({"class":"timeline-row-selected",width:"0px",height:e}).style({fill:"#EEEEEE"}),"Highlight"==v.optCohortMode.name&&"*"!=v.optCohortPatient.ids?i.each(function(e,t){var a=v.optCohortPatient.ids.indexOf(e.id)>=0,n=r.select(this.firstChild);n.classed("timeline-selected",a)}):i.each(function(e,t){var a=r.select(this.firstChild);a.classed("timeline-selected",!1)});var l=i.selectAll("rect.event").data(function(e){return e.filteredEvents});l.exit().remove(),l.enter().append("rect").attr({"class":"event"}).on("mouseover",function(){var e=u[this.__data__.id];v.selPatient=e.PatientID,v.selEvent=e.Name;var t=[];for(var n in e.Fields)null!=e.Fields[n]&&("date"==n&&angular.isArray(e.Fields[n])?(t.push({name:"Start Date",value:e.Fields[n][0]}),t.push({name:"End Start",value:e.Fields[n][1]})):t.push({name:n,value:e.Fields[n]}));v.selShow=!0,v.selFields=t,a.$apply()}).on("mouseout",function(){v.selShow=!1,a.$apply()}),l.transition().style({fill:function(e){return e.color}}).attr({height:function(t){return"Radiation"==t.name||"Drug"==t.name?e/2:e},width:function(e){return null==e.endValue?3:p(e.endValue)-p(e.startValue)},x:function(e){return Math.round(p(e.startValue))},y:function(t){return"Radiation"==t.name?e/2:0}});var E=r.svg.axis().scale(p).orient("bottom").ticks(5);"Log"==v.timescale.name?(E=E.tickFormat(function(e){var t=0>e?-1:1;return Math.round(t*(Math.pow(2,Math.abs(e))-1)*100)/100}),v.timescaleunit="Days"):(E=E.tickFormat(function(e){return s.unix(e).year()}),v.timescaleunit="Year"),b=r.svg.brush().x(p).y(r.scale.linear().range([0,t]).domain([0,c.patients.length])).on("brush",A).on("brushstart",T).on("brushend",S),M.call(b),M.on("mousedown",function(){h||k.selectAll(".timeline-selected").classed("timeline-selected",!1)}),f=r.behavior.zoom().x(p).y(m).translate([0,0]).scale(1,g).on("zoom",P),M.call(f),x.attr({width:100,transform:function(){return"translate(0,"+(t-50)+")"}}),x.call(E)},D=function(e,t,a){var n={};return n.events=v.events.filter(function(e){return e.selected}),n.patients=e.filter(function(e){return e.hasOwnProperty("__"+this.align)?this.filter&"*"!==this.ids&&-1==this.ids.indexOf(e.id)?!1:!0:!1},{align:t.name,filter:"Filter"==v.optCohortMode.name,ids:v.optCohortPatient.ids}),"Survival"==a.name&&(n.patients=n.patients.filter(function(e){return angular.isUndefined(e.__Status)?!1:angular.isUndefined(e.__Status.start)?!1:!0})),n.patients=n.patients.sort(function(e,t){return e.calcEvents[a.index].value>t.calcEvents[a.index].value?1:-1},a),n.patients.forEach(function(e){e.filteredEvents=e.dateEvents.filter(function(e){for(var t=0;t<this.length;t++)if(this[t].name==e.name)return!0;return!1},n.events),e.filteredEvents.forEach(function(e){e.startValue=v.timescale.timeFn(e.start+this),e.endValue=null!=e.end?v.timescale.timeFn(e.end+this):null},-e["__"+this.align.name].start)},{align:t,events:n.events}),n.bounds=n.patients.reduce(function(e,t){var a=t.filteredEvents.reduce(function(e,t){return[Math.min(t.startValue,e[0]),Math.max(null==t.endValue?t.startValue:t.endValue,e[1])]},[1/0,-(1/0)]);return[Math.min(a[0],e[0]),Math.max(a[1],e[1])]},[1/0,-(1/0)]),n};!function(){var t=function(e){var t=e.name,a="Birth"===t?"#17becf":"Diagnosis"===t?"#8c564b":"Pathology"===t?"#7f7f7f":"Progression"===t?"#1f77b4":"Absent"===t?"#000000":"Status"===t?"#bcbd22":"Radiation"===t?"#e7969c":"Procedure"===t?"#ff7f0e":"Encounter"===t?"#d62728":"Drug"===t?"#9467bd":"black";return a},n=function(e){return Object.keys(e).map(function(e){var a={name:e,selected:!0};return a.color=a.__color=t(a),a})},i=function(e){return e[0].calcEvents.map(function(e,t){return{name:e.name,index:t}})},r=function(e){e=Object.keys(e).map(function(t){var a=e[t];return a.id=t,a});for(var a=0;a<e.length;a++){var n=e[a],o=s,i="YYYY-MM-DD",r=n.dateEvents.filter(function(e){return"single"===e.eventOrder}).map(function(e){return{start:o(e.date,i).unix(),end:null,name:e.name,id:e.eventID}}),l=n.dateEvents.filter(function(e){return"end"===e.eventOrder}).map(function(e){return{end:o(e.date,i).unix(),id:e.eventID}}),c=n.dateEvents.filter(function(e){return"start"===e.eventOrder}).map(function(e){return{start:o(e.date,i).unix(),name:e.name,id:e.eventID}});c.forEach(function(e){e.end=l.filter(function(t){return t.id==e.id})[0].end}),n.dateEvents=c.length>0?c.concat(r):r,n.dateEvents.forEach(function(e){e.color=t(e),n["__"+e.name]=e})}return e};e.setBusy(!0)("Loading Dataset"),e.setDataset(v.datasource).then(function(){e.getTimelines().then(function(t){v.timescales=[{name:"Log",timeFn:function(e){return(0>e?-1:1)*Math.log(Math.abs(1e3*e/864e5)+1)/Math.log(2)}},{name:"Linear",timeFn:function(e){return e}}],v.timescale=v.timescales[0],d=r(t.payload.pts),u=t.payload.events,v.sorts=i(d);var s=i(d);s.unshift({index:-1,name:"None"}),v.features=s,v.feature=v.features[0],v.events=n(t.payload.eventTypes),v.sort=v.sorts[1],v.events.forEach(function(e){"Birth"==e.name&&(e.selected=!1,e.color="#FEFEFE"),"Diagnosis"==e.name&&(this.align=e)},v),a.$watchGroup(["vm.feature","vm.sort","vm.align","vm.timescale"],E),angular.element(o).bind("resize",E),$(v,e),E(),e.setBusy(!1)})})}();var $=function(e,t){var n=t.getCohortPatient();e.optCohortModes=[{name:"Highlight"},{name:"Filter"}],e.optCohortMode=e.optCohortModes[1],e.optCohortPatients=n.get(),e.optCohortPatient=e.optCohortPatients[0],e.addCohortPatient=function(){var t="TL "+s().format("- H:mm - M/D/YY"),a=k.selectAll(".timeline-selected")[0].map(function(e){return e.__data__.id}),n={name:t,ids:a};e.optCohortPatients.push(n),e.optCohortPatient=n},a.$watch("vm.optCohortMode",E),a.$watch("vm.optCohortPatient",E)};v.resize=function(){l.debounce(E,300)},v.updateEventColor=function(e){e.selected=!e.selected,e.color=e.selected?e.__color:"#FEFEFE",E()}}e.$inject=["osApi","$state","$scope","$stateParams","$window","$document","moment","d3","_"];var t={restrict:"E",templateUrl:"app/components/timelines/timelines.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osTimelines",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.message="Robert",t.datasets=[],e.setBusy(!0),e.getDataSetNames().then(function(a){t.datasets=a.payload.datasets,e.setBusy(!1)})}e.$inject=["osApi"];var t={restrict:"E",templateUrl:"app/components/test/test.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osTest",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o){function i(t){e.setBusy(!0),e.getCalculatedSurvivalCurves(t,"").then(function(t){angular.element("#survival-img").attr("src",t.payload),e.setBusy(!1)})}if(angular.isUndefined(o.datasource))return void t.go("datasource");var s,r=e.getCohortPatient(),l=this;l.datasource=o.datasource,l.optCohortPatients=r.get(),l.optCohortPatient=l.optCohortPatients[0],n.$watch("vm.optCohortPatient",function(){var e=l.optCohortPatient.ids;if("*"==e)e=s;else{var t=l.optCohortPatient.ids;e=s.filter(function(e){return t.indexOf(e)>=0}),i(e)}}),e.setBusy(!0),e.setDataset(l.datasource).then(function(){e.getPatientHistoryTable(l.datasource).then(function(e){s=e.payload.tbl.map(function(e){return e[0]}),i(s)})})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/survival/survival.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osSurvival",e)}(),function(){"use strict";function e(){function e(e,t){var a=this;a.tool="Pathways",a.filter="DemoDZ",a.toolsClick=function(){t.go("tools",{datasource:a.datasource})},a.cohortClick=function(){e.toggleFilter()}}e.$inject=["osApi","$state"];var t={restrict:"E",templateUrl:"app/components/subnav/subnav.html",replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osSubnav",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i,s,r,l,c){if(angular.isUndefined(a.datasource))return void t.go("datasource");var d,u,p,m,g,h,v,f=i.select("#plsr-chart").append("svg").attr("id","chart"),b=i.select("body").append("div").attr("class","tooltip plsr-tooltip"),y=e.getCohortGene(),w=this;w.datasource=a.datasource,w.deathMinFilter=w.deathMinValue=45,w.deathMaxFilter=w.deathMaxValue=66,w.survivalMinFilter=w.survivalMinValue=3,w.survivalMaxFilter=w.survivalMaxValue=7,w.geneSets=[],w.geneSet=null,w.optCohortGenes=y.get(),w.optCohortGene=w.optCohortGenes[0],w.frame,w.tip=null,w.addCohortGene=function(){var e="PLSR "+s().format("- H:mm:ss - M/D/YY"),t=f.selectAll(".plsr-node-selected")[0].map(function(e){return e.__data__.name.toUpperCase()}),a={name:e,ids:t};w.optCohortGenes.push(a),w.optCohortGene=a},o.$watch("vm.optCohortGene",function(){var e=w.optCohortGene.ids;"*"==e?f.selectAll(".plsr-node-selected").classed("plsr-node-selected",!1):f.selectAll("circle").classed("plsr-node-selected",function(){return e.indexOf(this.__data__.name)>=0})}),e.setBusy(!0)("Loading Dataset"),e.setDataset(w.datasource).then(function(t){var a=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});a=a[a.length-1].replace(".RData",""),e.setBusyMessage("Creating PLSR Matrix"),e.getPLSR(w.datasource,a).then(function(){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(t){w.geneSets=t.payload,w.geneSet=w.geneSets[0],e.setBusyMessage("Loading Patients"),e.getSummarizedPLSRPatientAttributes().then(function(e){var t=e.payload;w.deathMinValue=Math.floor(t.AgeDx[0]/365.24),w.deathMaxValue=Math.floor(t.AgeDx[4]/365.24),w.survivalMinValue=Math.floor(t.Survival[0]/365.24),w.survivalMaxValue=Math.floor(t.Survival[4]/365.24),o.$watch("vm.geneSet",function(){w.update()})})})})}),w.update=function(){function t(){d=l.innerWidth-100,u=l.innerHeight-190,"true"==angular.element(".tray").attr("locked")&&(d-=300),f.attr("width","100%").attr("height",u),p=i.scale.linear().domain([-g,g]).range([0,d]).nice(),m=i.scale.linear().domain([-h,h]).range([u,0]).nice()}function a(e,a,n){g=.9*e,h=.9*e,t(),v=i.svg.brush().x(p).y(m).on("brushend",function(){var e=v.extent();f.selectAll("circle").classed("plsr-node-selected",function(t){return t[0]>e[0][0]&&t[0]<e[1][0]&&t[1]>e[0][1]&&t[1]<e[1][1]}),i.select(this).transition().duration(300).call(v.extent([[0,0],[0,0]]))}),f.call(v);var s=f.selectAll("circle").data(n,function(e){return e});s.enter().append("circle").attr({"class":"plsr-node",cx:.5*d,cy:.5*u,r:3}).style("fill-opacity","0").on("mouseover",function(e){b.transition().duration(200).style("opacity",1),b.html(e.name).style("left",i.event.pageX+15+"px").style("top",i.event.pageY-15+"px")}).on("mouseout",function(){b.transition().duration(500).style("opacity",0)}).on("click",function(e){angular.element("#plsr-webpage").modal();var t="https://www.genecards.org/cgi-bin/carddisp.pl?gene="+e.name;o.$apply(function(){w.frame=r.trustAsResourceUrl(t)})}),s.transition().duration(750).delay(function(e,t){return t/300*500}).attr("cx",function(e){return p(e[0])}).attr("cy",function(e){return m(e[1])}).style("fill-opacity",1),s.exit().transition().duration(600).delay(function(e,t){return t/300*500}).attr("cx",.5*d).attr("cy",.5*u).style("fill-opacity","0").remove();var l=f.selectAll("line").data(a);l.enter().append("line").attr({"class":"line","stroke-width":3,x1:p(0),y1:m(0),x2:p(0),y2:m(0)}).style("stroke",function(e){return e.name.indexOf("Age")?"#1396de":"#38347b"}),l.transition().duration(900).attr({x1:p(0),y1:m(0),x2:function(e){return p(e[0])},y2:function(e){return m(e[1])}}),l.exit().remove();var c=f.selectAll("text").data(a);c.enter().append("text").attr({"class":"text",x:.5*d,y:.5*u,"text-anchor":function(e){return e[0]>0?"start":"end"}}).text(function(e){return e.name}).style({fill:"black","text-anchor":"middle"}),c.transition().duration(900).attr({x:function(e){return p(e[0])},y:function(e){return m(e[1])}}),c.exit().remove()}e.setBusyMessage("Calculating PLSR");var n=[{name:"Survival",low:365.24*Number(w.survivalMinFilter),high:365.24*Number(w.survivalMaxFilter)},{name:"AgeDx",low:365.24*Number(w.deathMinFilter),high:365.24*Number(w.deathMaxFilter)}];e.getCalculatedPLSR(w.geneSet,n).then(function(t){e.setBusyMessage("Rendering PLSR");var n=t.payload,o=n.loadings.map(function(e,t){return e.name=this[t],e},n.loadingNames),i=n.vectors.map(function(e,t){return e.name=this[t],e},n.vectorNames),s=1.2*n.maxValue;a(s,i,o),e.setBusy(!1)}),w.resize=function(){t(),f.selectAll("circle").attr({cx:function(e){return p(e[0])},cy:function(e){return m(e[1])}}),f.selectAll("text").attr({x:function(e){return p(e[0])},y:function(e){return m(e[1])}}),f.selectAll("line").attr({x1:p(0),y1:m(0),x2:function(e){return p(e[0])},y2:function(e){return m(e[1])}})},angular.element(l).bind("resize",c.debounce(w.resize,300))}}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3","moment","$sce","$window","_"];var t={restrict:"E",templateUrl:"app/components/plsr/plsr.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPlsr",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i,s,r){function l(){requestAnimationFrame(l),b.update()}if(angular.isUndefined(a.datasource))return void t.go("datasource");var c=this;c.datasource=a.datasource,c.geneSets=[],c.geneSet=null,c.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var d,u=angular.element("#pca-chart");e.setBusy(!0)("Loading Dataset"),e.setDataset(c.datasource).then(function(t){var a=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});a=a[a.length-1].replace(".RData",""),e.setBusyMessage("Creating PCA Matrix"),e.getPCA(c.datasource,a).then(function(){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(e){c.geneSets=e.payload,c.geneSet=c.geneSets[0],o.$watch("vm.geneSet",function(){p()})})})});var p=function(){e.setBusyMessage("Calculating PCA"),e.getCalculatedPCA2(c.geneSet).then(function(t){e.setBusyMessage("Rendering PCA");var a=t.payload;c.pc1=t.payload["importance.PC1"],c.pc2=t.payload["importance.PC2"];var n=a.scores,o=a.ids;d=n.map(function(e,t){return e.id=o[t],e},a.ids),v(),e.setBusy(!1)})},m=new s.Scene,g=new s.PerspectiveCamera(50,r.innerWidth/r.innerHeight,.1,1e3);g.position.z=60;var h=r.WebGLRenderingContext?new s.WebGLRenderer({antialias:!0}):new s.CanvasRenderer;h.setPixelRatio(r.devicePixelRatio),h.setSize(r.innerWidth,r.innerHeight),u.append(h.domElement);var v=function(){for(var e=[],t=d.length,a=new s.SphereGeometry(.1,8,8),n=new s.MeshBasicMaterial({color:"#59a5fb"}),o=0;t>o;o++){e[o]=new s.Mesh(a,n);var i=d[o];e[o].position.x=i[0],e[o].position.y=i[1],e[o].position.z=i[2],m.add(e[o])}f()},f=function(){h.render(m,g)},b=new s.OrbitControls(g);b.addEventListener("change",f),l()}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3","THREE","$window"];var t={restrict:"E",templateUrl:"app/components/pca3d/pca3d.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPca3d",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i,s,r,l){function c(){u=r.innerWidth-100,p=r.innerHeight-190,"true"==angular.element(".tray").attr("locked")&&(u-=300),x.attr("width","100%").attr("height",p),m=i.scale.linear().domain([-h,h]).range([0,u]).nice(),g=i.scale.linear().domain([-v,v]).range([p,0]).nice()}function d(){var e,t,a=y;e=Math.abs(i.max(a,function(e){return+e[0]})),t=Math.abs(i.min(a,function(e){return+e[0]})),h=1.2*(e>t?e:t),e=Math.abs(i.max(a,function(e){return+e[1]})),t=Math.abs(i.min(a,function(e){return+e[1]})),v=1.2*(e>t?e:t),c(),f=i.svg.axis().scale(m).orient("top").ticks(5),b=i.svg.axis().scale(g).orient("left").ticks(5);var n=i.svg.brush().x(m).y(g).on("brushend",function(){var e=n.extent();x.selectAll("circle").classed("pca-node-selected",function(t){return t[0]>e[0][0]&&t[0]<e[1][0]&&t[1]>e[0][1]&&t[1]<e[1][1]}),i.select(this).transition().duration(300).call(n.extent([[0,0],[0,0]]))});x.call(n);var o=x.selectAll("circle").data(y,function(e){return e});o.enter().append("circle").attr({"class":"pca-node",cx:.5*u,cy:.5*p,r:3}).style("fill-opacity","0").on("mouseover",function(e){k.transition().duration(200).style("opacity",1),k.html(e.id).style("left",i.event.pageX+10+"px").style("top",i.event.pageY-5+"px")}).on("mouseout",function(){k.transition().duration(500).style("opacity",0)}).transition().duration(750).delay(function(e,t){return t/300*500}).attr("cx",function(e){return m(e[0])}).attr("cy",function(e){return g(e[1])}).style("fill-opacity",1),o.exit().transition().duration(600).delay(function(e,t){return t/300*500}).attr("cx",.5*u).attr("cy",.5*p).style("fill-opacity","0").remove(),M.attr("class","axis").attr("transform","translate(0, "+g(0)+")").call(f).append("text").text("PC1"),C.attr("class","axis").attr("transform","translate("+m(0)+", 0)").call(b).append("text").attr("y",10).attr("dy",".71em").text("PC2")}if(angular.isUndefined(a.datasource))return void t.go("datasource");var u,p,m,g,h,v,f,b,y,w,x=i.select("#pca-chart").append("svg").attr("id","chart"),C=x.append("g"),M=x.append("g"),k=i.select("body").append("div").attr("class","tooltip pca-tooltip"),P=e.getCohortPatient(),T=this;T.datasource=a.datasource,T.geneSets=[],T.geneSet=null,T.optNodeColors=[{name:"Default"},{name:"Gender"},{name:"Age At Diagnosis"}],T.optNodeColor=T.optNodeColors[0],T.optCohortPatients=P.get(),T.optCohortPatient=T.optCohortPatients[0],T.addCohortPatient=function(){var e="PLSR "+s().format("- H:mm:ss - M/D/YY"),t=x.selectAll(".pca-node-selected")[0].map(function(e){return e.__data__.id.toUpperCase()}),a={name:e,ids:t};T.optCohortPatients.push(a),T.optCohortPatient=a},o.$watch("vm.optCohortPatient",function(){var e=T.optCohortPatient.ids;"*"==e?x.selectAll(".pca-node-selected").classed("pca-node-selected",!1):x.selectAll("circle").classed("pca-node-selected",function(){return e.indexOf(this.__data__.id)>=0})}),e.setBusy(!0)("Loading Dataset"),e.setDataset(T.datasource).then(function(t){var a=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});e.getPatientHistoryTable(T.datasource).then(function(t){w=t.payload.tbl,a=a[a.length-1].replace(".RData",""),e.setBusyMessage("Creating PCA Matrix"),e.getPCA(T.datasource,a).then(function(){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(e){T.geneSets=e.payload,T.geneSet=T.geneSets[0],o.$watch("vm.geneSet",function(){A()})})})})});var A=function(){e.setBusyMessage("Calculating PCA"),e.getCalculatedPCA(T.geneSet).then(function(t){e.setBusyMessage("Rendering PCA");var a=t.payload;T.pc1=Math.round(100*t.payload["importance.PC1"]),T.pc2=Math.round(100*t.payload["importance.PC2"]);var n=a.scores,o=a.ids;y=n.map(function(e,t){return e.id=o[t],e},a.ids),d(),e.setBusy(!1)})};T.resize=function(){c(),f.scale(m),b.scale(g),M.attr("transform","translate(0, "+g(0)+")").call(f),C.attr("transform","translate("+m(0)+", 0)").call(b),x.selectAll("circle").attr("cx",function(e){return m(e[0])}).attr("cy",function(e){return g(e[1])})},angular.element(r).bind("resize",l.debounce(T.resize,300))}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3","moment","$window","_"];var t={restrict:"E",templateUrl:"app/components/pca/pca.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPca",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i,s){function r(){var e="rgb(5, 108, 225)",t="red",a="rgb(56, 52,123)",n="green";return[{selector:"node",style:{content:"data(label)","text-valign":"center","text-halign":"center",shape:"ellipse",width:"60px",height:"50px",color:e,"background-color":"rgb(250, 250, 250)","border-width":"2px","border-color":e}},{selector:"edge",style:{width:"2px","line-color":e,"line-style":"solid"}},{selector:'node[nodeType="class"], node[nodeType="family"], node[nodeType="complex"]',style:{content:"","background-color":"white",shape:"roundrectangle"}},{selector:'edge[edgeType="activates"], edge[edgeType="indirectly activates"]',style:{"line-color":n,"target-arrow-shape":"triangle","target-arrow-color":n}},{selector:'edge[edgeType="inhibits"], edge[edgeType="ubiquitinylates"]',style:{"line-color":t,"target-arrow-shape":"tee","target-arrow-color":t}},{selector:'edge[edgeType="fusion"]',style:{"line-color":n}},{selector:'edge[edgeType="contains"]',style:{display:"none"}},{selector:'node[nodeType="process"]',style:{}},{selector:'node[nodeType="gene"]:selected',style:{"overlay-opacity":"0.5","overlay-color":"red"}},{selector:'node[nodeType="rtk"]',style:{content:"data(label)","background-color":"rgb(224, 209, 178)","border-color":"black","border-width":"0px","font-size":"48px",shape:"roundrectangle",width:"40px",height:"160px"}},{selector:'node[nodeType="kinase"]',style:{content:"data(label)","background-color":"rgb(255, 206, 194)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="dimer"]',style:{content:"","background-color":"rgb(234, 219, 188)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="loop"]',style:{content:"","background-color":"rgb(255, 255, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px","border-style":"dotted"}},{selector:'node[nodeType="gtpase"]',style:{content:"data(label)","background-color":"rgb(194, 194, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="adaptor"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="GEF"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="process"]',style:{content:"data(label)","background-color":"rgb(255, 255, 255)",shape:"roundrectangle",width:"100px",height:"40px","font-size":"24px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="TF"]',style:{content:"data(label)","background-color":"rgb(255, 206, 94)",shape:"diamond",width:"160px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="gene fusion"]',style:{content:"data(label)",shape:"roundrectangle","font-size":"24px","border-color":"red","border-width":"3px"}},{selector:"edge:selected",style:{"overlay-color":"grey","overlay-opacity":"0.3"}},{selector:'edge[edgeType="recruits"]',style:{width:"2px"}},{selector:'edge[edgeType="fusion"]',style:{"line-color":a}},{selector:'edge[edgeType="recruits"]',style:{"line-color":"red",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","target-arrow-color":"black"}},{selector:'edge[edgeType="cycles"]',style:{"line-color":"black",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","source-arrow-shape":"triangle","target-arrow-color":"green","source-arrow-color":"red"}},{selector:'edge[edgeType="associates"]',style:{"line-color":"black",width:"1px","line-style":"solid"}},{selector:'edge[edgeType="activation"]',style:{"line-color":"green",width:"1px"}},{selector:'edge[edgeType="inhibition"]',style:{"line-color":"red",width:"1px"}}]}if(angular.isUndefined(a.datasource))return void t.go("datasource");var l,c,d=this,u=e.getCohortGene(),p=angular.element("#gbm-chart");d.optCohortGenes=u.get(),d.optCohortGene=d.optCohortGenes[0],d.datasource=a.datasource,d.search="",d.frame,d.tip=null,d.addCohortGene=function(){var e="Pathways "+i().format("- H:mm - M/D/YY"),t=c.$('node[nodeType="gene"]:selected').map(function(e){return e.data().id.toUpperCase()}),a={name:e,ids:t};d.optCohortGenes.push(a),d.optCohortGene=a},n.$watch("vm.optCohortGene",function(){if(!angular.isUndefined(c)){c.startBatch();var e=!0,t={};"*"==d.optCohortGene.ids?c.$('node[nodeType="gene"]:selected').forEach(function(e){e.deselect(),t[e.id()]={display:"element"}},t):c.$('node[nodeType="gene"]').forEach(function(t){this.ids.indexOf(t.id())>=0?(t.select(),this.degmap[t.id()]={display:"element"}):(t.deselect(),this.degmap[t.id()]={display:e?"element":"none"})},{degmap:t,ids:d.optCohortGene.ids}),c.batchData(t),c.endBatch()}}),n.$watch("vm.search",function(){if(!angular.isUndefined(c)){var e=d.search.toUpperCase(),t=e.length;c.startBatch(),c.nodes().map(function(a){0==t?a.unselect():a.attr("name").substr(0,t)===e?a.select():a.unselect()}),c.endBatch()}}),e.setBusy(!0),e.setDataset(d.datasource).then(function(){e.getPathway().then(function(t){l=angular.fromJson(t.payload),c=s({container:p,elements:l.elements,style:r(),minZoom:.2,maxZoom:5,layout:{name:"preset",fit:!0}}).on("click","node",function(e){if("gene"==e.cyTarget.data().nodeType){angular.element("#gbm-webpage").modal();var t="https://www.genecards.org/cgi-bin/carddisp.pl?gene="+e.cyTarget.data().id;n.$apply(function(){d.frame=o.trustAsResourceUrl(t)})}}).on("click","edge",function(e){angular.element("#gbm-webpage").modal();var t="https://www.ncbi.nlm.nih.gov/pubmed/?term="+e.cyTarget.data().pmid;n.$apply(function(){d.frame=o.trustAsResourceUrl(t)})}).on("mouseover","edge",function(e){
n.$apply(function(){d.tip=e.cyTarget.data().source+" Extract"}),e.cyTarget.style({width:"4px"})}).on("mouseout","edge",function(e){n.$apply(function(){d.tip=null}),e.cyTarget.style({width:"2px"})}).on("mouseover","node",function(e){n.$apply(function(){d.tip=e.cyTarget.data().name+" Gene Card"})}).on("mouseout","node",function(){n.$apply(function(){d.tip=null})}),e.setBusy(!1)})})}e.$inject=["osApi","$state","$stateParams","$scope","$sce","moment","cytoscape"];var t={restrict:"E",templateUrl:"app/components/pathways/pathways.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPathways",e)}(),function(){"use strict";function e(e,t,a,n,o){var i,s={},r=function(){return i},l=function(e){i=e},c=1,d=function(){return 9999==c&&(c=1),c++},u=new e(o.protocol()+"://"+o.host()+":"+("3002"==o.port()?80:o.port())+"/oncoscape","",{debug:!1,devel:!1});u.onmessage=function(e){var t=angular.fromJson(e.data);if(angular.isDefined(s[t.cmd])){var a=s[t.cmd];delete s[t.cmd],a.resolve(t)}else n.error("Unhandled message: %o",t)};var p=function(e){e.callback=d(),e.status="request",e.payload=e.payload||"",e.ds=r();var t=a.defer();return s[e.callback]=t,0===u.readyState?u.onopen=function(){u.send(angular.toJson(e))}:u.send(angular.toJson(e)),t.promise.then(function(t){return e.response=t,t})};return{request:p,setDataSource:l}}e.$inject=["SockJS","$rootScope","$q","$log","$location"],angular.module("oncoscape").factory("osSocket",e)}(),function(){"use strict"}(),function(){"use strict";function e(e,t,a){function n(){return H}function o(t){j.clear(),V.clear(),e.setDataSource(t),H=t,q.dispatch(H)}function i(){var e=new a.Signal,n=new a.Signal,o={name:"",password:"",domain:{name:"Guest"},authenticated:!1,token:null,datasets:[]},i=[{name:"Guest"},{name:"FHCRC"},{name:"UW"}],s=function(){o.name="",o.password="",o.domain={name:"Guest"},o.authenticated=!1,o.token=null,o.datasets=[],n.dispatch()},r=function(a){o=a;var n={method:"POST",url:"http://localhost/login/",data:{username:o.name,password:o.password,domain:o.domain.name}};return t(n).then(function(t){t.data.success?(o.authenticated=!0,o.token=t.data.token,o.datasets=t.data.datasets,e.dispatch(o)):(o.authenticated=!1,o.token=null)})};return{getDomains:function(){return i},getUser:function(){return o},login:r,logout:s,onLogin:e,onLogout:n}}function s(){return I}function r(e){return e?angular.element(".loader-modal").show():angular.element(".loader-modal").hide(),l}function l(){}function c(){angular.element("#filter-dropdown").slideToggle()}function d(){angular.element("#filter-dropdown").slideToggle()}function u(){angular.element("#filter-dropdown").slideToggle()}function p(t){return e.setDataSource(t),e.request({cmd:"specifyCurrentDataset",payload:t})}function m(t){return e.request({cmd:"getDataManifest",payload:t})}function g(t){return e.request({cmd:"getPatientHistoryTable",payload:{datasetName:t,durationFormat:"byYear"}})}function h(){}function v(){}function f(){return e.request({cmd:"getGeneSetNames"})}function b(){return e.request({cmd:"getSampleCategorizationNames"})}function y(t){return e.request({cmd:"getSampleCategorization",payload:t})}function w(t){return e.request({cmd:"getMarkersNetwork",payload:t})}function x(){}function C(t){return e.request({cmd:"getCanonicalizePatientIDsInDataset",payload:t})}function M(){}function k(){}function P(t,a){var n={dataPackage:t,matrixName:a};return e.request({cmd:"createPCA",payload:n})}function T(t){var a={genes:t};return e.request({cmd:"calculatePCA",payload:a})}function A(t){var a={genes:t};return e.request({cmd:"calculatePCA2",payload:a})}function S(t,a){var n={dataPackage:t,matrixName:a};return e.request({cmd:"createPLSR",payload:n})}function E(t,a){var n={genes:t,factorCount:a.length,factors:a};return e.request({cmd:"calculatePLSR",payload:n})}function D(t){return t=t||["AgeDx","Survival"],e.request({cmd:"summarizePLSRPatientAttributes",payload:t})}function $(t,a){return e.request({cmd:"calculateSurvivalCurves",payload:{sampleIDs:t,title:a}})}function G(){return e.request({cmd:"createTimelines"})}function F(){}function L(){return e.request({cmd:"getModuleModificationDate",payload:"gbmPathways"})}function z(){return e.request({cmd:"getPathway",payload:"g.gbmPathways.json"})}function B(t,a){return e.request({cmd:"get_mRNA_data",payload:{entities:t,features:a}})}function U(t,a){return e.request({cmd:"get_cnv_data",payload:{entities:t,features:a}})}function _(t,a){return e.request({cmd:"get_mutation_data",payload:{entities:t,features:a}})}function O(){return V}function N(){return j}function R(e,t,a){function n(){return u}function o(e){u.push(e),c.dispatch(u)}function i(){u=[t]}function s(e){_selected==e&&select(u[0]),u.splice(u.indexOf(e)),d.dispatch(u)}function r(e){}function l(e){}var c=new e.Signal,d=new e.Signal,u=(new e.Signal,[t]);return{get:n,add:o,remove:s,onAdd:c,onRemove:d,save:r,load:l,clear:i}}var H,q=new a.Signal,I=i(),V=R(a,{name:"All Patients",ids:"*"},"osCohortPatient"),j=R(a,{name:"All Genes",ids:"*"},"osCohortGene");return{getCohortPatient:O,getCohortGene:N,setDataSource:o,getDataSource:n,onDataSource:q,getUserApi:s,showFilter:c,hideFilter:d,toggleFilter:u,setBusy:r,setBusyMessage:l,setDataset:p,getDataManifest:m,getPatientHistoryTable:g,getPatientHistoryDxAndSurvivalMinMax:h,getSampleDataFrame:v,getGeneSetNames:f,getSampleCategorizationNames:b,getSampleCategorization:y,getMarkersNetwork:w,getPathway:z,getDrugGeneInteractions:x,getCanonicalizePatientIDsInDataset:C,getGeneSetGenes:M,getOncoprintDataSelection:k,getPCA:P,getCalculatedPCA:T,getCalculatedPCA2:A,getPLSR:S,getCalculatedPLSR:E,getSummarizedPLSRPatientAttributes:D,getCalculatedSurvivalCurves:$,getTimelines:G,getCalculatedTimelines:F,getMrnaData:B,getCnvData:U,getMutationData:_,getModuleModificationDate:L}}e.$inject=["osSocket","$http","signals"],angular.module("oncoscape").service("osApi",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o){if(angular.isUndefined(o.datasource))return void t.go("datasource");var i=this;i.dataset=o.datasource,i.colnames=[],i.rows=[],i.search="",i.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var s;e.setBusy(!0),e.getDataManifest(i.dataset).then(function(t){i.colnames=t.payload.colnames,i.rows=t.payload.mtx,a(function(){s=angular.element("#metadata-datatable").dataTable({paging:!1}),n.$watch("vm.search",function(){s.api().search(i.search).draw()}),e.setBusy(!1)},0,!1)})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/metadata/metadata.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osMetadata",e)}(),function(){"use strict";function e(){function e(e,p,m,g,h,v,f,b,y,w){if(angular.isUndefined(h.datasource))return void p.go("datasource");var x,C=angular.element(".markers-chart"),M=e.getCohortPatient(),k=e.getCohortGene(),P=a(this,h);P.resize=function(){var e=y.innerWidth;"true"==angular.element(".tray").attr("locked")&&(e-=300),C.width(e),C.height(y.innerHeight-90),x&&x.resize()},angular.element(y).bind("resize",w.debounce(P.resize,300)),e.setBusy(!0),u(e,P,function(a){P.resize();var u=i();x=o(a,u,v,angular.element("#markers-chart")),n(x,P,e,M,k,g,b),d(x,P,g),c(x,P,g,e),r(x,P,g,m),s(x,P,g,m,e,f),t(x,P,g),l(x,w),e.setBusy(!1)})}function t(e,t,a){a.$watch("vm.searchGene",function(){if(angular.isUndefined(t.searchGene))return void(t.geneSearchResult="");e.startBatch();var a={found:0};e.nodes('node[nodeType="gene"]').forEach(function(e){return""==t.searchGene?void e.deselect():void(0==e.data().name.toLowerCase().indexOf(t.searchGene.toLowerCase())?(e.select(),this.found+=1):e.deselect())},a),e.endBatch(),""==t.searchGene?t.searchGeneResult="":t.searchGeneResult="("+a.found+" Matches)"}),a.$watch("vm.searchPatient",function(){if(!angular.isUndefined(t.searchPatient)){e.startBatch();var a={found:0};e.nodes('node[nodeType="patient"]').forEach(function(e){return""==t.searchPatient?void e.deselect():void(0==e.data().id.toLowerCase().indexOf(t.searchPatient.toLowerCase())?(e.select(),this.found+=1):e.deselect())},a),e.endBatch(),""==t.searchPatient?t.searchPatientResult="":t.searchPatientResult="("+a.found+" Matches)"}})}function a(e,t){return e.datasource=t.datasource,e.optInteractiveModes,e.optInteractiveMode,e.optPatientLayouts,e.optPatientLayout,e.optNodeColors,e.optNodeColor,e.optEdgeColors,e.legandNodes,e.legandPatient,e.legandChromosomes,e.searchGene,e.searchGeneResult="",e.searchPatient,e.searchPatientResult="",e.optCohortModes,e.optCohortMode="",e.optCohortPatients,e.optCohortPatient,e.optCohortGenes,e.optCohortGene,e.frame,e}function n(e,t,a,n,o,i,s){t.optCohortModes=[{name:"Highlight"},{name:"Filter"}],t.optCohortMode=t.optCohortModes[0],t.optCohortPatients=n.get(),t.optCohortPatient=t.optCohortPatients[0],t.optCohortGenes=o.get(),t.optCohortGene=t.optCohortGenes[0],t.addCohortGene=function(){var a="P+M "+s().format("- H:mm - M/D/YY"),n=e.$('node[nodeType="gene"]:selected').map(function(e){return e.data().id.toUpperCase()}),o={name:a,ids:n};t.optCohortGenes.push(o),t.optCohortGene=o},t.addCohortPatient=function(){var a="P+M "+s().format("- H:mm - M/D/YY"),n=e.$('node[nodeType="patient"]:selected').map(function(e){return e.data().id.toUpperCase()}),o={name:a,ids:n};t.optCohortPatients.push(o),t.optCohortPatient=o};var r=function(){var a={},n="Highlight"==t.optCohortMode.name;e.startBatch(),"*"==t.optCohortPatient.ids?e.$('node[nodeType="patient"]:selected').forEach(function(e){e.deselect(),a[e.id()]={display:"element"}},a):e.$('node[nodeType="patient"]').forEach(function(e){this.ids.indexOf(e.id())>=0?(e.select(),this.degmap[e.id()]={display:"element"}):(e.deselect(),this.degmap[e.id()]={display:n?"element":"none"})},{degmap:a,ids:t.optCohortPatient.ids}),e.batchData(a),e.endBatch()},l=function(){var a={},n="Highlight"==t.optCohortMode.name;e.startBatch(),"*"==t.optCohortGene.ids?e.$('node[nodeType="gene"]:selected').forEach(function(e){e.deselect(),a[e.id()]={display:"element"}},a):e.$('node[nodeType="gene"]').forEach(function(e){this.ids.indexOf(e.id())>=0?(e.select(),this.degmap[e.id()]={display:"element"}):(e.deselect(),this.degmap[e.id()]={display:n?"element":"none"})},{degmap:a,ids:t.optCohortGene.ids}),e.batchData(a),e.endBatch()},c=function(){r(),l()};i.$watch("vm.optCohortPatient",r),i.$watch("vm.optCohortGene",l),i.$watch("vm.optCohortMode",c)}function o(e,t,a,n){return a({container:n,elements:e,style:t,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,textureOnViewport:!1,motionBlur:!0,minZoom:1e-4,maxZoom:40,layout:{name:"preset",fit:!0}})}function i(){return[{selector:"node",style:{display:"data(display)",height:"mapData(sizeEle, 0, 50, 10, 100)",width:"mapData(sizeEle, 0, 50, 10, 100)","font-size":"data(sizeLbl)","text-valign":"center"}},{selector:'node[nodeType="patient"]',style:{"background-color":"data(color)","text-halign":"center","border-width":"data(sizeBdr)","border-color":"data(color)"}},{selector:'node[nodeType="patient"]:selected',style:{"border-color":"#FF0000"}},{selector:'node[nodeType="gene"]',style:{"background-color":"#FFFFFF","border-color":"#38347b","text-halign":"right",label:"data(id)","border-width":"data(sizeBdr)"}},{selector:'node[nodeType="gene"]:selected',style:{"border-color":"#FF0000"}},{selector:'node[nodeType="centromere"]',style:{"font-size":"24px","text-halign":"center","background-color":"#3993fa",color:"#FFFFFF","border-color":"rgb(19, 150, 222)",height:"40px",width:"120px",shape:"roundrectangle",label:"  data(id)"}},{selector:"edge",style:{display:"data(display)","line-color":"data(color)",width:"data(sizeEle)"}}]}function s(e,t,a,n,o,i){var s=function(e){var t=new e.Signal,a=new e.Signal,n=new e.Signal,o=new e.Signal,i=new e.Signal,s=new e.Signal,r=function(){t.removeAll(),a.removeAll(),o.removeAll(),i.removeAll(),n.removeAll(),s.removeAll()},l=function(e){t.add(e),o.add(e)},c=function(e){a.add(e),i.add(e)},d=function(e){n.add(e),s.add(e)};return{geneOver:t,geneOut:a,geneClick:n,patientOver:o,patientOut:i,patientClick:s,over:l,out:c,click:d,removeAll:r}}(i);e.on("click",'node[nodeType="gene"]',s.geneClick.dispatch).on("click",'node[nodeType="patient"]',s.patientClick.dispatch).on("mouseover",'node[nodeType="gene"]',s.geneOver.dispatch).on("mouseover",'node[nodeType="patient"]',s.patientOver.dispatch).on("mouseout",'node[nodeType="gene"]',s.geneOut.dispatch).on("mouseout",'node[nodeType="patient"]',s.patientOut.dispatch);var r={};e.$('edge[edgeType!="chromosome"]').forEach(function(e){this[e.id()]={display:"none"}},r);var l={showPatientInfo:function(e){return"patient"==e.cyTarget.data().nodeType&&a.$apply(function(){t.patient=e.cyTarget.attr("patient"),t.patientChromosomes=e.cyTarget.neighborhood("node").map(function(e){return e.data().id})}),this},hidePatientInfo:function(){return a.$apply(function(){t.patient=t.patientChromosomes=null}),this},showDegreeOne:function(t){var a={};t.cyTarget.neighborhood("edge").forEach(function(e){this[e.id()]={display:"element"}},a),e.batchData(a)},hideDegreeOne:function(t){var a={};t.cyTarget.neighborhood("edge").forEach(function(e){this[e.id()]={display:"none"}},a),e.batchData(a)},showDegreeTwo:function(t){var a={};t.cyTarget.neighborhood("node").forEach(function(e){e.neighborhood("edge").forEach(function(e){this[e.id()]={display:"element"}},this)},a),e.batchData(a)},hideDegreeTwo:function(t){var a={};t.cyTarget.neighborhood("node").forEach(function(e){e.neighborhood("edge").forEach(function(e){this[e.id()]={display:"none"}},this)},a),e.batchData(a)},showOncoPrint:function(){}},c=[{name:"Hide All",register:function(){s.click(function(e){l.showOncoPrint(e)}),s.over(function(e){l.showPatientInfo(e)}),s.out(function(e){l.hidePatientInfo(e)})},unregister:function(){s.removeAll()}},{name:"Show All",register:function(){s.click(function(e){l.showOncoPrint(e)}),s.over(function(e){l.showPatientInfo(e)}),s.out(function(e){l.hidePatientInfo(e)});var t={};e.$('edge[edgeType!="chromosome"]').forEach(function(e){this[e.id()]={display:"element"}},t),e.batchData(t)},unregister:function(){s.removeAll(),e.batchData(r)}},{name:"1째 When Selected",register:function(){var t={};e.$('node[nodeType="patient"]:selected').forEach(function(e){e.neighborhood("edge").forEach(function(e){this[e.id()]={display:"element"}},t)},t),e.batchData(t),e.on("select","node",function(e){l.showDegreeOne(e)}),e.on("unselect","node",function(e){l.hideDegreeOne(e)})},unregister:function(){e.batchData(r),e.off("select","node"),e.off("unselect","node")}},{name:"2째 When Selected",register:function(){var t={};e.$('node[nodeType="patient"]:selected').forEach(function(e){e.neighborhood("node").forEach(function(e){e.neighborhood("edge").forEach(function(e){this[e.id()]={display:"element"}},this)},this)},t),e.batchData(t),e.on("select","node",function(e){l.showDegreeTwo(e)}),e.on("unselect","node",function(e){l.hideDegreeTwo(e)})},unregister:function(){e.batchData(r),e.off("select","node"),e.off("unselect","node")}},{name:"1째 On Mouse Over",register:function(){s.click(function(e){l.showOncoPrint(e)}),s.over(function(e){l.showPatientInfo(e).showDegreeOne(e)}),s.out(function(e){l.hidePatientInfo(e).hideDegreeOne(e)})},unregister:function(){s.removeAll()}},{name:"2째 On Mouse Over",register:function(){s.click(function(e){l.showOncoPrint(e)}),s.over(function(e){l.showPatientInfo(e).showDegreeTwo(e)}),s.out(function(e){l.hidePatientInfo(e).hideDegreeTwo(e)})},unregister:function(){s.removeAll()}}];t.optInteractiveModes=c,t.optInteractiveMode=t.optInteractiveModes[0],a.$watch("vm.optInteractiveMode",function(e,t){angular.isDefined(t)&&t.unregister(),angular.isDefined(e)&&e.register()})}function r(e,t,a,n){var o=[{name:"mutation","class":"edgeMutation",color:"#004358",state:"Highlight"},{name:"cnGain.1","class":"edgeCnGain1",color:"#1F8A70",state:"Highlight"},{name:"cnLoss.1","class":"edgeCnLoss1",color:"#BEDB39",state:"Highlight"},{name:"cnGain.2","class":"edgeCnGain2",color:"#FFE11A",state:"Highlight"},{name:"cnLoss.2","class":"edgeCnLoss2",color:"#FD7400",state:"Highlight"}],i={mutation:o[0],"cnGain.1":o[1],"cnLoss.1":o[2],"cnGain.2":o[3],"cnLoss.2":o[4]};n(function(){o.forEach(function(e){angular.element("."+e["class"]).css("border-color",e.color)});var t={};e.edges('edge[edgeType!="chromosome"]').forEach(function(e){this[e.id()]={color:i[e.data("edgeType")].color}},t),e.batchData(t)}),t.optEdgeColors=o,t.updateEdge=function(t){var a,n;switch(t.state){case"Highlight":t.state="Show",a="#3993fa",n={color:a,display:"element"};break;case"Show":t.state="Hide",a="#EEEEEE",n={color:"#FFF",display:"none"};break;default:t.state="Highlight",a=t.color,n={color:a,display:"element"}}angular.element("."+t["class"]).css("border-color",a);var o={};e.edges('edge[edgeType="'+t.name+'"]').forEach(function(e){this.degmap[e.id()]=this.state},{degmap:o,state:n}),e.batchData(o)}}function l(e,t){e.on("pan",t.debounce(function(t){var a=Math.max(t.cy.zoom(),1),n={},o=Math.ceil(Math.max(12/a,1)),i=Math.ceil(Math.max(5/a,.5));e.nodes().forEach(function(e){this.degmap[e.id()]={sizeEle:e.degree()/this.zoom,sizeLbl:o,sizeBdr:i}},{degmap:n,zoom:a,font:o,sizeBdr:i}),e.batchData(n)},300))}function c(e,t,a,n){n.getSampleCategorizationNames().then(function(o){var i=[{name:"Hobo"},{name:"Gender"},{name:"Age At Diagnosis"}];angular.isDefined(o.payload.length)&&i.concat(o.payload.map(function(e){return{name:e}})),t.optNodeColors=i,t.optNodeColor=t.optNodeColors[0],a.$watch("vm.optNodeColor",function(){var a={};switch(t.optNodeColor.name){case"Hobo":t.legandNodes=[{name:"Patients",color:"#3993fa"}],e.$('node[nodeType="patient"]').forEach(function(e){a[e.id()]={color:"#3993fa"}});break;case"Gender":t.legandNodes=[{name:"Male",color:"blue"},{name:"Female",color:"pink"}],e.$('node[nodeType="patient"]').forEach(function(e){try{var t=e.data("patient")[0][2];a[e.id()]={color:"male"===t?"rgb(5, 108, 225)":"pink"}}catch(n){a[e.id()]={color:"#EEEEEE"}}});break;case"Age At Diagnosis":t.legandNodes=[{name:"Young",color:"green"},{name:"Old",color:"red"}],e.$('node[nodeType="patient"]').forEach(function(e){try{var t=Number(e.data("patient")[0][4]);a[e.id()]={color:"rgb("+255*t/100+","+255*(100-t)/100+",0)"}}catch(n){a[e.id()]={color:"#000000"}}});break;default:n.getSampleCategorization(t.optNodeColor.name).then(function(a){t.legandNodes=a.payload.tbl.map(function(e){return e[0]+"|"+e[1]}).filter(function(e,t,a){return a.indexOf(e)===t}).map(function(e){var t=e.split("|");return{name:t[0],color:t[1]}});for(var n=a.payload.rownames,o=a.payload.tbl,i={},s=e.$('node[nodeType="patient"]'),r=0;r<s.length;r++){var l=s[r].id();i[l]={color:"#DDDDDD"};for(var c=0;c<n.length;c++)if(l==n[c]){i[l]={color:o[c][1]};break}}})}e.batchData(a)})})}function d(e,t,a){t.optPatientLayouts=[{name:"Hobo"},{name:"Age At Diagnosis"},{name:"Gender"}],t.optPatientLayout=t.optPatientLayouts[0],a.$watch("vm.optPatientLayout",function(t){var a=e.nodes('node[nodeType="patient"]');switch(e.startBatch(),t.name){case"Hobo":a.forEach(function(e){e.position(e.data("hobo"))});break;case"Age At Diagnosis":a.forEach(function(e){try{var t=Number(e.data("patient")[0][4]);t=t.map(0,100,-3e3,3e3),e.position({y:t,x:Math.pow(t,2)/5e3-200})}catch(a){e.position({x:100,y:0})}});break;case"Gender":a.filter(function(e,t){try{return"male"==t.data("patient")[0][2].toLowerCase()}catch(a){return!1}}).forEach(function(e,t){var a=400,n=400,o=.1*(t+1),i=-1e3+(a+n*o)*Math.cos(o),s=-1200+(a+n*o)*Math.sin(o);e.position({x:i,y:s})}),a.filter(function(e,t){return angular.isUndefined(t.data("patient")[0])}).forEach(function(e,t){var a=400,n=400,o=.1*(t+1),i=-2500+(a+n*o)*Math.cos(o),s=0+(a+n*o)*Math.sin(o);e.position({x:i,y:s})}),a.filter(function(e,t){try{return"female"==t.data("patient")[0][2].toLowerCase()}catch(a){return!1}}).forEach(function(e,t){var a=400,n=400,o=.1*(t+1),i=-1e3+(a+n*o)*Math.cos(o),s=1200+(a+n*o)*Math.sin(o);e.position({x:i,y:s})})}e.endBatch()})}function u(e,t,a){e.setDataset(t.datasource).then(function(){e.getPatientHistoryTable(t.datasource).then(function(t){var n=t.payload.tbl;e.getMarkersNetwork(t.payload).then(function(e){var t=angular.fromJson(e.payload).elements;t.nodes.filter(function(e){return"patient"===e.data.nodeType}).map(function(e){var t=e.data;t.display="element",t.color="rgb(19, 150, 222)",t.sizeEle=t.degree,t.sizeLbl=12,t.sizeBdr=5,t.hobo={x:e.position.x,y:e.position.y},t.patient=this.filter(function(t){return t[0]===e.data.id})},n),t.nodes.filter(function(e){return"patient"!=e.data.nodeType}).map(function(e){var t=e.data;return t.display="element",t.color="rgb(19, 150, 222)",t.sizeEle=t.degree,t.sizeLbl=12,t.sizeBdr=5,e.locked=!0,e.selectable=!0,e.grabbable=!1,e}),t.edges.map(function(e){var t=e.data;return t.display="chromosome"==t.edgeType?"element":"none",t.color="rgb(19, 150, 222)",t.sizeEle=3,t.sizeLbl=12,e.locked=!0,e.selectable=!1,e.grabbable=!1,e}),a(t)})})})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams","cytoscape","signals","moment","$window","_"];var p={restrict:"E",templateUrl:"app/components/markers/markers.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return p}angular.module("oncoscape").directive("osMarkers",e)}(),function(){"use strict";function e(){function e(e,t){var a=e.getUserApi(),n=this;n.domains=a.getDomains(),n.user=a.getUser(),n.hasError=!1,n.login=function(){var e=a.login(n.user);angular.isDefined(e)?e.then(function(){n.user.authenticated?t.go("datasource"):n.hasError=!0}):t.go("datasource")}}e.$inject=["osApi","$state"];var t={restrict:"E",templateUrl:"app/components/login/login.html",replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osLogin",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/loader/loader.html",replace:!0};return e}angular.module("oncoscape").directive("osLoader",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.login=function(){e.go("login")}}e.$inject=["$state"];var t={restrict:"E",templateUrl:"app/components/landing/landing.html",replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osLanding",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i){function s(){if(!angular.isUndefined(r)&&(r.fnClearTable(),c=l.tbl,"*"!=u.optCohortPatient.ids&&(c=c.filter(function(e){return u.optCohortPatient.ids.indexOf(e[0])>=0})),0!=c.length)){var e=c.map(function(e){return e[4]}),t=c.map(function(e){return e[3]});a(function(){u.diagnosisMin=u.diagnosisMinValue=Math.floor(Math.min.apply(null,e)),u.diagnosisMax=u.diagnosisMaxValue=Math.ceil(Math.max.apply(null,e)),u.survivalMin=u.survivalMinValue=Math.floor(Math.min.apply(null,t)),u.survivalMax=u.survivalMaxValue=Math.floor(Math.max.apply(null,t)),r.fnAddData(c),r.api().draw()})}}if(angular.isUndefined(i.datasource))return void t.go("datasource");var r,l,c,d=e.getCohortPatient(),u=this;u.datasource=i.datasource,u.filter,u.colnames=[],u.diagnosisMin=u.diagnosisMinValue=1,u.diagnosisMax=u.diagnosisMaxValue=99,u.survivalMin=u.survivalMinValue=0,u.survivalMax=u.survivalMaxValue=10,u.optCohortPatients=d.get(),u.optCohortPatient=u.optCohortPatients[0],u.search="",u.addCohortPatient=function(){var e="Patient "+o().format("- H:mm - M/D/YY"),t=r._("tr",{filter:"applied"}).map(function(e){return e[0].toUpperCase()}),a={name:e,ids:t};u.optCohortPatients.push(a),u.optCohortPatient=a},n.$watch("vm.optCohortPatient",s),u.applyFilter=function(){angular.element.fn.DataTable.ext.search=[function(e,t){var a=parseFloat(t[3]),n=parseFloat(t[4]);return isNaN(a)||isNaN(n)?!1:n>=u.diagnosisMin&&n<=u.diagnosisMax&&a>=u.survivalMin&&a<=u.survivalMax}],r.api().draw()},e.setBusy(!0),e.setDataset(u.datasource).then(function(){e.getPatientHistoryTable(u.datasource).then(function(t){l=t.payload,u.colnames=l.colnames,a(function(){r=angular.element("#history-datatable").dataTable({paging:!1}),n.$watch("vm.search",function(){r.api().search(u.search).draw()}),s(),e.setBusy(!1)},0,!1)})})}e.$inject=["osApi","$state","$timeout","$scope","moment","$stateParams"];var t={restrict:"E",templateUrl:"app/components/history/history.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHistory",e)}(),function(){"use strict";function e(){function e(){var e=this;e.videos=[{name:"Oncoscape + Github",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Creating Cohorts",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Patients + Markers",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""},{name:"Timelines",desc:"Description Lorum Ipsum eos et sid al accusamus et iusto odio",img:""}]}var t={restrict:"E",templateUrl:"app/components/help/help.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHelp",e)}(),function(){"use strict";function e(){function e(e,t,a,n){e.onDataSource.add(function(){n(function(){i.showTools=!0})});var o=e.getUserApi();o.onLogin.add(function(){n(function(){i.showMenu=!0})}),o.onLogout.add(function(){n(function(){i.showMenu=!1})});var i=this;i.showMenu=!1,i.showTools=!1,i.toolsClick=function(){a.go("tools",{datasource:e.getDataSource()})},i.cohortClick=function(){e.toggleFilter()},i.logoutClick=function(){o.logout(),a.transitionTo("landing")}}e.$inject=["osApi","$stateParams","$state","$timeout"];var t={restrict:"E",templateUrl:"app/components/header/header.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHeader",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/footer/footer.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osFooter",e)}(),function(){"use strict";function e(){function e(e,t){var a=this;a.datasets=[],a.explore=function(a,n){e.setDataSource(n),t.go(a,{datasource:n})};var n={DEMOdz:"Glioblastoma (DEMO)",TCGAbrain:"Brain (TCGA)",TCGAbrca:"Breast (TCGA)",TCGAcoadread:"Colorectal (TCGA)",TCGAgbm:"Glioblastoma (TCGA)",TCGAhnsc:"Head + Neck (TCGA)",TCGAlgg:"Lower Grade Glioma (TCGA)",TCGAluad:"Lung Adenocarcinoma (TCGA)",TCGAlung:"Lung (TCGA)",TCGAlusc:"Lung Sasquamous Cell (TCGA)",TCGApaad:"Pancreas (TCGA)",TCGAprad:"Prostate (TCGA)",UWbrain:"Brain (UW)",MSKbrain:"Brain (MSK)"};a.datasets=e.getUserApi().getUser().datasets.map(function(e){return{name:this[e],id:e}},n)}e.$inject=["osApi","$state"];var t={restrict:"E",templateUrl:"app/components/datasource/datasource.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osDatasource",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/compare/compare.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osCompare",e)}(),function(){"use strict";function e(e,t,a,n,o,i){a.onerror=function(e,t,a,o,i){i||(i=new Error(e),i.fileName=t,i.lineNumber=a,i.columnNumber=o||0),n(i)},e.$on("$stateChangeStart",function(e,a){o.setBusy(!1),angular.element.fn.DataTable.ext.search=[],a.authenticate&&!o.getUserApi().getUser().authenticated&&(t.transitionTo("landing"),e.preventDefault())})}e.$inject=["$rootScope","$state","$window","$exceptionHandler","osApi","$log"],angular.module("oncoscape").run(e)}(),function(){"use strict";function e(e,t){e.state("test",{url:"/test",template:"<os-test>",authenticate:!1}).state("landing",{url:"/",template:"<os-landing>",authenticate:!1}).state("help",{url:"/help",template:"<os-help>",authenticate:!1}).state("datasource",{url:"/datasource",template:"<os-datasource>",authenticate:!0}).state("tools",{url:"/tools/{datasource}",template:"<os-tools>",authenticate:!0}).state("metadata",{url:"/metadata/{datasource}",template:"<os-metadata>",authenticate:!0}).state("history",{url:"/history/{datasource}",template:"<os-history>",authenticate:!0}).state("plsr",{url:"/plsr/{datasource}",template:"<os-plsr>",authenticate:!0}).state("pca",{url:"/pca/{datasource}",template:"<os-pca>",authenticate:!0}).state("pca3d",{url:"/pca3d/{datasource}",template:"<os-pca3d>",authenticate:!0}).state("markers",{url:"/markers/{datasource}",template:"<os-markers>",authenticate:!0}).state("pathways",{url:"/pathways/{datasource}",template:"<os-pathways>",authenticate:!0}).state("timelines",{url:"/timelines/{datasource}",template:"<os-timelines>",authenticate:!0}).state("survival",{url:"/survival/{datasource}",template:"<os-survival>",authenticate:!0}).state("compare",{url:"/compare/{datasource}",template:"<os-compare>",authenticate:!0}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("oncoscape").config(e)}(),function(){"use strict";angular.module("oncoscape").constant("moment",moment).constant("d3",d3).constant("cytoscape",cytoscape).constant("signals",signals).constant("SockJS",SockJS).constant("THREE",THREE).constant("$",$).constant("_",_),Number.prototype.map=function(e,t,a,n){return(this-e)*(n-a)/(t-e)+a}}(),function(){"use strict";function e(e){e.debugEnabled(!0)}e.$inject=["$logProvider"],angular.module("oncoscape").config(e)}(),angular.module("oncoscape").run(["$templateCache",function(e){e.put("app/components/datasource/datasource.html",'<section class="datasource container-fluid"><div class="row"><div class="col-sm-8 col-md-6"><h1>Data Sources</h1><p>Oncoscape has analyzed and curated the following datasets hosted by The Cancer Genome Atlas (TCGA). Raw data sets for these and other available disease sites can be found at <a href="https://tcga-data.nci.nih.gov/tcga/">TCGA Data Portal</a>.</p></div></div><div class="row"><ul><li ng-repeat="dataset in vm.datasets" class="col-xs-12 col-sm-6 col-lg-4"><img class="datasource-img" ng-src="/assets/images/datasets/{{dataset.id}}.png"><h2 class="datasource-lbl">{{dataset.name}}</h2><nobr><a href="" ng-click="vm.explore(\'tools\',dataset.id)">Explore</a> &nbsp;|&nbsp; <a href="" ng-click="vm.explore(\'metadata\',dataset.id)">Learn More</a></nobr></li></ul></div></section>'),e.put("app/components/compare/compare.html",'<section class="compare-v50"><os-plsr></os-plsr></section><section class="compare-v50"><os-pca></os-pca></section>'),e.put("app/components/footer/footer.html",'<footer class="footer container"><div class="row"><div class="col-xs-12 col-sm-6"><img class="footer-logo" src="/assets/images/logo-fred-hutchinson-cancer-research-center.png" alt="Fred Hutchinson Cancer Research Center"> <img class="footer-logo" src="/assets/images/logo-university-of-washington-medicine.png" alt="UW Medicine"> <img class="footer-logo" src="/assets/images/logo-seattle-cancer-care-alliance.png" alt="Seattle Cancer Care Alliance"></div><div class="col-xm-12 col-sm-6 text-right"><a href="https://www.facebook.com/STTRCancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-facebook-out.png" alt="Facebook"></a> <a href="https://twitter.com/sttrcancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-twitter-out.png" alt="Twitter"></a> <a href="https://plus.google.com/+fredhutch/videos" target="_blank"><img class="footer-icon" src="/assets/images/sttr-youtube-out.png" alt="YouTube"></a> <a href="http://instagram.com/FredHutch" target="_blank"><img class="footer-icon" src="/assets/images/sttr-instagram-out.png" alt="Instagram"></a> <a href="http://www.linkedin.com/company/fred-hutchinson-cancer-research-center/careers?trk=top_nav_careers" target="_blank"><img class="footer-icon" src="/assets/images/sttr-linkedin-out.png" alt="LinkedIn"></a> <a href="https://plus.google.com/116048577052683099154/posts" target="_blank"><img class="footer-icon" src="/assets/images/sttr-google-out.png" alt="Google+"></a></div></div></footer>'),
e.put("app/components/header/header.html",'<div class="header"><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#"><img alt="Brand" src="/assets/images/logo.png" style="max-height:50px;"></a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" ng-if="vm.showMenu"><ul class="nav navbar-nav navbar-right"><li><a href="" ng-click="vm.cohortClick()"><span class="glyphicon glyphicon-equalizer"></span>My Cohorts</a></li><li><a href="#datasource"><span class="glyphicon glyphicon-th"></span>Data Sources</a></li><li><a href="#help"><span class="glyphicon glyphicon-question-sign"></span>Help</a></li><li><a href="" ng-click="vm.logoutClick()"><span class="glyphicon glyphicon-user"></span>Logout</a></li></ul><ul class="nav navbar-nav navbar-right" ng-if="vm.showTools"><li><a href="" ng-click="vm.toolsClick()"><span class="glyphicon glyphicon-signal"></span>Analysis Tools</a></li></ul></div></div><div class="nav-divider"></div></nav></div><a href="https://github.com/FredHutch/Oncoscape/labels/help%20wanted" class="github" tooltip="Submit Issues" style="text-align: right;"><div class="logo"><svg aria-hidden="true" class="octicon octicon-mark-github" height="28" role="img" version="1.1" viewbox="0 0 16 16" width="28"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"></path></svg></div></a>'),e.put("app/components/help/help.html",'<section class="tools container"><div class="row"><div class="col-sm-8 col-md-6"><br><br><br></div></div><div class="row"><div class="col-xs-12 col-md-7"><h2 style="margin:0px;margin-bottom: 20px;">Now Playing &mdash; Lorum Ipsum</h2><div style="background-color:#000;text-align: center;"><video width="640" height="360" controls="" style="background-color: #000;max-width: 100%;"></video></div><h2>Video Title</h2><p>Transcription At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat</p></div><div class="col-xs-12 col-md-5" style="padding-left: 40px;"><h2 style="margin:0px;">Oncoscape Videos</h2><ul><li ng-repeat="video in vm.videos" style="clear: both;"><div style="width:30%;height:90px;background-color:#EEE;display:inline-block;float:left;margin-bottom: 20px;text-align: center;cursor: pointer;"><span class="glyphicon glyphicon-play-circle" style="font-size: 30px;padding-top:30px; color:#FFF"></span></div><div style="width:69%;display: inline-block;float:left;padding-left: 10px;"><h3 class="tools-lbl" style="margin:0px;">{{video.name}}</h3><p>{{video.desc}}</p><a href="" ng-click="vm.explore(tool.route, vm.datasource)">Watch Video</a></div></li></ul></div></div></section>'),e.put("app/components/landing/landing.html",'<div class="landing container"><div class="row" style="padding-top:20px;"><h2>Bridging Cancer Research and Clinical Care</h2></div><div class="row" style="padding-top:20px;"><div class="col-sm-8"><p>Oncoscape is developed at the Fred Hutchinson Cancer Research Center under the auspices of the Solid Tumor Translational Research initiative. Oncoscape is a web-based, menu-driven analysis and visualization platform for large-scale, heterogeneous clinical and molecular patient timeline data as exemplified by the Fred Hutch HIDRA database. Oncoscape vision and development is managed by a small team comprising: <a href="https://www.fredhutch.org/en/labs/profiles/holland-eric.html">Eric Holland</a>, <a href="http://www.sttrcancer.org/en/contact-us/horse-grant-bio.html">Desert Horse-Grant</a>, <a href="https://www.linkedin.com/in/lisa-mcferrin-9758b029">Lisa McFerrin</a>, <a href="https://www.linkedin.com/in/hbolouri">Hamid Bolouri</a>, <a href="https://www.linkedin.com/in/jenny-zhang-ba62a2104">Jenny Zhang</a>, <a href="https://www.linkedin.com/in/gretchenh">Gretchen Heinrich</a>, <a href="https://www.linkedin.com/in/robert-mcdermott-a77b9011">Robert McDermott</a> and <a href="https://www.linkedin.com/in/zager">Michael Zager</a>.</p><p class="">Through its easy point-and-click browser interface, Oncoscape will become an essential tool for doctors and researchers interested in:</p><ul class=""><li>Comparing patients or populations across an array of features, like genetic alterations (CNV, IHC, sequencing, expression) or clinical elements (treatment regimens, diagnostics, outcomes)</li><li>Defining cohorts based on selected traits  identifying patients like me</li><li>Aligning patient histories according to timeline events: diagnosis, treatment, progression, survival</li><li>Performing powerful and integrated statistical analysis: Principle Component Analysis, Partial least squares regression, Kaplan-Meier curves, enrichment scores</li><li>Creating high quality visualizations of molecular/clinical data</li></ul><p class="">By providing a portal equipped with rich data, powerful statistics and a simple interface, Oncoscape not only empowers users to quickly answer questions themselves but also expedites the process of discovering novel patterns and relationships. This can lead to numerous possible findings, including optimized drug therapies for individual patients, identification of novel regulatory pathways, or even the need to reassess adherence strategies.</p></div><div class="col-sm-4"><os-login></os-login></div></div></div>'),e.put("app/components/history/history.html",'<os-tray caption="Patients" content="tray-content-block"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Filters</h2></div><div class="col-xs-12 form-item"><label>Age At Diagnosis</label><div range-slider="" min="vm.diagnosisMinValue" model-min="vm.diagnosisMin" max="vm.diagnosisMaxValue" model-max="vm.diagnosisMax" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-12 form-item"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMin" max="vm.survivalMaxValue" model-max="vm.survivalMax" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-12 form-item"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width: 100%;" ng-model="vm.search"></div><div class="col-xs-12 form-label"><h2>Patient Cohort</h2></div><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" style="width: 34px;display: inline-block; margin-right:0px; float:right" ng-click="vm.addCohortPatient()">+</button> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width: 220px;display: inline-block; margin-right:0px;">{{vm.optCohortPatient.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optCohortPatients" ng-click="vm.optCohortPatient=item">{{item.name}}</li></ul></div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Patient Data</h2><table id="history-datatable" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></div></section>'),e.put("app/components/loader/loader.html",'<div class="loader-modal"><div class="loader"><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__ball"></div></div></div>'),e.put("app/components/login/login.html",'<form class="login"><h3 class="login-header">Login</h3><div class="login-body"><div class="alert alert-danger" role="alert" ng-show="vm.hasError"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> <span class="sr-only">Error:</span> Invalid Credentials</div><fieldset class="form-group"><span for="domain" class="small">Affiliation</span><select id="domain" class="form-control" ng-options="option.name for option in vm.domains track by option.name" ng-model="vm.user.domain"></select></fieldset><fieldset class="form-group"><span class="form-control-label small" for="username">Username</span> <input id="username" class="form-control input-sm" type="text" placeholder="Username" ng-model="vm.user.name"></fieldset><fieldset class="form-group" ng-show="vm.user.domain.name!=\'Guest\'"><span class="form-control-label small" for="password">Password</span> <input id="password" class="form-control" type="password" placeholder="Password" ng-model="vm.user.password"></fieldset><button class="btn btn-default" ng-click="vm.login()">Login</button></div></form>'),e.put("app/components/markers/markers.html",'<os-tray content="tray-content-block" change="vm.resize()"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Options</h2></div><div class="col-xs-12 form-item"><label>Interactive Mode</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optInteractiveMode.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optInteractiveModes" ng-click="vm.optInteractiveMode=item">{{item.name}}</li></ul></div></div><div class="col-xs-5 form-item"><label>Patient Layout</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optPatientLayout.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optPatientLayouts" ng-click="vm.optPatientLayout=item">{{item.name}}</li></ul></div></div><div class="col-sm-2 form-item" style="text-align: center;padding-top:30px;"><i class="fa fa-link" aria-hidden="true"></i></div><div class="col-sm-5 form-item"><label>Patient Color</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optNodeColor.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optNodeColors" ng-click="vm.optNodeColor=item">{{item.name}}</li></ul></div></div><div class="col-sm-12 form-item"><label>Edge Colors</label> <span ng-repeat="item in vm.optEdgeColors" class="legend-bar btn btn-default filter-button {{item.class}}" ng-click="vm.updateEdge(item); $event.stopPropagation();">{{item.name}} ({{item.state}})</span></div><div class="col-sm-12 form-item"><input type="text" class="form-control" ng-model="vm.searchPatient" placeholder="Enter Patient Id"></div><div class="col-sm-12 form-item"><label>Gene Search {{vm.searchGeneResult}}</label> <input type="text" class="form-control" ng-model="vm.searchGene" placeholder="Enter Gene Name"></div><div class="col-xs-12 form-label"><h2>Cohorts</h2></div><div class="col-sm-12 form-item"><label>Display Mode</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optCohortMode.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optCohortModes" ng-click="vm.optCohortMode=item">{{item.name}}</li></ul></div></div><div class="col-sm-12 form-item"><label>Patient Cohorts</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" style="width: 34px;display: inline-block; margin-right:0px; float:right" ng-click="vm.addCohortPatient()">+</button> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width: 220px;display: inline-block; margin-right:0px;">{{vm.optCohortPatient.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optCohortPatients" ng-click="vm.optCohortPatient=item">{{item.name}}</li></ul></div></div><div class="col-sm-12 form-item"><label>Gene Cohorts</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" style="width: 34px;display: inline-block; margin-right:0px; float:right" ng-click="vm.addCohortGene()">+</button> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width: 220px;display: inline-block; margin-right:0px;">{{vm.optCohortGene.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optCohortGenes" ng-click="vm.optCohortGene=item">{{item.name}}</li></ul></div></div><div class="col-xs-12 form-label" style="padding-bottom: 100px;"><h2>Legend</h2><span class="legend" ng-repeat="item in vm.legandNodes"><span class="legend-dot" style="background-color:{{item.color}}"></span> {{item.name}}</span></div></div></section></os-tray><section class="tray-content-block"><div id="markers-chart" class="markers-chart"></div><div style="position:absolute;top:10px;left:50px;"><h2>Patients + Markers</h2></div></section><section ng-show="vm.patient" class="container-fluid" style="position:absolute;bottom:0px;margin-right: 300px;z-index: 999;"><div class="row" style="background-color:#FFF"><div class="col-xs-12 legend"><ul style="float:left;"><li class="legend-section">Patient Information</li><li>PID: {{vm.patient[0][0]}}</li><li>GENDER: {{vm.patient[0][2]}}</li><li>STATUS: {{vm.patient[0][6]}}</li><li>DIAGNOSED: {{vm.patient[0][4]}} years old</li><li>SURVIVED: {{vm.patient[0][3]}} years</li><li>PROGRESSION: {{vm.patient[0][5]}}</li></ul><ul><li class="legend-section">Genes ({{vm.patientChromosomes.length}})</li><li><span ng-repeat="item in vm.patientChromosomes">{{item}} |</span></li></ul></div></div></section>'),e.put("app/components/metadata/metadata.html",'<os-tray caption="Patients" content="tray-content-block"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Search</h2></div><div class="col-xs-12 form-item"><input type="text" class="ngrs-range-slider ngrs-range-slider-no-pad" style="width:100%" ng-model="vm.search"></div><div class="col-xs-12 form-label"><h2>Information</h2><label>Raw data was provided by <a href="http://cancergenome.nih.gov/">The Cancer Genome Atlas</a>. Processing of data was conducted by the <a href="http://www.sttrcancer.org/en.html">Solid Tumor Translational Research Organization</a> in conjuntion with the <a href="http://www.fhcrc.org">Fred Hutchinson Cancer Research Center</a>, <a href="http://www.uwmedicine.org/">UW Medicine</a> and <a href="http://www.scca.org">The Seattle Cancer Care Alliance</a>.</label></div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>{{vm.dataset}} Metadata</h2><table id="metadata-datatable" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></div></section>'),e.put("app/components/pathways/pathways.html",'<os-tray content="tray-content-block"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Options</h2></div><div class="col-xs-12 form-item"><label>Search</label> <input type="text" class="form-control" ng-model="vm.search"></div><div class="col-sm-12 form-item"><label>Cohorts</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" style="width: 34px;display: inline-block; margin-right:0px; float:right" ng-click="vm.addCohortGene()">+</button> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width: 220px;display: inline-block; margin-right:0px;">{{vm.optCohortGene.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optCohortGenes" ng-click="vm.optCohortGene=item">{{item.name}}</li></ul></div></div><div class="col-xs-12 form-label"><h2>Legend</h2><span class="legend-bar" style="border-color: green">Activation</span> <span class="legend-bar" style="border-color: red">Inhibition</span> <span class="legend-bar" style="border-color: #38347B">Modification</span> <span class="legend-bar" style="border-color: #056ce1">Genes</span></div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Pathways</h2><div id="gbm-chart" class="pathways-chart"></div></div></section><div class="modal fade pathways" id="gbm-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div>'),e.put("app/components/pca/pca.html",'<os-tray content="tray-content-block" change="vm.resize($event)"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Filters</h2></div><div class="col-xs-12 form-item"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div><div class="col-xs-12 form-item"><label>Patient Colors</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optNodeColor.name}} <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optNodeColors" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="vm.optNodeColor = item" ng-checked="vm.optNodeColor==item"> {{item.name}}</label></li></ul></div></div><div class="col-xs-12 form-item"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width: 100%;" ng-model="vm.search"></div><div class="col-xs-12 form-label"><h2>Cohorts</h2></div><div class="col-sm-12 form-item"><label>Patient Cohorts</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" style="width: 34px;display: inline-block; margin-right:0px; float:right" ng-click="vm.addCohortPatient()">+</button> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width: 220px;display: inline-block; margin-right:0px;">{{vm.optCohortPatient.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optCohortPatients" ng-click="vm.optCohortPatient=item">{{item.name}}</li></ul></div></div><div class="col-xs-6 form-label"><h2>Legend</h2><span class="circle" style="background-color:black;width:10px;height: 10px;margin-right:10px;"></span>Patients</div><div class="col-xs-6 form-label"><h2>Variance</h2>PC1: {{vm.pc1}}%<br>PC2: {{vm.pc2}}%</div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Principal Component Analysis</h2><div id="pca-chart" class="pca"></div></div></section>'),e.put("app/components/pca3d/pca3d.html",'<section id="pca-chart" class="pca container-fluid" style="position: absolute;left:0px;top:0px;right: 0px;bottom: 0px;padding:0px;margin:0px;overflow: hidden;"></section>'),e.put("app/components/plsr/plsr.html",'<os-tray content="tray-content-block" change="vm.resize($event)"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Filters</h2></div><div class="col-xs-12 form-item"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div><div class="col-xs-12 form-item"><label>Age At Diagnosis</label><div range-slider="" min="vm.deathMinValue" model-min="vm.deathMinFilter" max="vm.deathMaxValue" model-max="vm.deathMaxFilter" prevent-equal-min-max="true" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div><div class="col-xs-12 form-item"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMinFilter" max="vm.survivalMaxValue" model-max="vm.survivalMaxFilter" prevent-equal-min-max="" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div><div class="col-xs-12 form-label"><h2>Cohorts</h2></div><div class="col-sm-12 form-item"><label>Gene Cohorts</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" style="width: 34px;display: inline-block; margin-right:0px; float:right" ng-click="vm.addCohortGene()">+</button> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width: 220px;display: inline-block; margin-right:0px;">{{vm.optCohortGene.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optCohortGenes" ng-click="vm.optCohortGene=item">{{item.name}}</li></ul></div></div><div class="col-xs-12 form-label"><h2>Legend</h2><span class="legend-bar" style="border-color: #1396de">Age At Diagnosis</span> <span class="legend-bar" style="border-color: #38347b">Survial</span> <span class="legend"><span class="legend-dot" style="background-color:#000"></span>Genes</span></div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Partial Least Squares Regression</h2><div id="plsr-chart" class="plsr"></div></div></section><div class="modal fade plsr-webpage" id="plsr-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div>'),e.put("app/components/subnav/subnav.html",'<div class="subnav"><div class="btn-group" style="float:right"><button type="button" class="btn btn-primary" ng-click="vm.toolsClick()">Analysis Tools</button> <button type="button" class="btn btn-primary" ng-click="vm.cohortClick()">Cohorts</button></div><h2>{{vm.tool}} &mdash; {{vm.filter}}</h2></div>'),e.put("app/components/survival/survival.html",'<os-tray content="tray-content-block" change="vm.resize($event)"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Patient Cohort</h2></div><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optCohortPatient.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optCohortPatients" ng-click="vm.optCohortPatient=item">{{item.name}}</li></ul></div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Patient Survival</h2><div style="text-align: center;"><img id="survival-img" style="width:100%; height: auto; margin:auto;"></div></div></section>'),e.put("app/components/test/test.html",'<div class="test"><input ng-model="vm.message"><br>Hello {{vm.message}}<div ng-repeat="item in vm.datasets">{{item}}</div></div>'),e.put("app/components/timelines/timelines.html",'<os-tray content="tray-content-block" change="vm.resize($event)"><section class="tray-content"><div class="row"><div class="col-xs-12 form-label"><h2>Options</h2></div><div class="col-xs-12 form-item"><label>Sort</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.sort.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.features" ng-click="vm.sort = item">{{item.name}}</li></ul></div></div><div class="col-xs-12 form-item"><label>Align</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.align.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.events" ng-click="vm.align = item">{{item.name}}</li></ul></div></div><div class="col-xs-12 form-item"><label>Timescale</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.timescale.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.timescales" ng-click="vm.timescale=item">{{item.name}}</li></ul></div></div><div class="col-sm-12 form-item"><label>Event Colors</label> <span ng-repeat="item in vm.events" class="legend-bar btn btn-default filter-button {{item.color}}" ng-style="{\'border-color\':item.color}" ng-click="vm.updateEventColor(item); $event.stopPropagation();">{{item.name}} ({{item.selected ? \'Visible\' : \'Hidden\'}})</span></div><div class="col-xs-12 form-label"><h2>Cohorts</h2></div><div class="col-sm-12 form-item"><label>Display Mode</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optCohortMode.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optCohortModes" ng-click="vm.optCohortMode=item">{{item.name}}</li></ul></div></div><div class="col-sm-12 form-item"><label>Patient Cohorts</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" style="width: 34px;display: inline-block; margin-right:0px; float:right" ng-click="vm.addCohortPatient()">+</button> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width: 220px;display: inline-block; margin-right:0px;">{{vm.optCohortPatient.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optCohortPatients" ng-click="vm.optCohortPatient=item">{{item.name}}</li></ul></div></div></div></section></os-tray><section class="tray-content-block"><div class="container-fluid"><h2>Timelines</h2><div id="timelines-chart"></div><div class="timeline-legend-scale" style="position:relative;top:-30px;width: 100%;text-align: center; font-weight: 500;">{{vm.timescaleunit}}</div></div><div class="timeline-hover" ng-if="vm.selShow"><dl><dt>Event</dt><dd>{{vm.selEvent}}</dd></dl><dl><dt>Patient Id</dt><dd>{{vm.selPatient}}</dd></dl><dl ng-repeat="item in vm.selFields"><dt>{{item.name}}</dt><dd>{{item.value}}</dd></dl></div></section>'),e.put("app/components/toolmenu/toolmenu.html",'<section class="tool-menu tray tray-collapsed-left"><div class="row"><div class="col-xs-12 form-label"><h2>Tools</h2></div></div><div class="row tool-menu-row" ng-repeat="tool in vm.tools"><a href="" ng-click="vm.explore(tool.route, vm.datasource)"><img class="tool-menu-img" ng-src="/assets/images/datasets/{{tool.img}}"><h2 class="tool-menu-lbl">{{tool.name}}</h2></a></div></section>'),e.put("app/components/tools/tools.html",'<section class="tools container-fluid"><div class="row"><div class="col-sm-8 col-md-6"><h1>Analysis Tools</h1></div></div><div class="row"><ul><li ng-repeat="tool in vm.tools" class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><img class="tools-img" ng-src="/assets/images/datasets/{{tool.img}}"><div class="tools-copy"><h2 class="tools-lbl">{{tool.name}}</h2><a href="" ng-click="vm.explore(tool.route, vm.datasource)">Explore</a></div></li></ul></div></section>'),e.put("app/components/tray/tray.html",'<div class="tray {{vm.trayClass}}" locked="true"><ng-transclude></ng-transclude><i class="fa fa-lock tray-sticky-icon {{vm.iconClass}}" ng-click="vm.toggle()"></i></div>')}]);
//# sourceMappingURL=../maps/scripts/app-3bbe8fce5c.js.map
